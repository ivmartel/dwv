<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>src/html/gui.js - dwv</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="../assets/css/logo.png" title="dwv"></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 0.5.1</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="../classes/dwv.App.html">dwv.App</a></li>
            
                <li><a href="../classes/dwv.dicom.DataReader.html">dwv.dicom.DataReader</a></li>
            
                <li><a href="../classes/dwv.dicom.DicomParser.html">dwv.dicom.DicomParser</a></li>
            
                <li><a href="../classes/dwv.dicom.Dictionary.html">dwv.dicom.Dictionary</a></li>
            
                <li><a href="../classes/dwv.gui.html">dwv.gui</a></li>
            
                <li><a href="../classes/dwv.html.html">dwv.html</a></li>
            
                <li><a href="../classes/dwv.html.Layer.html">dwv.html.Layer</a></li>
            
                <li><a href="../classes/dwv.html.Style.html">dwv.html.Style</a></li>
            
                <li><a href="../classes/dwv.image.html">dwv.image</a></li>
            
                <li><a href="../classes/dwv.image.filter.Sharpen.html">dwv.image.filter.Sharpen</a></li>
            
                <li><a href="../classes/dwv.image.filter.Sobel.html">dwv.image.filter.Sobel</a></li>
            
                <li><a href="../classes/dwv.image.filter.Threshold.html">dwv.image.filter.Threshold</a></li>
            
                <li><a href="../classes/dwv.image.Image.html">dwv.image.Image</a></li>
            
                <li><a href="../classes/dwv.image.lut.Rescale.html">dwv.image.lut.Rescale</a></li>
            
                <li><a href="../classes/dwv.image.lut.Window.html">dwv.image.lut.Window</a></li>
            
                <li><a href="../classes/dwv.image.Size.html">dwv.image.Size</a></li>
            
                <li><a href="../classes/dwv.image.Spacing.html">dwv.image.Spacing</a></li>
            
                <li><a href="../classes/dwv.image.View.html">dwv.image.View</a></li>
            
                <li><a href="../classes/dwv.info.html">dwv.info</a></li>
            
                <li><a href="../classes/dwv.io.File.html">dwv.io.File</a></li>
            
                <li><a href="../classes/dwv.io.Url.html">dwv.io.Url</a></li>
            
                <li><a href="../classes/dwv.math.BucketQueue.html">dwv.math.BucketQueue</a></li>
            
                <li><a href="../classes/dwv.math.Circle.html">dwv.math.Circle</a></li>
            
                <li><a href="../classes/dwv.math.FastPoint2D.html">dwv.math.FastPoint2D</a></li>
            
                <li><a href="../classes/dwv.math.Line.html">dwv.math.Line</a></li>
            
                <li><a href="../classes/dwv.math.Path.html">dwv.math.Path</a></li>
            
                <li><a href="../classes/dwv.math.Point2D.html">dwv.math.Point2D</a></li>
            
                <li><a href="../classes/dwv.math.Rectangle.html">dwv.math.Rectangle</a></li>
            
                <li><a href="../classes/dwv.math.ROI.html">dwv.math.ROI</a></li>
            
                <li><a href="../classes/dwv.math.Scissors.html">dwv.math.Scissors</a></li>
            
                <li><a href="../classes/dwv.tool.html">dwv.tool</a></li>
            
                <li><a href="../classes/dwv.tool.Draw.html">dwv.tool.Draw</a></li>
            
                <li><a href="../classes/dwv.tool.DrawCircleCommand.html">dwv.tool.DrawCircleCommand</a></li>
            
                <li><a href="../classes/dwv.tool.DrawLineCommand.html">dwv.tool.DrawLineCommand</a></li>
            
                <li><a href="../classes/dwv.tool.DrawLivewireCommand.html">dwv.tool.DrawLivewireCommand</a></li>
            
                <li><a href="../classes/dwv.tool.DrawRectangleCommand.html">dwv.tool.DrawRectangleCommand</a></li>
            
                <li><a href="../classes/dwv.tool.DrawRoiCommand.html">dwv.tool.DrawRoiCommand</a></li>
            
                <li><a href="../classes/dwv.tool.Filter.html">dwv.tool.Filter</a></li>
            
                <li><a href="../classes/dwv.tool.filter.Sharpen.html">dwv.tool.filter.Sharpen</a></li>
            
                <li><a href="../classes/dwv.tool.filter.Threshold.html">dwv.tool.filter.Threshold</a></li>
            
                <li><a href="../classes/dwv.tool.Livewire.html">dwv.tool.Livewire</a></li>
            
                <li><a href="../classes/dwv.tool.RunFilterCommand.html">dwv.tool.RunFilterCommand</a></li>
            
                <li><a href="../classes/dwv.tool.ToolBox.html">dwv.tool.ToolBox</a></li>
            
                <li><a href="../classes/dwv.tool.UndoStack.html">dwv.tool.UndoStack</a></li>
            
                <li><a href="../classes/dwv.tool.WindowLevel.html">dwv.tool.WindowLevel</a></li>
            
                <li><a href="../classes/dwv.tool.Zoom.html">dwv.tool.Zoom</a></li>
            
                <li><a href="../classes/dwv.utils.html">dwv.utils</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
                <li><a href="../modules/dicom.html">dicom</a></li>
            
                <li><a href="../modules/gui.html">gui</a></li>
            
                <li><a href="../modules/html.html">html</a></li>
            
                <li><a href="../modules/image.html">image</a></li>
            
                <li><a href="../modules/info.html">info</a></li>
            
                <li><a href="../modules/io.html">io</a></li>
            
                <li><a href="../modules/math.html">math</a></li>
            
                <li><a href="../modules/tool.html">tool</a></li>
            
                <li><a href="../modules/utils.html">utils</a></li>
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: src/html/gui.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
/** 
 * GUI module.
 * @module gui
 */
var dwv = dwv || {};
/**
 * Namespace for GUI functions.
 * @class gui
 * @namespace dwv
 * @static
 */
dwv.gui = dwv.gui || {};

/**
 * Handle window/level change.
 * @method onChangeWindowLevelPreset
 * @namespace dwv.gui
 * @static
 * @param {Object} event The change event.
 */
dwv.gui.onChangeWindowLevelPreset = function(event)
{
    app.getToolBox().getSelectedTool().setPreset(this.value);
};

/**
 * Handle colour map change.
 * @method onChangeColourMap
 * @static
 * @param {Object} event The change event.
 */
dwv.gui.onChangeColourMap = function(event)
{
    app.getToolBox().getSelectedTool().setColourMap(this.value);
};

/**
 * Handle loader change.
 * @method onChangeLoader
 * @static
 * @param {Object} event The change event.
 */
dwv.gui.onChangeLoader = function(event)
{
    if( this.value === &quot;file&quot;) {
        dwv.gui.clearUrlLoadHtml();
        dwv.gui.appendFileLoadHtml();
    }
    else if( this.value === &quot;url&quot;) {
        dwv.gui.clearFileLoadHtml();
        dwv.gui.appendUrlLoadHtml();
    }
};

/**
 * Handle files change.
 * @method onChangeFiles
 * @static
 * @param {Object} event The change event.
 */
dwv.gui.onChangeFiles = function(event)
{
    app.onChangeFiles(event);
};

/**
 * Handle URL change.
 * @method onChangeURL
 * @static
 * @param {Object} event The change event.
 */
dwv.gui.onChangeURL = function(event)
{
    app.onChangeURL(event);
};

/**
 * Handle tool change.
 * @method onChangeTool
 * @static
 * @param {Object} event The change event.
 */
dwv.gui.onChangeTool = function(event)
{
    app.getToolBox().setSelectedTool(this.value);
};

/**
 * Handle filter change.
 * @method onChangeFilter
 * @static
 * @param {Object} event The change event.
 */
dwv.gui.onChangeFilter = function(event)
{
    app.getToolBox().getSelectedTool().setSelectedFilter(this.value);
};

/**
 * Handle shape change.
 * @method onChangeShape
 * @static
 * @param {Object} event The change event.
 */
dwv.gui.onChangeShape = function(event)
{
    app.getToolBox().getSelectedTool().setShapeName(this.value);
};

/**
 * Handle line color change.
 * @method onChangeLineColour
 * @static
 * @param {Object} event The change event.
 */
dwv.gui.onChangeLineColour = function(event)
{
    app.getToolBox().getSelectedTool().setLineColour(this.value);
};

/**
 * Append the slider HTML.
 * @method getSliderHtml
 * @static
 */
dwv.gui.getSliderHtml = function()
{
    var min = app.getImage().getDataRange().min;
    var max = app.getImage().getDataRange().max;

    if( app.isMobile() )
    {
        // jquery-mobile range slider
        var inputMin = document.createElement(&quot;input&quot;);
        inputMin.setAttribute(&quot;id&quot;, &quot;threshold-min&quot;);
        inputMin.setAttribute(&quot;max&quot;, max);
        inputMin.setAttribute(&quot;min&quot;, min);
        inputMin.setAttribute(&quot;value&quot;, min);
        inputMin.setAttribute(&quot;type&quot;, &quot;range&quot;);

        var inputMax = document.createElement(&quot;input&quot;);
        inputMax.setAttribute(&quot;id&quot;, &quot;threshold-max&quot;);
        inputMax.setAttribute(&quot;max&quot;, max);
        inputMax.setAttribute(&quot;min&quot;, min);
        inputMax.setAttribute(&quot;value&quot;, max);
        inputMax.setAttribute(&quot;type&quot;, &quot;range&quot;);
        
        var div = document.createElement(&quot;div&quot;);
        div.setAttribute(&quot;id&quot;, &quot;threshold-div&quot;);
        div.setAttribute(&quot;data-role&quot;, &quot;rangeslider&quot;);
        div.appendChild(inputMin);
        div.appendChild(inputMax);
        div.setAttribute(&quot;data-mini&quot;, &quot;true&quot;);
        document.getElementById(&quot;thresholdLi&quot;).appendChild(div);

        $(&quot;#threshold-div&quot;).bind(&quot;change&quot;,
            function( event ) {
                app.getToolBox().getSelectedTool().getSelectedFilter().run(
                    { &quot;min&quot;:$(&quot;#threshold-min&quot;).val(),
                      &quot;max&quot;:$(&quot;#threshold-max&quot;).val() } );
            }
        );
    }
    else
    {
        // jquery-ui slider
        $( &quot;#thresholdLi&quot; ).slider({
            range: true,
            min: min,
            max: max,
            values: [ min, max ],
            slide: function( event, ui ) {
                app.getToolBox().getSelectedTool().getSelectedFilter().run(
                        {&#x27;min&#x27;:ui.values[0], &#x27;max&#x27;:ui.values[1]});
            }
        });
    }
};

/**
 * Update the progress bar.
 * @method updateProgress
 * @static
 * @param {Object} event A ProgressEvent.
 */
dwv.gui.updateProgress = function(event)
{
    // event is an ProgressEvent.
    if( event.lengthComputable )
    {
        var percent = Math.round((event.loaded / event.total) * 100);
        if( app.isMobile() )
        {
            // jquery-mobile loading
            if( percent &lt; 100 ) {
                $.mobile.loading(&quot;show&quot;, {text: percent+&quot;%&quot;, textVisible: true, theme: &quot;b&quot;} );
            }
            else if( percent === 100 ) {
                $.mobile.loading(&quot;hide&quot;);
            }
        }
        else
        {
            // jquery-ui progress bar
            if( percent &lt;= 100 ) {
                $(&quot;#progressbar&quot;).progressbar({ value: percent });
            }
        }
    }
};

/**
 * Append the loadbox HTML to the page.
 * @method appendLoadboxHtml
 * @static
 */
dwv.gui.appendLoadboxHtml = function()
{
    // select
    var loaderSelector = dwv.html.createHtmlSelect(&quot;loaderSelect&quot;,dwv.io.loaders);
    loaderSelector.onchange = dwv.gui.onChangeLoader;
    
    // node
    var node = document.getElementById(&quot;loaderlist&quot;);
    // clear it
    while(node.hasChildNodes()) node.removeChild(node.firstChild);
    // append
    node.appendChild(loaderSelector);
    // trigger create event (mobile)
    $(&quot;#loaderlist&quot;).trigger(&quot;create&quot;);
    
    // default load
    dwv.gui.appendFileLoadHtml();
};

/**
 * Append the file load HTML to the page.
 * @method appendFileLoadHtml
 * @static
 */
dwv.gui.appendFileLoadHtml = function()
{
    // input
    var fileLoadInput = document.createElement(&quot;input&quot;);
    fileLoadInput.onchange = dwv.gui.onChangeFiles;
    fileLoadInput.type = &quot;file&quot;;
    fileLoadInput.multiple = true;
    fileLoadInput.id = &quot;imagefiles&quot;;
    fileLoadInput.setAttribute(&quot;data-clear-btn&quot;,&quot;true&quot;);
    fileLoadInput.setAttribute(&quot;data-mini&quot;,&quot;true&quot;);

    // associated div
    var fileLoadDiv = document.createElement(&quot;div&quot;);
    fileLoadDiv.id = &quot;imagefilesdiv&quot;;
    fileLoadDiv.appendChild(fileLoadInput);
    
    // node
    var node = document.getElementById(&quot;loaderlist&quot;);
    // append
    node.appendChild(fileLoadDiv);
    // trigger create event (mobile)
    $(&quot;#loaderlist&quot;).trigger(&quot;create&quot;);
};

/**
 * Clear the file load HTML.
 * @method clearUrlLoadHtml
 * @static
 */
dwv.gui.clearFileLoadHtml = function()
{
    dwv.html.removeNode(&quot;imagefilesdiv&quot;);
};

/**
 * Append the url load HTML to the page.
 * @method appendUrlLoadHtml
 * @static
 */
dwv.gui.appendUrlLoadHtml = function()
{
    // input
    var urlLoadInput = document.createElement(&quot;input&quot;);
    urlLoadInput.onchange = dwv.gui.onChangeURL;
    urlLoadInput.type = &quot;url&quot;;
    urlLoadInput.id = &quot;imageurl&quot;;
    urlLoadInput.setAttribute(&quot;data-clear-btn&quot;,&quot;true&quot;);
    urlLoadInput.setAttribute(&quot;data-mini&quot;,&quot;true&quot;);

    // associated div
    var urlLoadDiv = document.createElement(&quot;div&quot;);
    urlLoadDiv.id = &quot;imageurldiv&quot;;
    urlLoadDiv.appendChild(urlLoadInput);

    // node
    var node = document.getElementById(&quot;loaderlist&quot;);
    // append
    node.appendChild(urlLoadDiv);
    // trigger create event (mobile)
    $(&quot;#loaderlist&quot;).trigger(&quot;create&quot;);
};

/**
 * Clear the url load HTML.
 * @method clearUrlLoadHtml
 * @static
 */
dwv.gui.clearUrlLoadHtml = function()
{
    dwv.html.removeNode(&quot;imageurldiv&quot;);
};

/**
 * Append the toolbox HTML to the page.
 * @method appendToolboxHtml
 * @static
 */
dwv.gui.appendToolboxHtml = function()
{
    // select
    var toolSelector = dwv.html.createHtmlSelect(&quot;toolSelect&quot;,dwv.tool.tools);
    toolSelector.onchange = dwv.gui.onChangeTool;
    // label
    var toolLabel = document.createElement(&quot;label&quot;);
    toolLabel.setAttribute(&quot;for&quot;, &quot;toolSelect&quot;);
    toolLabel.appendChild(document.createTextNode(&quot;Tool: &quot;));
    // list element
    var toolLi = document.createElement(&quot;li&quot;);
    toolLi.id = &quot;toolLi&quot;;
    //toolLi.appendChild(toolLabel);
    toolLi.appendChild(toolSelector);
    toolLi.setAttribute(&quot;class&quot;,&quot;ui-block-a&quot;);

    // node
    var node = document.getElementById(&quot;toolList&quot;);
    // clear it
    while(node.hasChildNodes()) node.removeChild(node.firstChild);
    // append
    node.appendChild(toolLi);
    // trigger create event (mobile)
    $(&quot;#toolList&quot;).trigger(&quot;create&quot;);
};

/**
 * Append the window/level HTML to the page.
 * @method appendWindowLevelHtml
 * @static
 */
dwv.gui.appendWindowLevelHtml = function()
{
    // preset selector
    var wlSelector = dwv.html.createHtmlSelect(&quot;presetSelect&quot;,dwv.tool.presets);
    wlSelector.onchange = dwv.gui.onChangeWindowLevelPreset;
    // preset label
    var wlLabel = document.createElement(&quot;label&quot;);
    wlLabel.setAttribute(&quot;for&quot;, &quot;presetSelect&quot;);
    wlLabel.appendChild(document.createTextNode(&quot;WL Preset: &quot;));
    // colour map selector
    var cmSelector = dwv.html.createHtmlSelect(&quot;colourMapSelect&quot;,dwv.tool.colourMaps);
    // special monochrome1 case
    if( app.getImage().getPhotometricInterpretation() === &quot;MONOCHROME1&quot; )
        cmSelector.options[1].defaultSelected = true;
    cmSelector.onchange = dwv.gui.onChangeColourMap;
    // colour map label
    var cmLabel = document.createElement(&quot;label&quot;);
    cmLabel.setAttribute(&quot;for&quot;, &quot;colourMapSelect&quot;);
    cmLabel.appendChild(document.createTextNode(&quot;Colour Map: &quot;));

    // preset list element
    var wlLi = document.createElement(&quot;li&quot;);
    wlLi.id = &quot;wlLi&quot;;
    //wlLi.appendChild(wlLabel);
    wlLi.appendChild(wlSelector);
    wlLi.setAttribute(&quot;class&quot;,&quot;ui-block-b&quot;);
    // color map list element
    var cmLi = document.createElement(&quot;li&quot;);
    cmLi.id = &quot;cmLi&quot;;
    // cmLi.appendChild(cmLabel);
    cmLi.appendChild(cmSelector);
    cmLi.setAttribute(&quot;class&quot;,&quot;ui-block-c&quot;);

    // node
    var node = document.getElementById(&quot;toolList&quot;);
    if( app.getImage().getPhotometricInterpretation().match(/MONOCHROME/) !== null )
    {
        // apend preset
        node.appendChild(wlLi);
        // apend color map if monochrome image
        node.appendChild(cmLi);
    }
    // trigger create event (mobile)
    $(&quot;#toolList&quot;).trigger(&quot;create&quot;);
};

/**
 * Clear the window/level HTML.
 * @method clearWindowLevelHtml
 * @static
 */
dwv.gui.clearWindowLevelHtml = function()
{
    dwv.html.removeNode(&quot;wlLi&quot;);
    dwv.html.removeNode(&quot;cmLi&quot;);
};

/**
 * Append the draw HTML to the page.
 * @method appendDrawHtml
 * @static
 */
dwv.gui.appendDrawHtml = function()
{
    // shape select
    var shapeSelector = dwv.html.createHtmlSelect(&quot;shapeSelect&quot;,dwv.tool.shapes);
    shapeSelector.onchange = dwv.gui.onChangeShape;
    // shape label
    var shapeLabel = document.createElement(&quot;label&quot;);
    shapeLabel.setAttribute(&quot;for&quot;, &quot;shapeSelect&quot;);
    shapeLabel.appendChild(document.createTextNode(&quot;Shape: &quot;));
    // colour select
    var colourSelector = dwv.html.createHtmlSelect(&quot;colourSelect&quot;,dwv.tool.colors);
    colourSelector.onchange = dwv.gui.onChangeLineColour;
    // colour label
    var colourLabel = document.createElement(&quot;label&quot;);
    colourLabel.setAttribute(&quot;for&quot;, &quot;colourSelect&quot;);
    colourLabel.appendChild(document.createTextNode(&quot;Colour: &quot;));

    // list element
    var shapeLi = document.createElement(&quot;li&quot;);
    shapeLi.id = &quot;shapeLi&quot;;
    // shapeLi.appendChild(shapeLabel);
    shapeLi.appendChild(shapeSelector);
    shapeLi.setAttribute(&quot;class&quot;,&quot;ui-block-c&quot;);
    // list element
    var colourLi = document.createElement(&quot;li&quot;);
    colourLi.id = &quot;colourLi&quot;;
    //colourLi.appendChild(colourLabel);
    colourLi.appendChild(colourSelector);
    colourLi.setAttribute(&quot;class&quot;,&quot;ui-block-b&quot;);
    
    // node
    var node = document.getElementById(&quot;toolList&quot;);
    // apend shape
    node.appendChild(shapeLi);
    // append color
    node.appendChild(colourLi);
    // trigger create event (mobile)
    $(&quot;#toolList&quot;).trigger(&quot;create&quot;);
};

/**
 * Clear the draw HTML.
 * @method clearDrawHtml
 * @static
 */
dwv.gui.clearDrawHtml = function()
{
    dwv.html.removeNode(&quot;colourLi&quot;);
    dwv.html.removeNode(&quot;shapeLi&quot;);
};

/**
 * Append the color chooser HTML to the page.
 * @method appendLivewireHtml
 * @static
 */
dwv.gui.appendLivewireHtml = function()
{
    // select
    var colourSelector = dwv.html.createHtmlSelect(&quot;colourSelect&quot;,dwv.tool.colors);
    colourSelector.onchange = dwv.gui.onChangeLineColour;
    // label
    var colourLabel = document.createElement(&quot;label&quot;);
    colourLabel.setAttribute(&quot;for&quot;, &quot;colourSelect&quot;);
    colourLabel.appendChild(document.createTextNode(&quot;Colour: &quot;));
    
    // list element
    var colourLi = document.createElement(&quot;li&quot;);
    colourLi.id = &quot;colourLi&quot;;
    colourLi.setAttribute(&quot;class&quot;,&quot;ui-block-b&quot;);
    //colourLi.appendChild(colourLabel);
    colourLi.appendChild(colourSelector);
    
    // append to tool list
    document.getElementById(&quot;toolList&quot;).appendChild(colourLi);
    // trigger create event (mobile)
    $(&quot;#toolList&quot;).trigger(&quot;create&quot;);
};

/**
 * Clear the color chooser HTML.
 * @method clearDrawHtml
 * @static
 */
dwv.gui.clearLivewireHtml = function()
{
    dwv.html.removeNode(&quot;colourLi&quot;);
};

/**
 * Append the filter HTML to the page.
 * @method appendLivewireHtml
 * @static
 */
dwv.gui.appendFilterHtml = function()
{
    // select
    var filterSelector = dwv.html.createHtmlSelect(&quot;filterSelect&quot;,dwv.tool.filters);
    filterSelector.onchange = dwv.gui.onChangeFilter;
    // label
    var filterLabel = document.createElement(&quot;label&quot;);
    filterLabel.setAttribute(&quot;for&quot;, &quot;filterSelect&quot;);
    filterLabel.appendChild(document.createTextNode(&quot;Filter: &quot;));

    // list element
    var filterLi = document.createElement(&quot;li&quot;);
    filterLi.id = &quot;filterLi&quot;;
    filterLi.setAttribute(&quot;class&quot;,&quot;ui-block-b&quot;);
    //filterLi.appendChild(filterLabel);
    filterLi.appendChild(filterSelector);
    
    // append to tool list
    document.getElementById(&quot;toolList&quot;).appendChild(filterLi);
    // trigger create event (mobile)
    $(&quot;#toolList&quot;).trigger(&quot;create&quot;);
};

/**
 * Clear the filter HTML.
 * @method clearDrawHtml
 * @static
 */
dwv.gui.clearFilterHtml = function()
{
    dwv.html.removeNode(&quot;filterLi&quot;);
};

// create namespace if not there
dwv.gui.filter = dwv.gui.filter || {};

/**
 * Append the threshold filter HTML to the page.
 * @method appendThresholdHtml
 * @static
 */
dwv.gui.filter.appendThresholdHtml = function()
{
    // list element
    var thresholdLi = document.createElement(&quot;li&quot;);
    thresholdLi.setAttribute(&quot;class&quot;,&quot;ui-block-c&quot;);
    thresholdLi.id = &quot;thresholdLi&quot;;
    
    // append to tool list
    document.getElementById(&quot;toolList&quot;).appendChild(thresholdLi);
    // gui specific slider...
    dwv.gui.getSliderHtml();
    // trigger create event (mobile)
    $(&quot;#toolList&quot;).trigger(&quot;create&quot;);
};

/**
 * Clear the treshold filter HTML.
 * @method clearDrawHtml
 * @static
 */
dwv.gui.filter.clearThresholdHtml = function()
{
    dwv.html.removeNode(&quot;thresholdLi&quot;);
};

/**
 * Append the sharpen filter HTML to the page.
 * @method appendSharpenHtml
 * @static
 */
dwv.gui.filter.appendSharpenHtml = function()
{
    // button
    var buttonRun = document.createElement(&quot;button&quot;);
    buttonRun.id = &quot;runFilterButton&quot;;
    buttonRun.onclick = app.getToolBox().getSelectedTool().getSelectedFilter().run;
    buttonRun.appendChild(document.createTextNode(&quot;Apply&quot;));

    // list element
    var sharpenLi = document.createElement(&quot;li&quot;);
    sharpenLi.id = &quot;sharpenLi&quot;;
    sharpenLi.setAttribute(&quot;class&quot;,&quot;ui-block-c&quot;);
    sharpenLi.appendChild(buttonRun);
    
    // append to tool list
    document.getElementById(&quot;toolList&quot;).appendChild(sharpenLi);
    // trigger create event (mobile)
    $(&quot;#toolList&quot;).trigger(&quot;create&quot;);
};

/**
 * Clear the sharpen filter HTML.
 * @method clearSharpenHtml
 * @static
 */
dwv.gui.filter.clearSharpenHtml = function()
{
    dwv.html.removeNode(&quot;sharpenLi&quot;);
};

/**
 * Append the sobel filter HTML to the page.
 * @method appendSharpenHtml
 * @static
 */
dwv.gui.filter.appendSobelHtml = function()
{
    // button
    var buttonRun = document.createElement(&quot;button&quot;);
    buttonRun.id = &quot;runFilterButton&quot;;
    buttonRun.onclick = app.getToolBox().getSelectedTool().getSelectedFilter().run;
    buttonRun.appendChild(document.createTextNode(&quot;Apply&quot;));

    // list element
    var sobelLi = document.createElement(&quot;li&quot;);
    sobelLi.id = &quot;sobelLi&quot;;
    sobelLi.setAttribute(&quot;class&quot;,&quot;ui-block-c&quot;);
    sobelLi.appendChild(buttonRun);
    
    // append to tool list
    document.getElementById(&quot;toolList&quot;).appendChild(sobelLi);
    // trigger create event (mobile)
    $(&quot;#toolList&quot;).trigger(&quot;create&quot;);
};

/**
 * Clear the sobel filter HTML.
 * @method clearSharpenHtml
 * @static
 */
dwv.gui.filter.clearSobelHtml = function()
{
    dwv.html.removeNode(&quot;sobelLi&quot;);
};

/**
 * Append the zoom HTML to the page.
 * @method appendZoomHtml
 * @static
 */
dwv.gui.appendZoomHtml = function()
{
    // button
    var button = document.createElement(&quot;button&quot;);
    button.id = &quot;zoomResetButton&quot;;
    button.name = &quot;zoomResetButton&quot;;
    button.onclick = dwv.tool.zoomReset;
    var text = document.createTextNode(&quot;Reset&quot;);
    button.appendChild(text);
    
    // list element
    var zoomLi = document.createElement(&quot;li&quot;);
    zoomLi.id = &quot;zoomLi&quot;;
    zoomLi.setAttribute(&quot;class&quot;,&quot;ui-block-c&quot;);
    zoomLi.appendChild(button);
    
    // append to tool list
    document.getElementById(&quot;toolList&quot;).appendChild(zoomLi);
    // trigger create event (mobile)
    $(&quot;#toolList&quot;).trigger(&quot;create&quot;);
};

/**
 * Clear the zoom filter HTML.
 * @method clearZoomHtml
 * @static
 */
dwv.gui.clearZoomHtml = function()
{
    dwv.html.removeNode(&quot;zoomLi&quot;);
};

/**
 * Append the undo HTML to the page.
 * @method appendUndoHtml
 * @static
 */
dwv.gui.appendUndoHtml = function()
{
    var paragraph = document.createElement(&quot;p&quot;);  
    paragraph.appendChild(document.createTextNode(&quot;History:&quot;));
    paragraph.appendChild(document.createElement(&quot;br&quot;));
    
    var select = document.createElement(&quot;select&quot;);
    select.id = &quot;history_list&quot;;
    select.name = &quot;history_list&quot;;
    select.multiple = &quot;multiple&quot;;
    paragraph.appendChild(select);

    // node
    var node = document.getElementById(&quot;history&quot;);
    // clear it
    while(node.hasChildNodes()) node.removeChild(node.firstChild);
    // append
    node.appendChild(paragraph);
};

/**
 * Add a command to the undo HTML.
 * @method addCommandToUndoHtml
 * @static
 * @param {String} commandName The name of the command to add.
 */
dwv.gui.addCommandToUndoHtml = function(commandName)
{
    var select = document.getElementById(&quot;history_list&quot;);
    // remove undone commands
    var count = select.length - (select.selectedIndex+1);
    if( count &gt; 0 )
    {
        for( var i = 0; i &lt; count; ++i)
        {
            select.remove(select.length-1);
        }
    }
    // add new option
    var option = document.createElement(&quot;option&quot;);
    option.text = commandName;
    option.value = commandName;
    select.add(option);
    // increment selected index
    select.selectedIndex++;
};

/**
 * Enable the last command of the undo HTML.
 * @method enableInUndoHtml
 * @static
 * @param {Boolean} enable Flag to enable or disable the command.
 */
dwv.gui.enableInUndoHtml = function(enable)
{
    var select = document.getElementById(&quot;history_list&quot;);
    // enable or not (order is important)
    var option;
    if( enable ) 
    {
        // increment selected index
        select.selectedIndex++;
        // enable option
        option = select.options[select.selectedIndex];
        option.disabled = false;
    }
    else 
    {
        // disable option
        option = select.options[select.selectedIndex];
        option.disabled = true;
        // decrement selected index
        select.selectedIndex--;
    }
};

/**
 * Build the help HTML.
 * @method appendHelpHtml
 * @param {Boolean} mobile Flag for mobile or not environement.
 */
dwv.gui.appendHelpHtml = function(mobile)
{
    var actionType = &quot;mouse&quot;;
    if( mobile ) actionType = &quot;touch&quot;;
    
    var toolHelpDiv = document.createElement(&quot;div&quot;);
    
    for ( var t in dwv.tool.tools )
    {
        var tool = dwv.tool.tools[t];
        // title
        var title = document.createElement(&quot;h3&quot;);
        title.appendChild(document.createTextNode(tool.getHelp().title));
        // doc div
        var docDiv = document.createElement(&quot;div&quot;);
        // brief
        var brief = document.createElement(&quot;p&quot;);
        brief.appendChild(document.createTextNode(tool.getHelp().brief));
        docDiv.appendChild(brief);
        // details
        if( tool.getHelp()[actionType] ) {
            var keys = Object.keys(tool.getHelp()[actionType]);
            for( var i=0; i&lt;keys.length; ++i )
            {
                var action = tool.getHelp()[actionType][keys[i]];
                
                var img = document.createElement(&quot;img&quot;);
                img.src = &quot;resources/&quot;+keys[i]+&quot;.png&quot;;
                img.style.float = &quot;left&quot;;
                img.style.margin = &quot;0px 15px 15px 0px&quot;;
                
                var br = document.createElement(&quot;br&quot;);
                br.style.clear = &quot;both&quot;;
                
                var para = document.createElement(&quot;p&quot;);
                para.appendChild(img);
                para.appendChild(document.createTextNode(action));
                para.appendChild(br);
                docDiv.appendChild(para);
            }
        }
        
        // different div structure for mobile or static
        if( mobile )
        {
            var toolDiv = document.createElement(&quot;div&quot;);
            toolDiv.setAttribute(&quot;data-role&quot;, &quot;collapsible&quot;);
            toolDiv.appendChild(title);
            toolDiv.appendChild(docDiv);
            toolHelpDiv.appendChild(toolDiv);
        }
        else
        {
            toolHelpDiv.id = &quot;accordion&quot;;
            toolHelpDiv.appendChild(title);
            toolHelpDiv.appendChild(docDiv);
        }
    }
    
    var helpNode = document.getElementById(&quot;help&quot;);

    var headPara = document.createElement(&quot;p&quot;);
    headPara.appendChild(document.createTextNode(&quot;DWV can load DICOM data &quot; +
        &quot;either from a local file or from an URL. All DICOM tags are available &quot; +
        &quot;in a searchable table, press the &#x27;tags&#x27; or grid button. &quot; + 
        &quot;You can choose to display the image information overlay by pressing the &quot; + 
        &quot;&#x27;info&#x27; or i button. &quot;));
    helpNode.appendChild(headPara);
    
    var toolPara = document.createElement(&quot;p&quot;);
    toolPara.appendChild(document.createTextNode(&quot;Each tool defines the possible &quot; + 
        &quot;user interactions. The default tool is the window/level one. &quot; + 
        &quot;Here are the available tools:&quot;));
    helpNode.appendChild(toolPara);
    helpNode.appendChild(toolHelpDiv);
};

    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
