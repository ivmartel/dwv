{"version":3,"file":"assets/workers/jpeg2000.worker.min.js","mappings":"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","sources":["webpack://dwv/./src/decoders/pdfjs/arithmetic_decoder.js","webpack://dwv/./src/decoders/pdfjs/util.js","webpack://dwv/./src/decoders/pdfjs/jpx.js","webpack://dwv/./src/decoders/pdfjs/jpeg2000.worker.js"],"sourcesContent":["/* eslint-disable */\n\n/**\n * Modified for dwv:\n * - export root var,\n * - remove old style import/export and\n *   related (for ex 'use strict').\n */\n\n/* -*- Mode: Java; tab-width: 2; indent-tabs-mode: nil; c-basic-offset: 2 -*- */\n/* vim: set shiftwidth=2 tabstop=2 autoindent cindent expandtab: */\n/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/* This class implements the QM Coder decoding as defined in\n *   JPEG 2000 Part I Final Committee Draft Version 1.0\n *   Annex C.3 Arithmetic decoding procedure\n * available at http://www.jpeg.org/public/fcd15444-1.pdf\n *\n * The arithmetic decoder is used in conjunction with context models to decode\n * JPEG2000 and JBIG2 streams.\n */\nexport var ArithmeticDecoder = (function ArithmeticDecoderClosure() {\n  // Table C-2\n  var QeTable = [\n    {qe: 0x5601, nmps: 1, nlps: 1, switchFlag: 1},\n    {qe: 0x3401, nmps: 2, nlps: 6, switchFlag: 0},\n    {qe: 0x1801, nmps: 3, nlps: 9, switchFlag: 0},\n    {qe: 0x0AC1, nmps: 4, nlps: 12, switchFlag: 0},\n    {qe: 0x0521, nmps: 5, nlps: 29, switchFlag: 0},\n    {qe: 0x0221, nmps: 38, nlps: 33, switchFlag: 0},\n    {qe: 0x5601, nmps: 7, nlps: 6, switchFlag: 1},\n    {qe: 0x5401, nmps: 8, nlps: 14, switchFlag: 0},\n    {qe: 0x4801, nmps: 9, nlps: 14, switchFlag: 0},\n    {qe: 0x3801, nmps: 10, nlps: 14, switchFlag: 0},\n    {qe: 0x3001, nmps: 11, nlps: 17, switchFlag: 0},\n    {qe: 0x2401, nmps: 12, nlps: 18, switchFlag: 0},\n    {qe: 0x1C01, nmps: 13, nlps: 20, switchFlag: 0},\n    {qe: 0x1601, nmps: 29, nlps: 21, switchFlag: 0},\n    {qe: 0x5601, nmps: 15, nlps: 14, switchFlag: 1},\n    {qe: 0x5401, nmps: 16, nlps: 14, switchFlag: 0},\n    {qe: 0x5101, nmps: 17, nlps: 15, switchFlag: 0},\n    {qe: 0x4801, nmps: 18, nlps: 16, switchFlag: 0},\n    {qe: 0x3801, nmps: 19, nlps: 17, switchFlag: 0},\n    {qe: 0x3401, nmps: 20, nlps: 18, switchFlag: 0},\n    {qe: 0x3001, nmps: 21, nlps: 19, switchFlag: 0},\n    {qe: 0x2801, nmps: 22, nlps: 19, switchFlag: 0},\n    {qe: 0x2401, nmps: 23, nlps: 20, switchFlag: 0},\n    {qe: 0x2201, nmps: 24, nlps: 21, switchFlag: 0},\n    {qe: 0x1C01, nmps: 25, nlps: 22, switchFlag: 0},\n    {qe: 0x1801, nmps: 26, nlps: 23, switchFlag: 0},\n    {qe: 0x1601, nmps: 27, nlps: 24, switchFlag: 0},\n    {qe: 0x1401, nmps: 28, nlps: 25, switchFlag: 0},\n    {qe: 0x1201, nmps: 29, nlps: 26, switchFlag: 0},\n    {qe: 0x1101, nmps: 30, nlps: 27, switchFlag: 0},\n    {qe: 0x0AC1, nmps: 31, nlps: 28, switchFlag: 0},\n    {qe: 0x09C1, nmps: 32, nlps: 29, switchFlag: 0},\n    {qe: 0x08A1, nmps: 33, nlps: 30, switchFlag: 0},\n    {qe: 0x0521, nmps: 34, nlps: 31, switchFlag: 0},\n    {qe: 0x0441, nmps: 35, nlps: 32, switchFlag: 0},\n    {qe: 0x02A1, nmps: 36, nlps: 33, switchFlag: 0},\n    {qe: 0x0221, nmps: 37, nlps: 34, switchFlag: 0},\n    {qe: 0x0141, nmps: 38, nlps: 35, switchFlag: 0},\n    {qe: 0x0111, nmps: 39, nlps: 36, switchFlag: 0},\n    {qe: 0x0085, nmps: 40, nlps: 37, switchFlag: 0},\n    {qe: 0x0049, nmps: 41, nlps: 38, switchFlag: 0},\n    {qe: 0x0025, nmps: 42, nlps: 39, switchFlag: 0},\n    {qe: 0x0015, nmps: 43, nlps: 40, switchFlag: 0},\n    {qe: 0x0009, nmps: 44, nlps: 41, switchFlag: 0},\n    {qe: 0x0005, nmps: 45, nlps: 42, switchFlag: 0},\n    {qe: 0x0001, nmps: 45, nlps: 43, switchFlag: 0},\n    {qe: 0x5601, nmps: 46, nlps: 46, switchFlag: 0}\n  ];\n\n  // C.3.5 Initialisation of the decoder (INITDEC)\n  function ArithmeticDecoder(data, start, end) {\n    this.data = data;\n    this.bp = start;\n    this.dataEnd = end;\n\n    this.chigh = data[start];\n    this.clow = 0;\n\n    this.byteIn();\n\n    this.chigh = ((this.chigh << 7) & 0xFFFF) | ((this.clow >> 9) & 0x7F);\n    this.clow = (this.clow << 7) & 0xFFFF;\n    this.ct -= 7;\n    this.a = 0x8000;\n  }\n\n  ArithmeticDecoder.prototype = {\n    // C.3.4 Compressed data input (BYTEIN)\n    byteIn: function ArithmeticDecoder_byteIn() {\n      var data = this.data;\n      var bp = this.bp;\n      if (data[bp] === 0xFF) {\n        var b1 = data[bp + 1];\n        if (b1 > 0x8F) {\n          this.clow += 0xFF00;\n          this.ct = 8;\n        } else {\n          bp++;\n          this.clow += (data[bp] << 9);\n          this.ct = 7;\n          this.bp = bp;\n        }\n      } else {\n        bp++;\n        this.clow += bp < this.dataEnd ? (data[bp] << 8) : 0xFF00;\n        this.ct = 8;\n        this.bp = bp;\n      }\n      if (this.clow > 0xFFFF) {\n        this.chigh += (this.clow >> 16);\n        this.clow &= 0xFFFF;\n      }\n    },\n    // C.3.2 Decoding a decision (DECODE)\n    readBit: function ArithmeticDecoder_readBit(contexts, pos) {\n      // contexts are packed into 1 byte:\n      // highest 7 bits carry cx.index, lowest bit carries cx.mps\n      var cx_index = contexts[pos] >> 1, cx_mps = contexts[pos] & 1;\n      var qeTableIcx = QeTable[cx_index];\n      var qeIcx = qeTableIcx.qe;\n      var d;\n      var a = this.a - qeIcx;\n\n      if (this.chigh < qeIcx) {\n        // exchangeLps\n        if (a < qeIcx) {\n          a = qeIcx;\n          d = cx_mps;\n          cx_index = qeTableIcx.nmps;\n        } else {\n          a = qeIcx;\n          d = 1 ^ cx_mps;\n          if (qeTableIcx.switchFlag === 1) {\n            cx_mps = d;\n          }\n          cx_index = qeTableIcx.nlps;\n        }\n      } else {\n        this.chigh -= qeIcx;\n        if ((a & 0x8000) !== 0) {\n          this.a = a;\n          return cx_mps;\n        }\n        // exchangeMps\n        if (a < qeIcx) {\n          d = 1 ^ cx_mps;\n          if (qeTableIcx.switchFlag === 1) {\n            cx_mps = d;\n          }\n          cx_index = qeTableIcx.nlps;\n        } else {\n          d = cx_mps;\n          cx_index = qeTableIcx.nmps;\n        }\n      }\n      // C.3.3 renormD;\n      do {\n        if (this.ct === 0) {\n          this.byteIn();\n        }\n\n        a <<= 1;\n        this.chigh = ((this.chigh << 1) & 0xFFFF) | ((this.clow >> 15) & 1);\n        this.clow = (this.clow << 1) & 0xFFFF;\n        this.ct--;\n      } while ((a & 0x8000) === 0);\n      this.a = a;\n\n      contexts[pos] = cx_index << 1 | cx_mps;\n      return d;\n    }\n  };\n\n  return ArithmeticDecoder;\n})();\n","/* eslint-disable */\n\n/**\n * Modified for dwv:\n * - export root var,\n * - remove old style import/export and\n *   related (for ex 'use strict').\n */\n\n/* -*- Mode: Java; tab-width: 2; indent-tabs-mode: nil; c-basic-offset: 2 -*- */\n/* vim: set shiftwidth=2 tabstop=2 autoindent cindent expandtab: */\n/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/* globals Cmd, ColorSpace, Dict, MozBlobBuilder, Name, PDFJS, Ref, URL,\n           Promise */\n\nvar isWorker = (typeof window === 'undefined');\n\nexport var FONT_IDENTITY_MATRIX = [0.001, 0, 0, 0.001, 0, 0];\n\nexport var TextRenderingMode = {\n  FILL: 0,\n  STROKE: 1,\n  FILL_STROKE: 2,\n  INVISIBLE: 3,\n  FILL_ADD_TO_PATH: 4,\n  STROKE_ADD_TO_PATH: 5,\n  FILL_STROKE_ADD_TO_PATH: 6,\n  ADD_TO_PATH: 7,\n  FILL_STROKE_MASK: 3,\n  ADD_TO_PATH_FLAG: 4\n};\n\nexport var ImageKind = {\n  GRAYSCALE_1BPP: 1,\n  RGB_24BPP: 2,\n  RGBA_32BPP: 3\n};\n\nexport var AnnotationType = {\n  WIDGET: 1,\n  TEXT: 2,\n  LINK: 3\n};\n\nexport var StreamType = {\n  UNKNOWN: 0,\n  FLATE: 1,\n  LZW: 2,\n  DCT: 3,\n  JPX: 4,\n  JBIG: 5,\n  A85: 6,\n  AHX: 7,\n  CCF: 8,\n  RL: 9\n};\n\nexport var FontType = {\n  UNKNOWN: 0,\n  TYPE1: 1,\n  TYPE1C: 2,\n  CIDFONTTYPE0: 3,\n  CIDFONTTYPE0C: 4,\n  TRUETYPE: 5,\n  CIDFONTTYPE2: 6,\n  TYPE3: 7,\n  OPENTYPE: 8,\n  TYPE0: 9,\n  MMTYPE1: 10\n};\n\n// The global PDFJS object exposes the API\n// In production, it will be declared outside a global wrapper\n// In development, it will be declared here\n// if (!globalScope.PDFJS) {\n//   globalScope.PDFJS = {};\n// }\n\nvar PDFJS = {};\n\n// globalScope.PDFJS.pdfBug = false;\nPDFJS.pdfBug = false;\n\nPDFJS.VERBOSITY_LEVELS = {\n  errors: 0,\n  warnings: 1,\n  infos: 5\n};\n\n// All the possible operations for an operator list.\nexport var OPS = PDFJS.OPS = {\n  // Intentionally start from 1 so it is easy to spot bad operators that will be\n  // 0's.\n  dependency: 1,\n  setLineWidth: 2,\n  setLineCap: 3,\n  setLineJoin: 4,\n  setMiterLimit: 5,\n  setDash: 6,\n  setRenderingIntent: 7,\n  setFlatness: 8,\n  setGState: 9,\n  save: 10,\n  restore: 11,\n  transform: 12,\n  moveTo: 13,\n  lineTo: 14,\n  curveTo: 15,\n  curveTo2: 16,\n  curveTo3: 17,\n  closePath: 18,\n  rectangle: 19,\n  stroke: 20,\n  closeStroke: 21,\n  fill: 22,\n  eoFill: 23,\n  fillStroke: 24,\n  eoFillStroke: 25,\n  closeFillStroke: 26,\n  closeEOFillStroke: 27,\n  endPath: 28,\n  clip: 29,\n  eoClip: 30,\n  beginText: 31,\n  endText: 32,\n  setCharSpacing: 33,\n  setWordSpacing: 34,\n  setHScale: 35,\n  setLeading: 36,\n  setFont: 37,\n  setTextRenderingMode: 38,\n  setTextRise: 39,\n  moveText: 40,\n  setLeadingMoveText: 41,\n  setTextMatrix: 42,\n  nextLine: 43,\n  showText: 44,\n  showSpacedText: 45,\n  nextLineShowText: 46,\n  nextLineSetSpacingShowText: 47,\n  setCharWidth: 48,\n  setCharWidthAndBounds: 49,\n  setStrokeColorSpace: 50,\n  setFillColorSpace: 51,\n  setStrokeColor: 52,\n  setStrokeColorN: 53,\n  setFillColor: 54,\n  setFillColorN: 55,\n  setStrokeGray: 56,\n  setFillGray: 57,\n  setStrokeRGBColor: 58,\n  setFillRGBColor: 59,\n  setStrokeCMYKColor: 60,\n  setFillCMYKColor: 61,\n  shadingFill: 62,\n  beginInlineImage: 63,\n  beginImageData: 64,\n  endInlineImage: 65,\n  paintXObject: 66,\n  markPoint: 67,\n  markPointProps: 68,\n  beginMarkedContent: 69,\n  beginMarkedContentProps: 70,\n  endMarkedContent: 71,\n  beginCompat: 72,\n  endCompat: 73,\n  paintFormXObjectBegin: 74,\n  paintFormXObjectEnd: 75,\n  beginGroup: 76,\n  endGroup: 77,\n  beginAnnotations: 78,\n  endAnnotations: 79,\n  beginAnnotation: 80,\n  endAnnotation: 81,\n  paintJpegXObject: 82,\n  paintImageMaskXObject: 83,\n  paintImageMaskXObjectGroup: 84,\n  paintImageXObject: 85,\n  paintInlineImageXObject: 86,\n  paintInlineImageXObjectGroup: 87,\n  paintImageXObjectRepeat: 88,\n  paintImageMaskXObjectRepeat: 89,\n  paintSolidColorImageMask: 90,\n  constructPath: 91\n};\n\n// A notice for devs. These are good for things that are helpful to devs, such\n// as warning that Workers were disabled, which is important to devs but not\n// end users.\nexport function info(msg) {\n  if (PDFJS.verbosity >= PDFJS.VERBOSITY_LEVELS.infos) {\n    console.log('Info: ' + msg);\n  }\n}\n\n// Non-fatal warnings.\nexport function warn(msg) {\n  if (PDFJS.verbosity >= PDFJS.VERBOSITY_LEVELS.warnings) {\n    console.log('Warning: ' + msg);\n  }\n}\n\n// Fatal errors that should trigger the fallback UI and halt execution by\n// throwing an exception.\nexport function error(msg) {\n  // If multiple arguments were passed, pass them all to the log function.\n  if (arguments.length > 1) {\n    var logArguments = ['Error:'];\n    logArguments.push.apply(logArguments, arguments);\n    console.log.apply(console, logArguments);\n    // Join the arguments into a single string for the lines below.\n    msg = [].join.call(arguments, ' ');\n  } else {\n    console.log('Error: ' + msg);\n  }\n  console.log(backtrace());\n  UnsupportedManager.notify(UNSUPPORTED_FEATURES.unknown);\n  throw new Error(msg);\n}\n\nexport function backtrace() {\n  try {\n    throw new Error();\n  } catch (e) {\n    return e.stack ? e.stack.split('\\n').slice(2).join('\\n') : '';\n  }\n}\n\nexport function assert(cond, msg) {\n  if (!cond) {\n    error(msg);\n  }\n}\n\nexport var UNSUPPORTED_FEATURES = PDFJS.UNSUPPORTED_FEATURES = {\n  unknown: 'unknown',\n  forms: 'forms',\n  javaScript: 'javaScript',\n  smask: 'smask',\n  shadingPattern: 'shadingPattern',\n  font: 'font'\n};\n\nexport var UnsupportedManager = PDFJS.UnsupportedManager =\n  (function UnsupportedManagerClosure() {\n  var listeners = [];\n  return {\n    listen: function (cb) {\n      listeners.push(cb);\n    },\n    notify: function (featureId) {\n      warn('Unsupported feature \"' + featureId + '\"');\n      for (var i = 0, ii = listeners.length; i < ii; i++) {\n        listeners[i](featureId);\n      }\n    }\n  };\n})();\n\n// Combines two URLs. The baseUrl shall be absolute URL. If the url is an\n// absolute URL, it will be returned as is.\nexport function combineUrl(baseUrl, url) {\n  if (!url) {\n    return baseUrl;\n  }\n  if (/^[a-z][a-z0-9+\\-.]*:/i.test(url)) {\n    return url;\n  }\n  var i;\n  if (url.charAt(0) === '/') {\n    // absolute path\n    i = baseUrl.indexOf('://');\n    if (url.charAt(1) === '/') {\n      ++i;\n    } else {\n      i = baseUrl.indexOf('/', i + 3);\n    }\n    return baseUrl.substring(0, i) + url;\n  } else {\n    // relative path\n    var pathLength = baseUrl.length;\n    i = baseUrl.lastIndexOf('#');\n    pathLength = i >= 0 ? i : pathLength;\n    i = baseUrl.lastIndexOf('?', pathLength);\n    pathLength = i >= 0 ? i : pathLength;\n    var prefixLength = baseUrl.lastIndexOf('/', pathLength);\n    return baseUrl.substring(0, prefixLength + 1) + url;\n  }\n}\n\n// Validates if URL is safe and allowed, e.g. to avoid XSS.\nfunction isValidUrl(url, allowRelative) {\n  if (!url) {\n    return false;\n  }\n  // RFC 3986 (http://tools.ietf.org/html/rfc3986#section-3.1)\n  // scheme = ALPHA *( ALPHA / DIGIT / \"+\" / \"-\" / \".\" )\n  var protocol = /^[a-z][a-z0-9+\\-.]*(?=:)/i.exec(url);\n  if (!protocol) {\n    return allowRelative;\n  }\n  protocol = protocol[0].toLowerCase();\n  switch (protocol) {\n    case 'http':\n    case 'https':\n    case 'ftp':\n    case 'mailto':\n    case 'tel':\n      return true;\n    default:\n      return false;\n  }\n}\nPDFJS.isValidUrl = isValidUrl;\n\nfunction shadow(obj, prop, value) {\n  Object.defineProperty(obj, prop, { value: value,\n                                     enumerable: true,\n                                     configurable: true,\n                                     writable: false });\n  return value;\n}\nPDFJS.shadow = shadow;\n\nexport var PasswordResponses = PDFJS.PasswordResponses = {\n  NEED_PASSWORD: 1,\n  INCORRECT_PASSWORD: 2\n};\n\nvar PasswordException = (function PasswordExceptionClosure() {\n  function PasswordException(msg, code) {\n    this.name = 'PasswordException';\n    this.message = msg;\n    this.code = code;\n  }\n\n  PasswordException.prototype = new Error();\n  PasswordException.constructor = PasswordException;\n\n  return PasswordException;\n})();\nPDFJS.PasswordException = PasswordException;\n\nvar UnknownErrorException = (function UnknownErrorExceptionClosure() {\n  function UnknownErrorException(msg, details) {\n    this.name = 'UnknownErrorException';\n    this.message = msg;\n    this.details = details;\n  }\n\n  UnknownErrorException.prototype = new Error();\n  UnknownErrorException.constructor = UnknownErrorException;\n\n  return UnknownErrorException;\n})();\nPDFJS.UnknownErrorException = UnknownErrorException;\n\nvar InvalidPDFException = (function InvalidPDFExceptionClosure() {\n  function InvalidPDFException(msg) {\n    this.name = 'InvalidPDFException';\n    this.message = msg;\n  }\n\n  InvalidPDFException.prototype = new Error();\n  InvalidPDFException.constructor = InvalidPDFException;\n\n  return InvalidPDFException;\n})();\nPDFJS.InvalidPDFException = InvalidPDFException;\n\nvar MissingPDFException = (function MissingPDFExceptionClosure() {\n  function MissingPDFException(msg) {\n    this.name = 'MissingPDFException';\n    this.message = msg;\n  }\n\n  MissingPDFException.prototype = new Error();\n  MissingPDFException.constructor = MissingPDFException;\n\n  return MissingPDFException;\n})();\nPDFJS.MissingPDFException = MissingPDFException;\n\nvar UnexpectedResponseException =\n    (function UnexpectedResponseExceptionClosure() {\n  function UnexpectedResponseException(msg, status) {\n    this.name = 'UnexpectedResponseException';\n    this.message = msg;\n    this.status = status;\n  }\n\n  UnexpectedResponseException.prototype = new Error();\n  UnexpectedResponseException.constructor = UnexpectedResponseException;\n\n  return UnexpectedResponseException;\n})();\nPDFJS.UnexpectedResponseException = UnexpectedResponseException;\n\nvar NotImplementedException = (function NotImplementedExceptionClosure() {\n  function NotImplementedException(msg) {\n    this.message = msg;\n  }\n\n  NotImplementedException.prototype = new Error();\n  NotImplementedException.prototype.name = 'NotImplementedException';\n  NotImplementedException.constructor = NotImplementedException;\n\n  return NotImplementedException;\n})();\n\nvar MissingDataException = (function MissingDataExceptionClosure() {\n  function MissingDataException(begin, end) {\n    this.begin = begin;\n    this.end = end;\n    this.message = 'Missing data [' + begin + ', ' + end + ')';\n  }\n\n  MissingDataException.prototype = new Error();\n  MissingDataException.prototype.name = 'MissingDataException';\n  MissingDataException.constructor = MissingDataException;\n\n  return MissingDataException;\n})();\n\nvar XRefParseException = (function XRefParseExceptionClosure() {\n  function XRefParseException(msg) {\n    this.message = msg;\n  }\n\n  XRefParseException.prototype = new Error();\n  XRefParseException.prototype.name = 'XRefParseException';\n  XRefParseException.constructor = XRefParseException;\n\n  return XRefParseException;\n})();\n\n\nexport function bytesToString(bytes) {\n  assert(bytes !== null && typeof bytes === 'object' &&\n         bytes.length !== undefined, 'Invalid argument for bytesToString');\n  var length = bytes.length;\n  var MAX_ARGUMENT_COUNT = 8192;\n  if (length < MAX_ARGUMENT_COUNT) {\n    return String.fromCharCode.apply(null, bytes);\n  }\n  var strBuf = [];\n  for (var i = 0; i < length; i += MAX_ARGUMENT_COUNT) {\n    var chunkEnd = Math.min(i + MAX_ARGUMENT_COUNT, length);\n    var chunk = bytes.subarray(i, chunkEnd);\n    strBuf.push(String.fromCharCode.apply(null, chunk));\n  }\n  return strBuf.join('');\n}\n\nexport function stringToBytes(str) {\n  assert(typeof str === 'string', 'Invalid argument for stringToBytes');\n  var length = str.length;\n  var bytes = new Uint8Array(length);\n  for (var i = 0; i < length; ++i) {\n    bytes[i] = str.charCodeAt(i) & 0xFF;\n  }\n  return bytes;\n}\n\nexport function string32(value) {\n  return String.fromCharCode((value >> 24) & 0xff, (value >> 16) & 0xff,\n                             (value >> 8) & 0xff, value & 0xff);\n}\n\nexport function log2(x) {\n  var n = 1, i = 0;\n  while (x > n) {\n    n <<= 1;\n    i++;\n  }\n  return i;\n}\n\nexport function readInt8(data, start) {\n  return (data[start] << 24) >> 24;\n}\n\nexport function readUint16(data, offset) {\n  return (data[offset] << 8) | data[offset + 1];\n}\n\nexport function readUint32(data, offset) {\n  return ((data[offset] << 24) | (data[offset + 1] << 16) |\n         (data[offset + 2] << 8) | data[offset + 3]) >>> 0;\n}\n\n// Lazy test the endianness of the platform\n// NOTE: This will be 'true' for simulated TypedArrays\nexport function isLittleEndian() {\n  var buffer8 = new Uint8Array(2);\n  buffer8[0] = 1;\n  var buffer16 = new Uint16Array(buffer8.buffer);\n  return (buffer16[0] === 1);\n}\n\nObject.defineProperty(PDFJS, 'isLittleEndian', {\n  configurable: true,\n  get: function PDFJS_isLittleEndian() {\n    return shadow(PDFJS, 'isLittleEndian', isLittleEndian());\n  }\n});\n\n//#if !(FIREFOX || MOZCENTRAL || B2G || CHROME)\n//// Lazy test if the userAgant support CanvasTypedArrays\nexport function hasCanvasTypedArrays() {\n  var canvas = document.createElement('canvas');\n  canvas.width = canvas.height = 1;\n  var ctx = canvas.getContext('2d');\n  var imageData = ctx.createImageData(1, 1);\n  return (typeof imageData.data.buffer !== 'undefined');\n}\n\nObject.defineProperty(PDFJS, 'hasCanvasTypedArrays', {\n  configurable: true,\n  get: function PDFJS_hasCanvasTypedArrays() {\n    return shadow(PDFJS, 'hasCanvasTypedArrays', hasCanvasTypedArrays());\n  }\n});\n\nexport var Uint32ArrayView = (function Uint32ArrayViewClosure() {\n\n  function Uint32ArrayView(buffer, length) {\n    this.buffer = buffer;\n    this.byteLength = buffer.length;\n    this.length = length === undefined ? (this.byteLength >> 2) : length;\n    ensureUint32ArrayViewProps(this.length);\n  }\n  Uint32ArrayView.prototype = Object.create(null);\n\n  var uint32ArrayViewSetters = 0;\n  function createUint32ArrayProp(index) {\n    return {\n      get: function () {\n        var buffer = this.buffer, offset = index << 2;\n        return (buffer[offset] | (buffer[offset + 1] << 8) |\n          (buffer[offset + 2] << 16) | (buffer[offset + 3] << 24)) >>> 0;\n      },\n      set: function (value) {\n        var buffer = this.buffer, offset = index << 2;\n        buffer[offset] = value & 255;\n        buffer[offset + 1] = (value >> 8) & 255;\n        buffer[offset + 2] = (value >> 16) & 255;\n        buffer[offset + 3] = (value >>> 24) & 255;\n      }\n    };\n  }\n\n  function ensureUint32ArrayViewProps(length) {\n    while (uint32ArrayViewSetters < length) {\n      Object.defineProperty(Uint32ArrayView.prototype,\n        uint32ArrayViewSetters,\n        createUint32ArrayProp(uint32ArrayViewSetters));\n      uint32ArrayViewSetters++;\n    }\n  }\n\n  return Uint32ArrayView;\n})();\n//#else\n//PDFJS.hasCanvasTypedArrays = true;\n//#endif\n\nexport var IDENTITY_MATRIX = [1, 0, 0, 1, 0, 0];\n\nexport var Util = PDFJS.Util = (function UtilClosure() {\n  function Util() {}\n\n  var rgbBuf = ['rgb(', 0, ',', 0, ',', 0, ')'];\n\n  // makeCssRgb() can be called thousands of times. Using |rgbBuf| avoids\n  // creating many intermediate strings.\n  Util.makeCssRgb = function Util_makeCssRgb(r, g, b) {\n    rgbBuf[1] = r;\n    rgbBuf[3] = g;\n    rgbBuf[5] = b;\n    return rgbBuf.join('');\n  };\n\n  // Concatenates two transformation matrices together and returns the result.\n  Util.transform = function Util_transform(m1, m2) {\n    return [\n      m1[0] * m2[0] + m1[2] * m2[1],\n      m1[1] * m2[0] + m1[3] * m2[1],\n      m1[0] * m2[2] + m1[2] * m2[3],\n      m1[1] * m2[2] + m1[3] * m2[3],\n      m1[0] * m2[4] + m1[2] * m2[5] + m1[4],\n      m1[1] * m2[4] + m1[3] * m2[5] + m1[5]\n    ];\n  };\n\n  // For 2d affine transforms\n  Util.applyTransform = function Util_applyTransform(p, m) {\n    var xt = p[0] * m[0] + p[1] * m[2] + m[4];\n    var yt = p[0] * m[1] + p[1] * m[3] + m[5];\n    return [xt, yt];\n  };\n\n  Util.applyInverseTransform = function Util_applyInverseTransform(p, m) {\n    var d = m[0] * m[3] - m[1] * m[2];\n    var xt = (p[0] * m[3] - p[1] * m[2] + m[2] * m[5] - m[4] * m[3]) / d;\n    var yt = (-p[0] * m[1] + p[1] * m[0] + m[4] * m[1] - m[5] * m[0]) / d;\n    return [xt, yt];\n  };\n\n  // Applies the transform to the rectangle and finds the minimum axially\n  // aligned bounding box.\n  Util.getAxialAlignedBoundingBox =\n    function Util_getAxialAlignedBoundingBox(r, m) {\n\n    var p1 = Util.applyTransform(r, m);\n    var p2 = Util.applyTransform(r.slice(2, 4), m);\n    var p3 = Util.applyTransform([r[0], r[3]], m);\n    var p4 = Util.applyTransform([r[2], r[1]], m);\n    return [\n      Math.min(p1[0], p2[0], p3[0], p4[0]),\n      Math.min(p1[1], p2[1], p3[1], p4[1]),\n      Math.max(p1[0], p2[0], p3[0], p4[0]),\n      Math.max(p1[1], p2[1], p3[1], p4[1])\n    ];\n  };\n\n  Util.inverseTransform = function Util_inverseTransform(m) {\n    var d = m[0] * m[3] - m[1] * m[2];\n    return [m[3] / d, -m[1] / d, -m[2] / d, m[0] / d,\n      (m[2] * m[5] - m[4] * m[3]) / d, (m[4] * m[1] - m[5] * m[0]) / d];\n  };\n\n  // Apply a generic 3d matrix M on a 3-vector v:\n  //   | a b c |   | X |\n  //   | d e f | x | Y |\n  //   | g h i |   | Z |\n  // M is assumed to be serialized as [a,b,c,d,e,f,g,h,i],\n  // with v as [X,Y,Z]\n  Util.apply3dTransform = function Util_apply3dTransform(m, v) {\n    return [\n      m[0] * v[0] + m[1] * v[1] + m[2] * v[2],\n      m[3] * v[0] + m[4] * v[1] + m[5] * v[2],\n      m[6] * v[0] + m[7] * v[1] + m[8] * v[2]\n    ];\n  };\n\n  // This calculation uses Singular Value Decomposition.\n  // The SVD can be represented with formula A = USV. We are interested in the\n  // matrix S here because it represents the scale values.\n  Util.singularValueDecompose2dScale =\n    function Util_singularValueDecompose2dScale(m) {\n\n    var transpose = [m[0], m[2], m[1], m[3]];\n\n    // Multiply matrix m with its transpose.\n    var a = m[0] * transpose[0] + m[1] * transpose[2];\n    var b = m[0] * transpose[1] + m[1] * transpose[3];\n    var c = m[2] * transpose[0] + m[3] * transpose[2];\n    var d = m[2] * transpose[1] + m[3] * transpose[3];\n\n    // Solve the second degree polynomial to get roots.\n    var first = (a + d) / 2;\n    var second = Math.sqrt((a + d) * (a + d) - 4 * (a * d - c * b)) / 2;\n    var sx = first + second || 1;\n    var sy = first - second || 1;\n\n    // Scale values are the square roots of the eigenvalues.\n    return [Math.sqrt(sx), Math.sqrt(sy)];\n  };\n\n  // Normalize rectangle rect=[x1, y1, x2, y2] so that (x1,y1) < (x2,y2)\n  // For coordinate systems whose origin lies in the bottom-left, this\n  // means normalization to (BL,TR) ordering. For systems with origin in the\n  // top-left, this means (TL,BR) ordering.\n  Util.normalizeRect = function Util_normalizeRect(rect) {\n    var r = rect.slice(0); // clone rect\n    if (rect[0] > rect[2]) {\n      r[0] = rect[2];\n      r[2] = rect[0];\n    }\n    if (rect[1] > rect[3]) {\n      r[1] = rect[3];\n      r[3] = rect[1];\n    }\n    return r;\n  };\n\n  // Returns a rectangle [x1, y1, x2, y2] corresponding to the\n  // intersection of rect1 and rect2. If no intersection, returns 'false'\n  // The rectangle coordinates of rect1, rect2 should be [x1, y1, x2, y2]\n  Util.intersect = function Util_intersect(rect1, rect2) {\n    function compare(a, b) {\n      return a - b;\n    }\n\n    // Order points along the axes\n    var orderedX = [rect1[0], rect1[2], rect2[0], rect2[2]].sort(compare),\n        orderedY = [rect1[1], rect1[3], rect2[1], rect2[3]].sort(compare),\n        result = [];\n\n    rect1 = Util.normalizeRect(rect1);\n    rect2 = Util.normalizeRect(rect2);\n\n    // X: first and second points belong to different rectangles?\n    if ((orderedX[0] === rect1[0] && orderedX[1] === rect2[0]) ||\n        (orderedX[0] === rect2[0] && orderedX[1] === rect1[0])) {\n      // Intersection must be between second and third points\n      result[0] = orderedX[1];\n      result[2] = orderedX[2];\n    } else {\n      return false;\n    }\n\n    // Y: first and second points belong to different rectangles?\n    if ((orderedY[0] === rect1[1] && orderedY[1] === rect2[1]) ||\n        (orderedY[0] === rect2[1] && orderedY[1] === rect1[1])) {\n      // Intersection must be between second and third points\n      result[1] = orderedY[1];\n      result[3] = orderedY[2];\n    } else {\n      return false;\n    }\n\n    return result;\n  };\n\n  Util.sign = function Util_sign(num) {\n    return num < 0 ? -1 : 1;\n  };\n\n  Util.appendToArray = function Util_appendToArray(arr1, arr2) {\n    Array.prototype.push.apply(arr1, arr2);\n  };\n\n  Util.prependToArray = function Util_prependToArray(arr1, arr2) {\n    Array.prototype.unshift.apply(arr1, arr2);\n  };\n\n  Util.extendObj = function extendObj(obj1, obj2) {\n    for (var key in obj2) {\n      obj1[key] = obj2[key];\n    }\n  };\n\n  Util.getInheritableProperty = function Util_getInheritableProperty(dict,\n                                                                     name) {\n    while (dict && !dict.has(name)) {\n      dict = dict.get('Parent');\n    }\n    if (!dict) {\n      return null;\n    }\n    return dict.get(name);\n  };\n\n  Util.inherit = function Util_inherit(sub, base, prototype) {\n    sub.prototype = Object.create(base.prototype);\n    sub.prototype.constructor = sub;\n    for (var prop in prototype) {\n      sub.prototype[prop] = prototype[prop];\n    }\n  };\n\n  Util.loadScript = function Util_loadScript(src, callback) {\n    var script = document.createElement('script');\n    var loaded = false;\n    script.setAttribute('src', src);\n    if (callback) {\n      script.onload = function() {\n        if (!loaded) {\n          callback();\n        }\n        loaded = true;\n      };\n    }\n    document.getElementsByTagName('head')[0].appendChild(script);\n  };\n\n  return Util;\n})();\n\n/**\n * PDF page viewport created based on scale, rotation and offset.\n * @class\n * @alias PDFJS.PageViewport\n */\nexport var PageViewport = PDFJS.PageViewport = (function PageViewportClosure() {\n  /**\n   * @constructor\n   * @private\n   * @param viewBox {Array} xMin, yMin, xMax and yMax coordinates.\n   * @param scale {number} scale of the viewport.\n   * @param rotation {number} rotations of the viewport in degrees.\n   * @param offsetX {number} offset X\n   * @param offsetY {number} offset Y\n   * @param dontFlip {boolean} if true, axis Y will not be flipped.\n   */\n  function PageViewport(viewBox, scale, rotation, offsetX, offsetY, dontFlip) {\n    this.viewBox = viewBox;\n    this.scale = scale;\n    this.rotation = rotation;\n    this.offsetX = offsetX;\n    this.offsetY = offsetY;\n\n    // creating transform to convert pdf coordinate system to the normal\n    // canvas like coordinates taking in account scale and rotation\n    var centerX = (viewBox[2] + viewBox[0]) / 2;\n    var centerY = (viewBox[3] + viewBox[1]) / 2;\n    var rotateA, rotateB, rotateC, rotateD;\n    rotation = rotation % 360;\n    rotation = rotation < 0 ? rotation + 360 : rotation;\n    switch (rotation) {\n      case 180:\n        rotateA = -1; rotateB = 0; rotateC = 0; rotateD = 1;\n        break;\n      case 90:\n        rotateA = 0; rotateB = 1; rotateC = 1; rotateD = 0;\n        break;\n      case 270:\n        rotateA = 0; rotateB = -1; rotateC = -1; rotateD = 0;\n        break;\n      //case 0:\n      default:\n        rotateA = 1; rotateB = 0; rotateC = 0; rotateD = -1;\n        break;\n    }\n\n    if (dontFlip) {\n      rotateC = -rotateC; rotateD = -rotateD;\n    }\n\n    var offsetCanvasX, offsetCanvasY;\n    var width, height;\n    if (rotateA === 0) {\n      offsetCanvasX = Math.abs(centerY - viewBox[1]) * scale + offsetX;\n      offsetCanvasY = Math.abs(centerX - viewBox[0]) * scale + offsetY;\n      width = Math.abs(viewBox[3] - viewBox[1]) * scale;\n      height = Math.abs(viewBox[2] - viewBox[0]) * scale;\n    } else {\n      offsetCanvasX = Math.abs(centerX - viewBox[0]) * scale + offsetX;\n      offsetCanvasY = Math.abs(centerY - viewBox[1]) * scale + offsetY;\n      width = Math.abs(viewBox[2] - viewBox[0]) * scale;\n      height = Math.abs(viewBox[3] - viewBox[1]) * scale;\n    }\n    // creating transform for the following operations:\n    // translate(-centerX, -centerY), rotate and flip vertically,\n    // scale, and translate(offsetCanvasX, offsetCanvasY)\n    this.transform = [\n      rotateA * scale,\n      rotateB * scale,\n      rotateC * scale,\n      rotateD * scale,\n      offsetCanvasX - rotateA * scale * centerX - rotateC * scale * centerY,\n      offsetCanvasY - rotateB * scale * centerX - rotateD * scale * centerY\n    ];\n\n    this.width = width;\n    this.height = height;\n    this.fontScale = scale;\n  }\n  PageViewport.prototype = /** @lends PDFJS.PageViewport.prototype */ {\n    /**\n     * Clones viewport with additional properties.\n     * @param args {Object} (optional) If specified, may contain the 'scale' or\n     * 'rotation' properties to override the corresponding properties in\n     * the cloned viewport.\n     * @returns {PDFJS.PageViewport} Cloned viewport.\n     */\n    clone: function PageViewPort_clone(args) {\n      args = args || {};\n      var scale = 'scale' in args ? args.scale : this.scale;\n      var rotation = 'rotation' in args ? args.rotation : this.rotation;\n      return new PageViewport(this.viewBox.slice(), scale, rotation,\n                              this.offsetX, this.offsetY, args.dontFlip);\n    },\n    /**\n     * Converts PDF point to the viewport coordinates. For examples, useful for\n     * converting PDF location into canvas pixel coordinates.\n     * @param x {number} X coordinate.\n     * @param y {number} Y coordinate.\n     * @returns {Object} Object that contains 'x' and 'y' properties of the\n     * point in the viewport coordinate space.\n     * @see {@link convertToPdfPoint}\n     * @see {@link convertToViewportRectangle}\n     */\n    convertToViewportPoint: function PageViewport_convertToViewportPoint(x, y) {\n      return Util.applyTransform([x, y], this.transform);\n    },\n    /**\n     * Converts PDF rectangle to the viewport coordinates.\n     * @param rect {Array} xMin, yMin, xMax and yMax coordinates.\n     * @returns {Array} Contains corresponding coordinates of the rectangle\n     * in the viewport coordinate space.\n     * @see {@link convertToViewportPoint}\n     */\n    convertToViewportRectangle:\n      function PageViewport_convertToViewportRectangle(rect) {\n      var tl = Util.applyTransform([rect[0], rect[1]], this.transform);\n      var br = Util.applyTransform([rect[2], rect[3]], this.transform);\n      return [tl[0], tl[1], br[0], br[1]];\n    },\n    /**\n     * Converts viewport coordinates to the PDF location. For examples, useful\n     * for converting canvas pixel location into PDF one.\n     * @param x {number} X coordinate.\n     * @param y {number} Y coordinate.\n     * @returns {Object} Object that contains 'x' and 'y' properties of the\n     * point in the PDF coordinate space.\n     * @see {@link convertToViewportPoint}\n     */\n    convertToPdfPoint: function PageViewport_convertToPdfPoint(x, y) {\n      return Util.applyInverseTransform([x, y], this.transform);\n    }\n  };\n  return PageViewport;\n})();\n\nexport var PDFStringTranslateTable = [\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\n  0x2D8, 0x2C7, 0x2C6, 0x2D9, 0x2DD, 0x2DB, 0x2DA, 0x2DC, 0, 0, 0, 0, 0, 0, 0,\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0x2022, 0x2020, 0x2021, 0x2026, 0x2014,\n  0x2013, 0x192, 0x2044, 0x2039, 0x203A, 0x2212, 0x2030, 0x201E, 0x201C,\n  0x201D, 0x2018, 0x2019, 0x201A, 0x2122, 0xFB01, 0xFB02, 0x141, 0x152, 0x160,\n  0x178, 0x17D, 0x131, 0x142, 0x153, 0x161, 0x17E, 0, 0x20AC\n];\n\nexport function stringToPDFString(str) {\n  var i, n = str.length, strBuf = [];\n  if (str[0] === '\\xFE' && str[1] === '\\xFF') {\n    // UTF16BE BOM\n    for (i = 2; i < n; i += 2) {\n      strBuf.push(String.fromCharCode(\n        (str.charCodeAt(i) << 8) | str.charCodeAt(i + 1)));\n    }\n  } else {\n    for (i = 0; i < n; ++i) {\n      var code = PDFStringTranslateTable[str.charCodeAt(i)];\n      strBuf.push(code ? String.fromCharCode(code) : str.charAt(i));\n    }\n  }\n  return strBuf.join('');\n}\n\nexport function stringToUTF8String(str) {\n  return decodeURIComponent(escape(str));\n}\n\nexport function isEmptyObj(obj) {\n  for (var key in obj) {\n    return false;\n  }\n  return true;\n}\n\nexport function isBool(v) {\n  return typeof v === 'boolean';\n}\n\nexport function isInt(v) {\n  return typeof v === 'number' && ((v | 0) === v);\n}\n\nexport function isNum(v) {\n  return typeof v === 'number';\n}\n\nexport function isString(v) {\n  return typeof v === 'string';\n}\n\nexport function isName(v) {\n  return v instanceof Name;\n}\n\nexport function isCmd(v, cmd) {\n  return v instanceof Cmd && (cmd === undefined || v.cmd === cmd);\n}\n\nexport function isDict(v, type) {\n  if (!(v instanceof Dict)) {\n    return false;\n  }\n  if (!type) {\n    return true;\n  }\n  var dictType = v.get('Type');\n  return isName(dictType) && dictType.name === type;\n}\n\nexport function isArray(v) {\n  return v instanceof Array;\n}\n\nexport function isStream(v) {\n  return typeof v === 'object' && v !== null && v.getBytes !== undefined;\n}\n\nexport function isArrayBuffer(v) {\n  return typeof v === 'object' && v !== null && v.byteLength !== undefined;\n}\n\nexport function isRef(v) {\n  return v instanceof Ref;\n}\n\n/**\n * Promise Capability object.\n *\n * @typedef {Object} PromiseCapability\n * @property {Promise} promise - A promise object.\n * @property {function} resolve - Fullfills the promise.\n * @property {function} reject - Rejects the promise.\n */\n\n/**\n * Creates a promise capability object.\n * @alias PDFJS.createPromiseCapability\n *\n * @return {PromiseCapability} A capability object contains:\n * - a Promise, resolve and reject methods.\n */\nfunction createPromiseCapability() {\n  var capability = {};\n  capability.promise = new Promise(function (resolve, reject) {\n    capability.resolve = resolve;\n    capability.reject = reject;\n  });\n  return capability;\n}\n\nPDFJS.createPromiseCapability = createPromiseCapability;\n\nexport var StatTimer = (function StatTimerClosure() {\n  function rpad(str, pad, length) {\n    while (str.length < length) {\n      str += pad;\n    }\n    return str;\n  }\n  function StatTimer() {\n    this.started = {};\n    this.times = [];\n    this.enabled = true;\n  }\n  StatTimer.prototype = {\n    time: function StatTimer_time(name) {\n      if (!this.enabled) {\n        return;\n      }\n      if (name in this.started) {\n        warn('Timer is already running for ' + name);\n      }\n      this.started[name] = Date.now();\n    },\n    timeEnd: function StatTimer_timeEnd(name) {\n      if (!this.enabled) {\n        return;\n      }\n      if (!(name in this.started)) {\n        warn('Timer has not been started for ' + name);\n      }\n      this.times.push({\n        'name': name,\n        'start': this.started[name],\n        'end': Date.now()\n      });\n      // Remove timer from started so it can be called again.\n      delete this.started[name];\n    },\n    toString: function StatTimer_toString() {\n      var i, ii;\n      var times = this.times;\n      var out = '';\n      // Find the longest name for padding purposes.\n      var longest = 0;\n      for (i = 0, ii = times.length; i < ii; ++i) {\n        var name = times[i]['name'];\n        if (name.length > longest) {\n          longest = name.length;\n        }\n      }\n      for (i = 0, ii = times.length; i < ii; ++i) {\n        var span = times[i];\n        var duration = span.end - span.start;\n        out += rpad(span['name'], ' ', longest) + ' ' + duration + 'ms\\n';\n      }\n      return out;\n    }\n  };\n  return StatTimer;\n})();\n\nPDFJS.createBlob = function createBlob(data, contentType) {\n  if (typeof Blob !== 'undefined') {\n    return new Blob([data], { type: contentType });\n  }\n  // Blob builder is deprecated in FF14 and removed in FF18.\n  var bb = new MozBlobBuilder();\n  bb.append(data);\n  return bb.getBlob(contentType);\n};\n\nPDFJS.createObjectURL = (function createObjectURLClosure() {\n  // Blob/createObjectURL is not available, falling back to data schema.\n  var digits =\n    'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n\n  return function createObjectURL(data, contentType) {\n    if (!PDFJS.disableCreateObjectURL &&\n        typeof URL !== 'undefined' && URL.createObjectURL) {\n      var blob = PDFJS.createBlob(data, contentType);\n      return URL.createObjectURL(blob);\n    }\n\n    var buffer = 'data:' + contentType + ';base64,';\n    for (var i = 0, ii = data.length; i < ii; i += 3) {\n      var b1 = data[i] & 0xFF;\n      var b2 = data[i + 1] & 0xFF;\n      var b3 = data[i + 2] & 0xFF;\n      var d1 = b1 >> 2, d2 = ((b1 & 3) << 4) | (b2 >> 4);\n      var d3 = i + 1 < ii ? ((b2 & 0xF) << 2) | (b3 >> 6) : 64;\n      var d4 = i + 2 < ii ? (b3 & 0x3F) : 64;\n      buffer += digits[d1] + digits[d2] + digits[d3] + digits[d4];\n    }\n    return buffer;\n  };\n})();\n\nexport function MessageHandler(name, comObj) {\n  this.name = name;\n  this.comObj = comObj;\n  this.callbackIndex = 1;\n  this.postMessageTransfers = true;\n  var callbacksCapabilities = this.callbacksCapabilities = {};\n  var ah = this.actionHandler = {};\n\n  ah['console_log'] = [function ahConsoleLog(data) {\n    console.log.apply(console, data);\n  }];\n  ah['console_error'] = [function ahConsoleError(data) {\n    console.error.apply(console, data);\n  }];\n  ah['_unsupported_feature'] = [function ah_unsupportedFeature(data) {\n    UnsupportedManager.notify(data);\n  }];\n\n  comObj.onmessage = function messageHandlerComObjOnMessage(event) {\n    var data = event.data;\n    if (data.isReply) {\n      var callbackId = data.callbackId;\n      if (data.callbackId in callbacksCapabilities) {\n        var callback = callbacksCapabilities[callbackId];\n        delete callbacksCapabilities[callbackId];\n        if ('error' in data) {\n          callback.reject(data.error);\n        } else {\n          callback.resolve(data.data);\n        }\n      } else {\n        error('Cannot resolve callback ' + callbackId);\n      }\n    } else if (data.action in ah) {\n      var action = ah[data.action];\n      if (data.callbackId) {\n        Promise.resolve().then(function () {\n          return action[0].call(action[1], data.data);\n        }).then(function (result) {\n          comObj.postMessage({\n            isReply: true,\n            callbackId: data.callbackId,\n            data: result\n          });\n        }, function (reason) {\n          comObj.postMessage({\n            isReply: true,\n            callbackId: data.callbackId,\n            error: reason\n          });\n        });\n      } else {\n        action[0].call(action[1], data.data);\n      }\n    } else {\n      error('Unknown action from worker: ' + data.action);\n    }\n  };\n}\n\nMessageHandler.prototype = {\n  on: function messageHandlerOn(actionName, handler, scope) {\n    var ah = this.actionHandler;\n    if (ah[actionName]) {\n      error('There is already an actionName called \"' + actionName + '\"');\n    }\n    ah[actionName] = [handler, scope];\n  },\n  /**\n   * Sends a message to the comObj to invoke the action with the supplied data.\n   * @param {String} actionName Action to call.\n   * @param {JSON} data JSON data to send.\n   * @param {Array} [transfers] Optional list of transfers/ArrayBuffers\n   */\n  send: function messageHandlerSend(actionName, data, transfers) {\n    var message = {\n      action: actionName,\n      data: data\n    };\n    this.postMessage(message, transfers);\n  },\n  /**\n   * Sends a message to the comObj to invoke the action with the supplied data.\n   * Expects that other side will callback with the response.\n   * @param {String} actionName Action to call.\n   * @param {JSON} data JSON data to send.\n   * @param {Array} [transfers] Optional list of transfers/ArrayBuffers.\n   * @returns {Promise} Promise to be resolved with response data.\n   */\n  sendWithPromise:\n    function messageHandlerSendWithPromise(actionName, data, transfers) {\n    var callbackId = this.callbackIndex++;\n    var message = {\n      action: actionName,\n      data: data,\n      callbackId: callbackId\n    };\n    var capability = createPromiseCapability();\n    this.callbacksCapabilities[callbackId] = capability;\n    try {\n      this.postMessage(message, transfers);\n    } catch (e) {\n      capability.reject(e);\n    }\n    return capability.promise;\n  },\n  /**\n   * Sends raw message to the comObj.\n   * @private\n   * @param message {Object} Raw message.\n   * @param transfers List of transfers/ArrayBuffers, or undefined.\n   */\n  postMessage: function (message, transfers) {\n    if (transfers && this.postMessageTransfers) {\n      this.comObj.postMessage(message, transfers);\n    } else {\n      this.comObj.postMessage(message);\n    }\n  }\n};\n\nexport function loadJpegStream(id, imageUrl, objs) {\n  var img = new Image();\n  img.onload = (function loadJpegStream_onloadClosure() {\n    objs.resolve(id, img);\n  });\n  img.onerror = (function loadJpegStream_onerrorClosure() {\n    objs.resolve(id, null);\n    warn('Error during JPEG image loading');\n  });\n  img.src = imageUrl;\n}","/* eslint-disable */\n\n/**\n * Modified for dwv:\n * - export root var,\n * - remove old style import/export and\n *   related (for ex 'use strict').\n */\n\n/* -*- Mode: Java; tab-width: 2; indent-tabs-mode: nil; c-basic-offset: 2 -*- */\n/* vim: set shiftwidth=2 tabstop=2 autoindent cindent expandtab: */\n/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {ArithmeticDecoder} from './arithmetic_decoder.js';\nimport {log2, readUint16, readUint32, info, warn} from './util.js';\n\nexport var JpxImage = (function JpxImageClosure() {\n  // Table E.1\n  var SubbandsGainLog2 = {\n    'LL': 0,\n    'LH': 1,\n    'HL': 1,\n    'HH': 2\n  };\n  function JpxImage() {\n    this.failOnCorruptedImage = true;\n  }\n  JpxImage.prototype = {\n    parse: function JpxImage_parse(data) {\n\n      var head = readUint16(data, 0);\n      // No box header, immediate start of codestream (SOC)\n      if (head === 0xFF4F) {\n        this.parseCodestream(data, 0, data.length);\n        return;\n      }\n\n      var position = 0, length = data.length;\n      while (position < length) {\n        var headerSize = 8;\n        var lbox = readUint32(data, position);\n        var tbox = readUint32(data, position + 4);\n        position += headerSize;\n        if (lbox === 1) {\n          // XLBox: read UInt64 according to spec.\n          // JavaScript's int precision of 53 bit should be sufficient here.\n          lbox = readUint32(data, position) * 4294967296 +\n                 readUint32(data, position + 4);\n          position += 8;\n          headerSize += 8;\n        }\n        if (lbox === 0) {\n          lbox = length - position + headerSize;\n        }\n        if (lbox < headerSize) {\n          throw new Error('JPX Error: Invalid box field size');\n        }\n        var dataLength = lbox - headerSize;\n        var jumpDataLength = true;\n        switch (tbox) {\n          case 0x6A703268: // 'jp2h'\n            jumpDataLength = false; // parsing child boxes\n            break;\n          case 0x636F6C72: // 'colr'\n            // Colorspaces are not used, the CS from the PDF is used.\n            var method = data[position];\n            var precedence = data[position + 1];\n            var approximation = data[position + 2];\n            if (method === 1) {\n              // enumerated colorspace\n              var colorspace = readUint32(data, position + 3);\n              switch (colorspace) {\n                case 16: // this indicates a sRGB colorspace\n                case 17: // this indicates a grayscale colorspace\n                case 18: // this indicates a YUV colorspace\n                  break;\n                default:\n                  warn('Unknown colorspace ' + colorspace);\n                  break;\n              }\n            } else if (method === 2) {\n              info('ICC profile not supported');\n            }\n            break;\n          case 0x6A703263: // 'jp2c'\n            this.parseCodestream(data, position, position + dataLength);\n            break;\n          case 0x6A502020: // 'jP\\024\\024'\n            if (0x0d0a870a !== readUint32(data, position)) {\n              warn('Invalid JP2 signature');\n            }\n            break;\n          // The following header types are valid but currently not used:\n          case 0x6A501A1A: // 'jP\\032\\032'\n          case 0x66747970: // 'ftyp'\n          case 0x72726571: // 'rreq'\n          case 0x72657320: // 'res '\n          case 0x69686472: // 'ihdr'\n            break;\n          default:\n            var headerType = String.fromCharCode((tbox >> 24) & 0xFF,\n                                                 (tbox >> 16) & 0xFF,\n                                                 (tbox >> 8) & 0xFF,\n                                                 tbox & 0xFF);\n            warn('Unsupported header type ' + tbox + ' (' + headerType + ')');\n            break;\n        }\n        if (jumpDataLength) {\n          position += dataLength;\n        }\n      }\n    },\n    parseImageProperties: function JpxImage_parseImageProperties(stream) {\n      var newByte = stream.getByte();\n      while (newByte >= 0) {\n        var oldByte = newByte;\n        newByte = stream.getByte();\n        var code = (oldByte << 8) | newByte;\n        // Image and tile size (SIZ)\n        if (code === 0xFF51) {\n          stream.skip(4);\n          var Xsiz = stream.getInt32() >>> 0; // Byte 4\n          var Ysiz = stream.getInt32() >>> 0; // Byte 8\n          var XOsiz = stream.getInt32() >>> 0; // Byte 12\n          var YOsiz = stream.getInt32() >>> 0; // Byte 16\n          stream.skip(16);\n          var Csiz = stream.getUint16(); // Byte 36\n          this.width = Xsiz - XOsiz;\n          this.height = Ysiz - YOsiz;\n          this.componentsCount = Csiz;\n          // Results are always returned as Uint8Arrays\n          this.bitsPerComponent = 8;\n          return;\n        }\n      }\n      throw new Error('JPX Error: No size marker found in JPX stream');\n    },\n    parseCodestream: function JpxImage_parseCodestream(data, start, end) {\n      var context = {};\n      try {\n        var doNotRecover = false;\n        var position = start;\n        while (position + 1 < end) {\n          var code = readUint16(data, position);\n          position += 2;\n\n          var length = 0, j, sqcd, spqcds, spqcdSize, scalarExpounded, tile;\n          switch (code) {\n            case 0xFF4F: // Start of codestream (SOC)\n              context.mainHeader = true;\n              break;\n            case 0xFFD9: // End of codestream (EOC)\n              break;\n            case 0xFF51: // Image and tile size (SIZ)\n              length = readUint16(data, position);\n              var siz = {};\n              siz.Xsiz = readUint32(data, position + 4);\n              siz.Ysiz = readUint32(data, position + 8);\n              siz.XOsiz = readUint32(data, position + 12);\n              siz.YOsiz = readUint32(data, position + 16);\n              siz.XTsiz = readUint32(data, position + 20);\n              siz.YTsiz = readUint32(data, position + 24);\n              siz.XTOsiz = readUint32(data, position + 28);\n              siz.YTOsiz = readUint32(data, position + 32);\n              var componentsCount = readUint16(data, position + 36);\n              siz.Csiz = componentsCount;\n              var components = [];\n              j = position + 38;\n              for (var i = 0; i < componentsCount; i++) {\n                var component = {\n                  precision: (data[j] & 0x7F) + 1,\n                  isSigned: !!(data[j] & 0x80),\n                  XRsiz: data[j + 1],\n                  YRsiz: data[j + 1]\n                };\n                calculateComponentDimensions(component, siz);\n                components.push(component);\n              }\n              context.SIZ = siz;\n              context.components = components;\n              calculateTileGrids(context, components);\n              context.QCC = [];\n              context.COC = [];\n              break;\n            case 0xFF5C: // Quantization default (QCD)\n              length = readUint16(data, position);\n              var qcd = {};\n              j = position + 2;\n              sqcd = data[j++];\n              switch (sqcd & 0x1F) {\n                case 0:\n                  spqcdSize = 8;\n                  scalarExpounded = true;\n                  break;\n                case 1:\n                  spqcdSize = 16;\n                  scalarExpounded = false;\n                  break;\n                case 2:\n                  spqcdSize = 16;\n                  scalarExpounded = true;\n                  break;\n                default:\n                  throw new Error('JPX Error: Invalid SQcd value ' + sqcd);\n              }\n              qcd.noQuantization = (spqcdSize === 8);\n              qcd.scalarExpounded = scalarExpounded;\n              qcd.guardBits = sqcd >> 5;\n              spqcds = [];\n              while (j < length + position) {\n                var spqcd = {};\n                if (spqcdSize === 8) {\n                  spqcd.epsilon = data[j++] >> 3;\n                  spqcd.mu = 0;\n                } else {\n                  spqcd.epsilon = data[j] >> 3;\n                  spqcd.mu = ((data[j] & 0x7) << 8) | data[j + 1];\n                  j += 2;\n                }\n                spqcds.push(spqcd);\n              }\n              qcd.SPqcds = spqcds;\n              if (context.mainHeader) {\n                context.QCD = qcd;\n              } else {\n                context.currentTile.QCD = qcd;\n                context.currentTile.QCC = [];\n              }\n              break;\n            case 0xFF5D: // Quantization component (QCC)\n              length = readUint16(data, position);\n              var qcc = {};\n              j = position + 2;\n              var cqcc;\n              if (context.SIZ.Csiz < 257) {\n                cqcc = data[j++];\n              } else {\n                cqcc = readUint16(data, j);\n                j += 2;\n              }\n              sqcd = data[j++];\n              switch (sqcd & 0x1F) {\n                case 0:\n                  spqcdSize = 8;\n                  scalarExpounded = true;\n                  break;\n                case 1:\n                  spqcdSize = 16;\n                  scalarExpounded = false;\n                  break;\n                case 2:\n                  spqcdSize = 16;\n                  scalarExpounded = true;\n                  break;\n                default:\n                  throw new Error('JPX Error: Invalid SQcd value ' + sqcd);\n              }\n              qcc.noQuantization = (spqcdSize === 8);\n              qcc.scalarExpounded = scalarExpounded;\n              qcc.guardBits = sqcd >> 5;\n              spqcds = [];\n              while (j < (length + position)) {\n                spqcd = {};\n                if (spqcdSize === 8) {\n                  spqcd.epsilon = data[j++] >> 3;\n                  spqcd.mu = 0;\n                } else {\n                  spqcd.epsilon = data[j] >> 3;\n                  spqcd.mu = ((data[j] & 0x7) << 8) | data[j + 1];\n                  j += 2;\n                }\n                spqcds.push(spqcd);\n              }\n              qcc.SPqcds = spqcds;\n              if (context.mainHeader) {\n                context.QCC[cqcc] = qcc;\n              } else {\n                context.currentTile.QCC[cqcc] = qcc;\n              }\n              break;\n            case 0xFF52: // Coding style default (COD)\n              length = readUint16(data, position);\n              var cod = {};\n              j = position + 2;\n              var scod = data[j++];\n              cod.entropyCoderWithCustomPrecincts = !!(scod & 1);\n              cod.sopMarkerUsed = !!(scod & 2);\n              cod.ephMarkerUsed = !!(scod & 4);\n              cod.progressionOrder = data[j++];\n              cod.layersCount = readUint16(data, j);\n              j += 2;\n              cod.multipleComponentTransform = data[j++];\n\n              cod.decompositionLevelsCount = data[j++];\n              cod.xcb = (data[j++] & 0xF) + 2;\n              cod.ycb = (data[j++] & 0xF) + 2;\n              var blockStyle = data[j++];\n              cod.selectiveArithmeticCodingBypass = !!(blockStyle & 1);\n              cod.resetContextProbabilities = !!(blockStyle & 2);\n              cod.terminationOnEachCodingPass = !!(blockStyle & 4);\n              cod.verticalyStripe = !!(blockStyle & 8);\n              cod.predictableTermination = !!(blockStyle & 16);\n              cod.segmentationSymbolUsed = !!(blockStyle & 32);\n              cod.reversibleTransformation = data[j++];\n              if (cod.entropyCoderWithCustomPrecincts) {\n                var precinctsSizes = [];\n                while (j < length + position) {\n                  var precinctsSize = data[j++];\n                  precinctsSizes.push({\n                    PPx: precinctsSize & 0xF,\n                    PPy: precinctsSize >> 4\n                  });\n                }\n                cod.precinctsSizes = precinctsSizes;\n              }\n              var unsupported = [];\n              if (cod.selectiveArithmeticCodingBypass) {\n                unsupported.push('selectiveArithmeticCodingBypass');\n              }\n              if (cod.resetContextProbabilities) {\n                unsupported.push('resetContextProbabilities');\n              }\n              if (cod.terminationOnEachCodingPass) {\n                unsupported.push('terminationOnEachCodingPass');\n              }\n              if (cod.verticalyStripe) {\n                unsupported.push('verticalyStripe');\n              }\n              if (cod.predictableTermination) {\n                unsupported.push('predictableTermination');\n              }\n              if (unsupported.length > 0) {\n                doNotRecover = true;\n                throw new Error('JPX Error: Unsupported COD options (' +\n                                unsupported.join(', ') + ')');\n              }\n              if (context.mainHeader) {\n                context.COD = cod;\n              } else {\n                context.currentTile.COD = cod;\n                context.currentTile.COC = [];\n              }\n              break;\n            case 0xFF90: // Start of tile-part (SOT)\n              length = readUint16(data, position);\n              tile = {};\n              tile.index = readUint16(data, position + 2);\n              tile.length = readUint32(data, position + 4);\n              tile.dataEnd = tile.length + position - 2;\n              tile.partIndex = data[position + 8];\n              tile.partsCount = data[position + 9];\n\n              context.mainHeader = false;\n              if (tile.partIndex === 0) {\n                // reset component specific settings\n                tile.COD = context.COD;\n                tile.COC = context.COC.slice(0); // clone of the global COC\n                tile.QCD = context.QCD;\n                tile.QCC = context.QCC.slice(0); // clone of the global COC\n              }\n              context.currentTile = tile;\n              break;\n            case 0xFF93: // Start of data (SOD)\n              tile = context.currentTile;\n              if (tile.partIndex === 0) {\n                initializeTile(context, tile.index);\n                buildPackets(context);\n              }\n\n              // moving to the end of the data\n              length = tile.dataEnd - position;\n              parseTilePackets(context, data, position, length);\n              break;\n            case 0xFF55: // Tile-part lengths, main header (TLM)\n            case 0xFF57: // Packet length, main header (PLM)\n            case 0xFF58: // Packet length, tile-part header (PLT)\n            case 0xFF64: // Comment (COM)\n            case 0xFF53: // Coding style component (COC)\n              length = readUint16(data, position);\n              // skipping content\n              break;\n            default:\n              throw new Error('JPX Error: Unknown codestream code: ' +\n                              code.toString(16));\n          }\n          position += length;\n        }\n      } catch (e) {\n        if (doNotRecover || this.failOnCorruptedImage) {\n          throw e;\n        } else {\n          warn('Trying to recover from ' + e.message);\n        }\n      }\n      this.tiles = transformComponents(context);\n      this.width = context.SIZ.Xsiz - context.SIZ.XOsiz;\n      this.height = context.SIZ.Ysiz - context.SIZ.YOsiz;\n      this.componentsCount = context.SIZ.Csiz;\n    }\n  };\n  function calculateComponentDimensions(component, siz) {\n    // Section B.2 Component mapping\n    component.x0 = Math.ceil(siz.XOsiz / component.XRsiz);\n    component.x1 = Math.ceil(siz.Xsiz / component.XRsiz);\n    component.y0 = Math.ceil(siz.YOsiz / component.YRsiz);\n    component.y1 = Math.ceil(siz.Ysiz / component.YRsiz);\n    component.width = component.x1 - component.x0;\n    component.height = component.y1 - component.y0;\n  }\n  function calculateTileGrids(context, components) {\n    var siz = context.SIZ;\n    // Section B.3 Division into tile and tile-components\n    var tile, tiles = [];\n    var numXtiles = Math.ceil((siz.Xsiz - siz.XTOsiz) / siz.XTsiz);\n    var numYtiles = Math.ceil((siz.Ysiz - siz.YTOsiz) / siz.YTsiz);\n    for (var q = 0; q < numYtiles; q++) {\n      for (var p = 0; p < numXtiles; p++) {\n        tile = {};\n        tile.tx0 = Math.max(siz.XTOsiz + p * siz.XTsiz, siz.XOsiz);\n        tile.ty0 = Math.max(siz.YTOsiz + q * siz.YTsiz, siz.YOsiz);\n        tile.tx1 = Math.min(siz.XTOsiz + (p + 1) * siz.XTsiz, siz.Xsiz);\n        tile.ty1 = Math.min(siz.YTOsiz + (q + 1) * siz.YTsiz, siz.Ysiz);\n        tile.width = tile.tx1 - tile.tx0;\n        tile.height = tile.ty1 - tile.ty0;\n        tile.components = [];\n        tiles.push(tile);\n      }\n    }\n    context.tiles = tiles;\n\n    var componentsCount = siz.Csiz;\n    for (var i = 0, ii = componentsCount; i < ii; i++) {\n      var component = components[i];\n      for (var j = 0, jj = tiles.length; j < jj; j++) {\n        var tileComponent = {};\n        tile = tiles[j];\n        tileComponent.tcx0 = Math.ceil(tile.tx0 / component.XRsiz);\n        tileComponent.tcy0 = Math.ceil(tile.ty0 / component.YRsiz);\n        tileComponent.tcx1 = Math.ceil(tile.tx1 / component.XRsiz);\n        tileComponent.tcy1 = Math.ceil(tile.ty1 / component.YRsiz);\n        tileComponent.width = tileComponent.tcx1 - tileComponent.tcx0;\n        tileComponent.height = tileComponent.tcy1 - tileComponent.tcy0;\n        tile.components[i] = tileComponent;\n      }\n    }\n  }\n  function getBlocksDimensions(context, component, r) {\n    var codOrCoc = component.codingStyleParameters;\n    var result = {};\n    if (!codOrCoc.entropyCoderWithCustomPrecincts) {\n      result.PPx = 15;\n      result.PPy = 15;\n    } else {\n      result.PPx = codOrCoc.precinctsSizes[r].PPx;\n      result.PPy = codOrCoc.precinctsSizes[r].PPy;\n    }\n    // calculate codeblock size as described in section B.7\n    result.xcb_ = (r > 0 ? Math.min(codOrCoc.xcb, result.PPx - 1) :\n                   Math.min(codOrCoc.xcb, result.PPx));\n    result.ycb_ = (r > 0 ? Math.min(codOrCoc.ycb, result.PPy - 1) :\n                   Math.min(codOrCoc.ycb, result.PPy));\n    return result;\n  }\n  function buildPrecincts(context, resolution, dimensions) {\n    // Section B.6 Division resolution to precincts\n    var precinctWidth = 1 << dimensions.PPx;\n    var precinctHeight = 1 << dimensions.PPy;\n    // Jasper introduces codeblock groups for mapping each subband codeblocks\n    // to precincts. Precinct partition divides a resolution according to width\n    // and height parameters. The subband that belongs to the resolution level\n    // has a different size than the level, unless it is the zero resolution.\n\n    // From Jasper documentation: jpeg2000.pdf, section K: Tier-2 coding:\n    // The precinct partitioning for a particular subband is derived from a\n    // partitioning of its parent LL band (i.e., the LL band at the next higher\n    // resolution level)... The LL band associated with each resolution level is\n    // divided into precincts... Each of the resulting precinct regions is then\n    // mapped into its child subbands (if any) at the next lower resolution\n    // level. This is accomplished by using the coordinate transformation\n    // (u, v) = (ceil(x/2), ceil(y/2)) where (x, y) and (u, v) are the\n    // coordinates of a point in the LL band and child subband, respectively.\n    var isZeroRes = resolution.resLevel === 0;\n    var precinctWidthInSubband = 1 << (dimensions.PPx + (isZeroRes ? 0 : -1));\n    var precinctHeightInSubband = 1 << (dimensions.PPy + (isZeroRes ? 0 : -1));\n    var numprecinctswide = (resolution.trx1 > resolution.trx0 ?\n      Math.ceil(resolution.trx1 / precinctWidth) -\n      Math.floor(resolution.trx0 / precinctWidth) : 0);\n    var numprecinctshigh = (resolution.try1 > resolution.try0 ?\n      Math.ceil(resolution.try1 / precinctHeight) -\n      Math.floor(resolution.try0 / precinctHeight) : 0);\n    var numprecincts = numprecinctswide * numprecinctshigh;\n\n    resolution.precinctParameters = {\n      precinctWidth: precinctWidth,\n      precinctHeight: precinctHeight,\n      numprecinctswide: numprecinctswide,\n      numprecinctshigh: numprecinctshigh,\n      numprecincts: numprecincts,\n      precinctWidthInSubband: precinctWidthInSubband,\n      precinctHeightInSubband: precinctHeightInSubband\n    };\n  }\n  function buildCodeblocks(context, subband, dimensions) {\n    // Section B.7 Division sub-band into code-blocks\n    var xcb_ = dimensions.xcb_;\n    var ycb_ = dimensions.ycb_;\n    var codeblockWidth = 1 << xcb_;\n    var codeblockHeight = 1 << ycb_;\n    var cbx0 = subband.tbx0 >> xcb_;\n    var cby0 = subband.tby0 >> ycb_;\n    var cbx1 = (subband.tbx1 + codeblockWidth - 1) >> xcb_;\n    var cby1 = (subband.tby1 + codeblockHeight - 1) >> ycb_;\n    var precinctParameters = subband.resolution.precinctParameters;\n    var codeblocks = [];\n    var precincts = [];\n    var i, j, codeblock, precinctNumber;\n    for (j = cby0; j < cby1; j++) {\n      for (i = cbx0; i < cbx1; i++) {\n        codeblock = {\n          cbx: i,\n          cby: j,\n          tbx0: codeblockWidth * i,\n          tby0: codeblockHeight * j,\n          tbx1: codeblockWidth * (i + 1),\n          tby1: codeblockHeight * (j + 1)\n        };\n\n        codeblock.tbx0_ = Math.max(subband.tbx0, codeblock.tbx0);\n        codeblock.tby0_ = Math.max(subband.tby0, codeblock.tby0);\n        codeblock.tbx1_ = Math.min(subband.tbx1, codeblock.tbx1);\n        codeblock.tby1_ = Math.min(subband.tby1, codeblock.tby1);\n\n        // Calculate precinct number for this codeblock, codeblock position\n        // should be relative to its subband, use actual dimension and position\n        // See comment about codeblock group width and height\n        var pi = Math.floor((codeblock.tbx0_ - subband.tbx0) /\n          precinctParameters.precinctWidthInSubband);\n        var pj = Math.floor((codeblock.tby0_ - subband.tby0) /\n          precinctParameters.precinctHeightInSubband);\n        precinctNumber = pi + (pj * precinctParameters.numprecinctswide);\n\n        codeblock.precinctNumber = precinctNumber;\n        codeblock.subbandType = subband.type;\n        codeblock.Lblock = 3;\n\n        if (codeblock.tbx1_ <= codeblock.tbx0_ ||\n            codeblock.tby1_ <= codeblock.tby0_) {\n          continue;\n        }\n        codeblocks.push(codeblock);\n        // building precinct for the sub-band\n        var precinct = precincts[precinctNumber];\n        if (precinct !== undefined) {\n          if (i < precinct.cbxMin) {\n            precinct.cbxMin = i;\n          } else if (i > precinct.cbxMax) {\n            precinct.cbxMax = i;\n          }\n          if (j < precinct.cbyMin) {\n            precinct.cbxMin = j;\n          } else if (j > precinct.cbyMax) {\n            precinct.cbyMax = j;\n          }\n        } else {\n          precincts[precinctNumber] = precinct = {\n            cbxMin: i,\n            cbyMin: j,\n            cbxMax: i,\n            cbyMax: j\n          };\n        }\n        codeblock.precinct = precinct;\n      }\n    }\n    subband.codeblockParameters = {\n      codeblockWidth: xcb_,\n      codeblockHeight: ycb_,\n      numcodeblockwide: cbx1 - cbx0 + 1,\n      numcodeblockhigh: cby1 - cby0 + 1\n    };\n    subband.codeblocks = codeblocks;\n    subband.precincts = precincts;\n  }\n  function createPacket(resolution, precinctNumber, layerNumber) {\n    var precinctCodeblocks = [];\n    // Section B.10.8 Order of info in packet\n    var subbands = resolution.subbands;\n    // sub-bands already ordered in 'LL', 'HL', 'LH', and 'HH' sequence\n    for (var i = 0, ii = subbands.length; i < ii; i++) {\n      var subband = subbands[i];\n      var codeblocks = subband.codeblocks;\n      for (var j = 0, jj = codeblocks.length; j < jj; j++) {\n        var codeblock = codeblocks[j];\n        if (codeblock.precinctNumber !== precinctNumber) {\n          continue;\n        }\n        precinctCodeblocks.push(codeblock);\n      }\n    }\n    return {\n      layerNumber: layerNumber,\n      codeblocks: precinctCodeblocks\n    };\n  }\n  function LayerResolutionComponentPositionIterator(context) {\n    var siz = context.SIZ;\n    var tileIndex = context.currentTile.index;\n    var tile = context.tiles[tileIndex];\n    var layersCount = tile.codingStyleDefaultParameters.layersCount;\n    var componentsCount = siz.Csiz;\n    var maxDecompositionLevelsCount = 0;\n    for (var q = 0; q < componentsCount; q++) {\n      maxDecompositionLevelsCount = Math.max(maxDecompositionLevelsCount,\n        tile.components[q].codingStyleParameters.decompositionLevelsCount);\n    }\n\n    var l = 0, r = 0, i = 0, k = 0;\n\n    this.nextPacket = function JpxImage_nextPacket() {\n      // Section B.12.1.1 Layer-resolution-component-position\n      for (; l < layersCount; l++) {\n        for (; r <= maxDecompositionLevelsCount; r++) {\n          for (; i < componentsCount; i++) {\n            var component = tile.components[i];\n            if (r > component.codingStyleParameters.decompositionLevelsCount) {\n              continue;\n            }\n\n            var resolution = component.resolutions[r];\n            var numprecincts = resolution.precinctParameters.numprecincts;\n            for (; k < numprecincts;) {\n              var packet = createPacket(resolution, k, l);\n              k++;\n              return packet;\n            }\n            k = 0;\n          }\n          i = 0;\n        }\n        r = 0;\n      }\n    };\n  }\n  function ResolutionLayerComponentPositionIterator(context) {\n    var siz = context.SIZ;\n    var tileIndex = context.currentTile.index;\n    var tile = context.tiles[tileIndex];\n    var layersCount = tile.codingStyleDefaultParameters.layersCount;\n    var componentsCount = siz.Csiz;\n    var maxDecompositionLevelsCount = 0;\n    for (var q = 0; q < componentsCount; q++) {\n      maxDecompositionLevelsCount = Math.max(maxDecompositionLevelsCount,\n        tile.components[q].codingStyleParameters.decompositionLevelsCount);\n    }\n\n    var r = 0, l = 0, i = 0, k = 0;\n\n    this.nextPacket = function JpxImage_nextPacket() {\n      // Section B.12.1.2 Resolution-layer-component-position\n      for (; r <= maxDecompositionLevelsCount; r++) {\n        for (; l < layersCount; l++) {\n          for (; i < componentsCount; i++) {\n            var component = tile.components[i];\n            if (r > component.codingStyleParameters.decompositionLevelsCount) {\n              continue;\n            }\n\n            var resolution = component.resolutions[r];\n            var numprecincts = resolution.precinctParameters.numprecincts;\n            for (; k < numprecincts;) {\n              var packet = createPacket(resolution, k, l);\n              k++;\n              return packet;\n            }\n            k = 0;\n          }\n          i = 0;\n        }\n        l = 0;\n      }\n    };\n  }\n  function ResolutionPositionComponentLayerIterator(context) {\n    var siz = context.SIZ;\n    var tileIndex = context.currentTile.index;\n    var tile = context.tiles[tileIndex];\n    var layersCount = tile.codingStyleDefaultParameters.layersCount;\n    var componentsCount = siz.Csiz;\n    var l, r, c, p;\n    var maxDecompositionLevelsCount = 0;\n    for (c = 0; c < componentsCount; c++) {\n      var component = tile.components[c];\n      maxDecompositionLevelsCount = Math.max(maxDecompositionLevelsCount,\n        component.codingStyleParameters.decompositionLevelsCount);\n    }\n    var maxNumPrecinctsInLevel = new Int32Array(\n      maxDecompositionLevelsCount + 1);\n    for (r = 0; r <= maxDecompositionLevelsCount; ++r) {\n      var maxNumPrecincts = 0;\n      for (c = 0; c < componentsCount; ++c) {\n        var resolutions = tile.components[c].resolutions;\n        if (r < resolutions.length) {\n          maxNumPrecincts = Math.max(maxNumPrecincts,\n            resolutions[r].precinctParameters.numprecincts);\n        }\n      }\n      maxNumPrecinctsInLevel[r] = maxNumPrecincts;\n    }\n    l = 0;\n    r = 0;\n    c = 0;\n    p = 0;\n\n    this.nextPacket = function JpxImage_nextPacket() {\n      // Section B.12.1.3 Resolution-position-component-layer\n      for (; r <= maxDecompositionLevelsCount; r++) {\n        for (; p < maxNumPrecinctsInLevel[r]; p++) {\n          for (; c < componentsCount; c++) {\n            var component = tile.components[c];\n            if (r > component.codingStyleParameters.decompositionLevelsCount) {\n              continue;\n            }\n            var resolution = component.resolutions[r];\n            var numprecincts = resolution.precinctParameters.numprecincts;\n            if (p >= numprecincts) {\n              continue;\n            }\n            for (; l < layersCount;) {\n              var packet = createPacket(resolution, p, l);\n              l++;\n              return packet;\n            }\n            l = 0;\n          }\n          c = 0;\n        }\n        p = 0;\n      }\n    };\n  }\n  function PositionComponentResolutionLayerIterator(context) {\n    var siz = context.SIZ;\n    var tileIndex = context.currentTile.index;\n    var tile = context.tiles[tileIndex];\n    var layersCount = tile.codingStyleDefaultParameters.layersCount;\n    var componentsCount = siz.Csiz;\n    var precinctsSizes = getPrecinctSizesInImageScale(tile);\n    var precinctsIterationSizes = precinctsSizes;\n    var l = 0, r = 0, c = 0, px = 0, py = 0;\n\n    this.nextPacket = function JpxImage_nextPacket() {\n      // Section B.12.1.4 Position-component-resolution-layer\n      for (; py < precinctsIterationSizes.maxNumHigh; py++) {\n        for (; px < precinctsIterationSizes.maxNumWide; px++) {\n          for (; c < componentsCount; c++) {\n            var component = tile.components[c];\n            var decompositionLevelsCount =\n              component.codingStyleParameters.decompositionLevelsCount;\n            for (; r <= decompositionLevelsCount; r++) {\n              var resolution = component.resolutions[r];\n              var sizeInImageScale =\n                precinctsSizes.components[c].resolutions[r];\n              var k = getPrecinctIndexIfExist(\n                px,\n                py,\n                sizeInImageScale,\n                precinctsIterationSizes,\n                resolution);\n              if (k === null) {\n                continue;\n              }\n              for (; l < layersCount;) {\n                var packet = createPacket(resolution, k, l);\n                l++;\n                return packet;\n              }\n              l = 0;\n            }\n            r = 0;\n          }\n          c = 0;\n        }\n        px = 0;\n      }\n    };\n  }\n  function ComponentPositionResolutionLayerIterator(context) {\n    var siz = context.SIZ;\n    var tileIndex = context.currentTile.index;\n    var tile = context.tiles[tileIndex];\n    var layersCount = tile.codingStyleDefaultParameters.layersCount;\n    var componentsCount = siz.Csiz;\n    var precinctsSizes = getPrecinctSizesInImageScale(tile);\n    var l = 0, r = 0, c = 0, px = 0, py = 0;\n\n    this.nextPacket = function JpxImage_nextPacket() {\n      // Section B.12.1.5 Component-position-resolution-layer\n      for (; c < componentsCount; ++c) {\n        var component = tile.components[c];\n        var precinctsIterationSizes = precinctsSizes.components[c];\n        var decompositionLevelsCount =\n          component.codingStyleParameters.decompositionLevelsCount;\n        for (; py < precinctsIterationSizes.maxNumHigh; py++) {\n          for (; px < precinctsIterationSizes.maxNumWide; px++) {\n            for (; r <= decompositionLevelsCount; r++) {\n              var resolution = component.resolutions[r];\n              var sizeInImageScale = precinctsIterationSizes.resolutions[r];\n              var k = getPrecinctIndexIfExist(\n                px,\n                py,\n                sizeInImageScale,\n                precinctsIterationSizes,\n                resolution);\n              if (k === null) {\n                continue;\n              }\n              for (; l < layersCount;) {\n                var packet = createPacket(resolution, k, l);\n                l++;\n                return packet;\n              }\n              l = 0;\n            }\n            r = 0;\n          }\n          px = 0;\n        }\n        py = 0;\n      }\n    };\n  }\n  function getPrecinctIndexIfExist(\n    pxIndex, pyIndex, sizeInImageScale, precinctIterationSizes, resolution) {\n    var posX = pxIndex * precinctIterationSizes.minWidth;\n    var posY = pyIndex * precinctIterationSizes.minHeight;\n    if (posX % sizeInImageScale.width !== 0 ||\n        posY % sizeInImageScale.height !== 0) {\n      return null;\n    }\n    var startPrecinctRowIndex =\n      (posY / sizeInImageScale.width) *\n      resolution.precinctParameters.numprecinctswide;\n    return (posX / sizeInImageScale.height) + startPrecinctRowIndex;\n  }\n  function getPrecinctSizesInImageScale(tile) {\n    var componentsCount = tile.components.length;\n    var minWidth = Number.MAX_VALUE;\n    var minHeight = Number.MAX_VALUE;\n    var maxNumWide = 0;\n    var maxNumHigh = 0;\n    var sizePerComponent = new Array(componentsCount);\n    for (var c = 0; c < componentsCount; c++) {\n      var component = tile.components[c];\n      var decompositionLevelsCount =\n        component.codingStyleParameters.decompositionLevelsCount;\n      var sizePerResolution = new Array(decompositionLevelsCount + 1);\n      var minWidthCurrentComponent = Number.MAX_VALUE;\n      var minHeightCurrentComponent = Number.MAX_VALUE;\n      var maxNumWideCurrentComponent = 0;\n      var maxNumHighCurrentComponent = 0;\n      var scale = 1;\n      for (var r = decompositionLevelsCount; r >= 0; --r) {\n        var resolution = component.resolutions[r];\n        var widthCurrentResolution =\n          scale * resolution.precinctParameters.precinctWidth;\n        var heightCurrentResolution =\n          scale * resolution.precinctParameters.precinctHeight;\n        minWidthCurrentComponent = Math.min(\n          minWidthCurrentComponent,\n          widthCurrentResolution);\n        minHeightCurrentComponent = Math.min(\n          minHeightCurrentComponent,\n          heightCurrentResolution);\n        maxNumWideCurrentComponent = Math.max(maxNumWideCurrentComponent,\n          resolution.precinctParameters.numprecinctswide);\n        maxNumHighCurrentComponent = Math.max(maxNumHighCurrentComponent,\n          resolution.precinctParameters.numprecinctshigh);\n        sizePerResolution[r] = {\n          width: widthCurrentResolution,\n          height: heightCurrentResolution\n        };\n        scale <<= 1;\n      }\n      minWidth = Math.min(minWidth, minWidthCurrentComponent);\n      minHeight = Math.min(minHeight, minHeightCurrentComponent);\n      maxNumWide = Math.max(maxNumWide, maxNumWideCurrentComponent);\n      maxNumHigh = Math.max(maxNumHigh, maxNumHighCurrentComponent);\n      sizePerComponent[c] = {\n        resolutions: sizePerResolution,\n        minWidth: minWidthCurrentComponent,\n        minHeight: minHeightCurrentComponent,\n        maxNumWide: maxNumWideCurrentComponent,\n        maxNumHigh: maxNumHighCurrentComponent\n      };\n    }\n    return {\n      components: sizePerComponent,\n      minWidth: minWidth,\n      minHeight: minHeight,\n      maxNumWide: maxNumWide,\n      maxNumHigh: maxNumHigh\n    };\n  }\n  function buildPackets(context) {\n    var siz = context.SIZ;\n    var tileIndex = context.currentTile.index;\n    var tile = context.tiles[tileIndex];\n    var componentsCount = siz.Csiz;\n    // Creating resolutions and sub-bands for each component\n    for (var c = 0; c < componentsCount; c++) {\n      var component = tile.components[c];\n      var decompositionLevelsCount =\n        component.codingStyleParameters.decompositionLevelsCount;\n      // Section B.5 Resolution levels and sub-bands\n      var resolutions = [];\n      var subbands = [];\n      for (var r = 0; r <= decompositionLevelsCount; r++) {\n        var blocksDimensions = getBlocksDimensions(context, component, r);\n        var resolution = {};\n        var scale = 1 << (decompositionLevelsCount - r);\n        resolution.trx0 = Math.ceil(component.tcx0 / scale);\n        resolution.try0 = Math.ceil(component.tcy0 / scale);\n        resolution.trx1 = Math.ceil(component.tcx1 / scale);\n        resolution.try1 = Math.ceil(component.tcy1 / scale);\n        resolution.resLevel = r;\n        buildPrecincts(context, resolution, blocksDimensions);\n        resolutions.push(resolution);\n\n        var subband;\n        if (r === 0) {\n          // one sub-band (LL) with last decomposition\n          subband = {};\n          subband.type = 'LL';\n          subband.tbx0 = Math.ceil(component.tcx0 / scale);\n          subband.tby0 = Math.ceil(component.tcy0 / scale);\n          subband.tbx1 = Math.ceil(component.tcx1 / scale);\n          subband.tby1 = Math.ceil(component.tcy1 / scale);\n          subband.resolution = resolution;\n          buildCodeblocks(context, subband, blocksDimensions);\n          subbands.push(subband);\n          resolution.subbands = [subband];\n        } else {\n          var bscale = 1 << (decompositionLevelsCount - r + 1);\n          var resolutionSubbands = [];\n          // three sub-bands (HL, LH and HH) with rest of decompositions\n          subband = {};\n          subband.type = 'HL';\n          subband.tbx0 = Math.ceil(component.tcx0 / bscale - 0.5);\n          subband.tby0 = Math.ceil(component.tcy0 / bscale);\n          subband.tbx1 = Math.ceil(component.tcx1 / bscale - 0.5);\n          subband.tby1 = Math.ceil(component.tcy1 / bscale);\n          subband.resolution = resolution;\n          buildCodeblocks(context, subband, blocksDimensions);\n          subbands.push(subband);\n          resolutionSubbands.push(subband);\n\n          subband = {};\n          subband.type = 'LH';\n          subband.tbx0 = Math.ceil(component.tcx0 / bscale);\n          subband.tby0 = Math.ceil(component.tcy0 / bscale - 0.5);\n          subband.tbx1 = Math.ceil(component.tcx1 / bscale);\n          subband.tby1 = Math.ceil(component.tcy1 / bscale - 0.5);\n          subband.resolution = resolution;\n          buildCodeblocks(context, subband, blocksDimensions);\n          subbands.push(subband);\n          resolutionSubbands.push(subband);\n\n          subband = {};\n          subband.type = 'HH';\n          subband.tbx0 = Math.ceil(component.tcx0 / bscale - 0.5);\n          subband.tby0 = Math.ceil(component.tcy0 / bscale - 0.5);\n          subband.tbx1 = Math.ceil(component.tcx1 / bscale - 0.5);\n          subband.tby1 = Math.ceil(component.tcy1 / bscale - 0.5);\n          subband.resolution = resolution;\n          buildCodeblocks(context, subband, blocksDimensions);\n          subbands.push(subband);\n          resolutionSubbands.push(subband);\n\n          resolution.subbands = resolutionSubbands;\n        }\n      }\n      component.resolutions = resolutions;\n      component.subbands = subbands;\n    }\n    // Generate the packets sequence\n    var progressionOrder = tile.codingStyleDefaultParameters.progressionOrder;\n    switch (progressionOrder) {\n      case 0:\n        tile.packetsIterator =\n          new LayerResolutionComponentPositionIterator(context);\n        break;\n      case 1:\n        tile.packetsIterator =\n          new ResolutionLayerComponentPositionIterator(context);\n        break;\n      case 2:\n        tile.packetsIterator =\n          new ResolutionPositionComponentLayerIterator(context);\n        break;\n      case 3:\n        tile.packetsIterator =\n          new PositionComponentResolutionLayerIterator(context);\n        break;\n      case 4:\n        tile.packetsIterator =\n          new ComponentPositionResolutionLayerIterator(context);\n        break;\n      default:\n        throw new Error('JPX Error: Unsupported progression order ' +\n                        progressionOrder);\n    }\n  }\n  function parseTilePackets(context, data, offset, dataLength) {\n    var position = 0;\n    var buffer, bufferSize = 0, skipNextBit = false;\n    function readBits(count) {\n      while (bufferSize < count) {\n        var b = data[offset + position];\n        position++;\n        if (skipNextBit) {\n          buffer = (buffer << 7) | b;\n          bufferSize += 7;\n          skipNextBit = false;\n        } else {\n          buffer = (buffer << 8) | b;\n          bufferSize += 8;\n        }\n        if (b === 0xFF) {\n          skipNextBit = true;\n        }\n      }\n      bufferSize -= count;\n      return (buffer >>> bufferSize) & ((1 << count) - 1);\n    }\n    function skipMarkerIfEqual(value) {\n      if (data[offset + position - 1] === 0xFF &&\n          data[offset + position] === value) {\n        skipBytes(1);\n        return true;\n      } else if (data[offset + position] === 0xFF &&\n                 data[offset + position + 1] === value) {\n        skipBytes(2);\n        return true;\n      }\n      return false;\n    }\n    function skipBytes(count) {\n      position += count;\n    }\n    function alignToByte() {\n      bufferSize = 0;\n      if (skipNextBit) {\n        position++;\n        skipNextBit = false;\n      }\n    }\n    function readCodingpasses() {\n      if (readBits(1) === 0) {\n        return 1;\n      }\n      if (readBits(1) === 0) {\n        return 2;\n      }\n      var value = readBits(2);\n      if (value < 3) {\n        return value + 3;\n      }\n      value = readBits(5);\n      if (value < 31) {\n        return value + 6;\n      }\n      value = readBits(7);\n      return value + 37;\n    }\n    var tileIndex = context.currentTile.index;\n    var tile = context.tiles[tileIndex];\n    var sopMarkerUsed = context.COD.sopMarkerUsed;\n    var ephMarkerUsed = context.COD.ephMarkerUsed;\n    var packetsIterator = tile.packetsIterator;\n    while (position < dataLength) {\n      alignToByte();\n      if (sopMarkerUsed && skipMarkerIfEqual(0x91)) {\n        // Skip also marker segment length and packet sequence ID\n        skipBytes(4);\n      }\n      var packet = packetsIterator.nextPacket();\n      if (packet===undefined) {\n        //No more packets. Stream is truncated.\n        return;\n      }\n      if (!readBits(1)) {\n        continue;\n      }\n      var layerNumber = packet.layerNumber;\n      var queue = [], codeblock;\n      for (var i = 0, ii = packet.codeblocks.length; i < ii; i++) {\n        codeblock = packet.codeblocks[i];\n        var precinct = codeblock.precinct;\n        var codeblockColumn = codeblock.cbx - precinct.cbxMin;\n        var codeblockRow = codeblock.cby - precinct.cbyMin;\n        var codeblockIncluded = false;\n        var firstTimeInclusion = false;\n        var valueReady;\n        if (codeblock['included'] !== undefined) {\n          codeblockIncluded = !!readBits(1);\n        } else {\n          // reading inclusion tree\n          precinct = codeblock.precinct;\n          var inclusionTree, zeroBitPlanesTree;\n          if (precinct['inclusionTree'] !== undefined) {\n            inclusionTree = precinct.inclusionTree;\n          } else {\n            // building inclusion and zero bit-planes trees\n            var width = precinct.cbxMax - precinct.cbxMin + 1;\n            var height = precinct.cbyMax - precinct.cbyMin + 1;\n            inclusionTree = new InclusionTree(width, height, layerNumber);\n            zeroBitPlanesTree = new TagTree(width, height);\n            precinct.inclusionTree = inclusionTree;\n            precinct.zeroBitPlanesTree = zeroBitPlanesTree;\n            for (var l=0; l < layerNumber; l++) {\n              if (readBits(1) !== 0) {\n                throw new Error('JPX Error: Invalid tag tree');\n              }\n            }\n          }\n\n          if (inclusionTree.reset(codeblockColumn, codeblockRow, layerNumber)) {\n            while (true) {\n              if (readBits(1)) {\n                valueReady = !inclusionTree.nextLevel();\n                if (valueReady) {\n                  codeblock.included = true;\n                  codeblockIncluded = firstTimeInclusion = true;\n                  break;\n                }\n              } else {\n                inclusionTree.incrementValue(layerNumber);\n                break;\n              }\n            }\n          }\n        }\n        if (!codeblockIncluded) {\n          continue;\n        }\n        if (firstTimeInclusion) {\n          zeroBitPlanesTree = precinct.zeroBitPlanesTree;\n          zeroBitPlanesTree.reset(codeblockColumn, codeblockRow);\n          while (true) {\n            if (readBits(1)) {\n              valueReady = !zeroBitPlanesTree.nextLevel();\n              if (valueReady) {\n                break;\n              }\n            } else {\n              zeroBitPlanesTree.incrementValue();\n            }\n          }\n          codeblock.zeroBitPlanes = zeroBitPlanesTree.value;\n        }\n        var codingpasses = readCodingpasses();\n        while (readBits(1)) {\n          codeblock.Lblock++;\n        }\n        var codingpassesLog2 = log2(codingpasses);\n        // rounding down log2\n        var bits = ((codingpasses < (1 << codingpassesLog2)) ?\n          codingpassesLog2 - 1 : codingpassesLog2) + codeblock.Lblock;\n        var codedDataLength = readBits(bits);\n        queue.push({\n          codeblock: codeblock,\n          codingpasses: codingpasses,\n          dataLength: codedDataLength\n        });\n      }\n      alignToByte();\n      if (ephMarkerUsed) {\n        skipMarkerIfEqual(0x92);\n      }\n      while (queue.length > 0) {\n        var packetItem = queue.shift();\n        codeblock = packetItem.codeblock;\n        if (codeblock['data'] === undefined) {\n          codeblock.data = [];\n        }\n        codeblock.data.push({\n          data: data,\n          start: offset + position,\n          end: offset + position + packetItem.dataLength,\n          codingpasses: packetItem.codingpasses\n        });\n        position += packetItem.dataLength;\n      }\n    }\n    return position;\n  }\n  function copyCoefficients(coefficients, levelWidth, levelHeight, subband,\n                            delta, mb, reversible, segmentationSymbolUsed) {\n    var x0 = subband.tbx0;\n    var y0 = subband.tby0;\n    var width = subband.tbx1 - subband.tbx0;\n    var codeblocks = subband.codeblocks;\n    var right = subband.type.charAt(0) === 'H' ? 1 : 0;\n    var bottom = subband.type.charAt(1) === 'H' ? levelWidth : 0;\n\n    for (var i = 0, ii = codeblocks.length; i < ii; ++i) {\n      var codeblock = codeblocks[i];\n      var blockWidth = codeblock.tbx1_ - codeblock.tbx0_;\n      var blockHeight = codeblock.tby1_ - codeblock.tby0_;\n      if (blockWidth === 0 || blockHeight === 0) {\n        continue;\n      }\n      if (codeblock['data'] === undefined) {\n        continue;\n      }\n\n      var bitModel, currentCodingpassType;\n      bitModel = new BitModel(blockWidth, blockHeight, codeblock.subbandType,\n                              codeblock.zeroBitPlanes, mb);\n      currentCodingpassType = 2; // first bit plane starts from cleanup\n\n      // collect data\n      var data = codeblock.data, totalLength = 0, codingpasses = 0;\n      var j, jj, dataItem;\n      for (j = 0, jj = data.length; j < jj; j++) {\n        dataItem = data[j];\n        totalLength += dataItem.end - dataItem.start;\n        codingpasses += dataItem.codingpasses;\n      }\n      var encodedData = new Int16Array(totalLength);\n      var position = 0;\n      for (j = 0, jj = data.length; j < jj; j++) {\n        dataItem = data[j];\n        var chunk = dataItem.data.subarray(dataItem.start, dataItem.end);\n        encodedData.set(chunk, position);\n        position += chunk.length;\n      }\n      // decoding the item\n      var decoder = new ArithmeticDecoder(encodedData, 0, totalLength);\n      bitModel.setDecoder(decoder);\n\n      for (j = 0; j < codingpasses; j++) {\n        switch (currentCodingpassType) {\n          case 0:\n            bitModel.runSignificancePropogationPass();\n            break;\n          case 1:\n            bitModel.runMagnitudeRefinementPass();\n            break;\n          case 2:\n            bitModel.runCleanupPass();\n            if (segmentationSymbolUsed) {\n              bitModel.checkSegmentationSymbol();\n            }\n            break;\n        }\n        currentCodingpassType = (currentCodingpassType + 1) % 3;\n      }\n\n      var offset = (codeblock.tbx0_ - x0) + (codeblock.tby0_ - y0) * width;\n      var sign = bitModel.coefficentsSign;\n      var magnitude = bitModel.coefficentsMagnitude;\n      var bitsDecoded = bitModel.bitsDecoded;\n      var magnitudeCorrection = reversible ? 0 : 0.5;\n      var k, n, nb;\n      position = 0;\n      // Do the interleaving of Section F.3.3 here, so we do not need\n      // to copy later. LL level is not interleaved, just copied.\n      var interleave = (subband.type !== 'LL');\n      for (j = 0; j < blockHeight; j++) {\n        var row = (offset / width) | 0; // row in the non-interleaved subband\n        var levelOffset = 2 * row * (levelWidth - width) + right + bottom;\n        for (k = 0; k < blockWidth; k++) {\n          n = magnitude[position];\n          if (n !== 0) {\n            n = (n + magnitudeCorrection) * delta;\n            if (sign[position] !== 0) {\n              n = -n;\n            }\n            nb = bitsDecoded[position];\n            var pos = interleave ? (levelOffset + (offset << 1)) : offset;\n            if (reversible && (nb >= mb)) {\n              coefficients[pos] = n;\n            } else {\n              coefficients[pos] = n * (1 << (mb - nb));\n            }\n          }\n          offset++;\n          position++;\n        }\n        offset += width - blockWidth;\n      }\n    }\n  }\n  function transformTile(context, tile, c) {\n    var component = tile.components[c];\n    var codingStyleParameters = component.codingStyleParameters;\n    var quantizationParameters = component.quantizationParameters;\n    var decompositionLevelsCount =\n      codingStyleParameters.decompositionLevelsCount;\n    var spqcds = quantizationParameters.SPqcds;\n    var scalarExpounded = quantizationParameters.scalarExpounded;\n    var guardBits = quantizationParameters.guardBits;\n    var segmentationSymbolUsed = codingStyleParameters.segmentationSymbolUsed;\n    var precision = context.components[c].precision;\n\n    var reversible = codingStyleParameters.reversibleTransformation;\n    var transform = (reversible ? new ReversibleTransform() :\n                                  new IrreversibleTransform());\n\n    var subbandCoefficients = [];\n    var b = 0;\n    for (var i = 0; i <= decompositionLevelsCount; i++) {\n      var resolution = component.resolutions[i];\n\n      var width = resolution.trx1 - resolution.trx0;\n      var height = resolution.try1 - resolution.try0;\n      // Allocate space for the whole sublevel.\n      var coefficients = new Float32Array(width * height);\n\n      for (var j = 0, jj = resolution.subbands.length; j < jj; j++) {\n        var mu, epsilon;\n        if (!scalarExpounded) {\n          // formula E-5\n          mu = spqcds[0].mu;\n          epsilon = spqcds[0].epsilon + (i > 0 ? 1 - i : 0);\n        } else {\n          mu = spqcds[b].mu;\n          epsilon = spqcds[b].epsilon;\n          b++;\n        }\n\n        var subband = resolution.subbands[j];\n        var gainLog2 = SubbandsGainLog2[subband.type];\n\n        // calulate quantization coefficient (Section E.1.1.1)\n        var delta = (reversible ? 1 :\n          Math.pow(2, precision + gainLog2 - epsilon) * (1 + mu / 2048));\n        var mb = (guardBits + epsilon - 1);\n\n        // In the first resolution level, copyCoefficients will fill the\n        // whole array with coefficients. In the succeding passes,\n        // copyCoefficients will consecutively fill in the values that belong\n        // to the interleaved positions of the HL, LH, and HH coefficients.\n        // The LL coefficients will then be interleaved in Transform.iterate().\n        copyCoefficients(coefficients, width, height, subband, delta, mb,\n                         reversible, segmentationSymbolUsed);\n      }\n      subbandCoefficients.push({\n        width: width,\n        height: height,\n        items: coefficients\n      });\n    }\n\n    var result = transform.calculate(subbandCoefficients,\n                                     component.tcx0, component.tcy0);\n    return {\n      left: component.tcx0,\n      top: component.tcy0,\n      width: result.width,\n      height: result.height,\n      items: result.items\n    };\n  }\n  function transformComponents(context) {\n    var siz = context.SIZ;\n    var components = context.components;\n    var componentsCount = siz.Csiz;\n    var resultImages = [];\n    for (var i = 0, ii = context.tiles.length; i < ii; i++) {\n      var tile = context.tiles[i];\n      var transformedTiles = [];\n      var c;\n      for (c = 0; c < componentsCount; c++) {\n        transformedTiles[c] = transformTile(context, tile, c);\n      }\n      var tile0 = transformedTiles[0];\n      var out = new Int16Array(tile0.items.length * componentsCount);\n      var result = {\n        left: tile0.left,\n        top: tile0.top,\n        width: tile0.width,\n        height: tile0.height,\n        items: out\n      };\n\n      // Section G.2.2 Inverse multi component transform\n      var shift, offset, max, min, maxK;\n      var pos = 0, j, jj, y0, y1, y2, r, g, b, k, val;\n      if (tile.codingStyleDefaultParameters.multipleComponentTransform) {\n        var fourComponents = componentsCount === 4;\n        var y0items = transformedTiles[0].items;\n        var y1items = transformedTiles[1].items;\n        var y2items = transformedTiles[2].items;\n        var y3items = fourComponents ? transformedTiles[3].items : null;\n\n        // HACK: The multiple component transform formulas below assume that\n        // all components have the same precision. With this in mind, we\n        // compute shift and offset only once.\n        shift = components[0].precision - 8;\n        offset = (128 << shift) + 0.5;\n        max = 255 * (1 << shift);\n        maxK = max * 0.5;\n        min = -maxK;\n\n        var component0 = tile.components[0];\n        var alpha01 = componentsCount - 3;\n        jj = y0items.length;\n        if (!component0.codingStyleParameters.reversibleTransformation) {\n          // inverse irreversible multiple component transform\n          for (j = 0; j < jj; j++, pos += alpha01) {\n            y0 = y0items[j] + offset;\n            y1 = y1items[j];\n            y2 = y2items[j];\n            r = y0 + 1.402 * y2;\n            g = y0 - 0.34413 * y1 - 0.71414 * y2;\n            b = y0 + 1.772 * y1;\n            out[pos++] = r <= 0 ? 0 : r >= max ? 255 : r >> shift;\n            out[pos++] = g <= 0 ? 0 : g >= max ? 255 : g >> shift;\n            out[pos++] = b <= 0 ? 0 : b >= max ? 255 : b >> shift;\n          }\n        } else {\n          // inverse reversible multiple component transform\n          for (j = 0; j < jj; j++, pos += alpha01) {\n            y0 = y0items[j] + offset;\n            y1 = y1items[j];\n            y2 = y2items[j];\n            g = y0 - ((y2 + y1) >> 2);\n            r = g + y2;\n            b = g + y1;\n            out[pos++] = r <= 0 ? 0 : r >= max ? 255 : r >> shift;\n            out[pos++] = g <= 0 ? 0 : g >= max ? 255 : g >> shift;\n            out[pos++] = b <= 0 ? 0 : b >= max ? 255 : b >> shift;\n          }\n        }\n        if (fourComponents) {\n          for (j = 0, pos = 3; j < jj; j++, pos += 4) {\n            k = y3items[j];\n            out[pos] = k <= min ? 0 : k >= maxK ? 255 : (k + offset) >> shift;\n          }\n        }\n      } else { // no multi-component transform\n        for (c = 0; c < componentsCount; c++) {\n          if (components[c].precision === 8){\n            var items = transformedTiles[c].items;\n            shift = components[c].precision - 8;\n            offset = (128 << shift) + 0.5;\n            max = (127.5 * (1 << shift));\n            min = -max;\n            for (pos = c, j = 0, jj = items.length; j < jj; j++) {\n              val = items[j];\n              out[pos] = val <= min ? 0 :\n                         val >= max ? 255 : (val + offset) >> shift;\n              pos += componentsCount;\n            }\n          }else{\n            var isSigned = components[c].isSigned;\n            var items = transformedTiles[c].items;\n\n            if(isSigned){\n              shift = 0;\n              offset = 0;\n            }else{\n              shift = components[c].precision - 8;\n              offset = (128 << shift) + 0.5;\n            }\n\n            for (pos = c, j = 0, jj = items.length; j < jj; j++) {\n              val = items[j];\n              out[pos] = (val + offset);\n              pos += componentsCount;\n            }\n          }\n        }\n      }\n      resultImages.push(result);\n    }\n    return resultImages;\n  }\n  function initializeTile(context, tileIndex) {\n    var siz = context.SIZ;\n    var componentsCount = siz.Csiz;\n    var tile = context.tiles[tileIndex];\n    for (var c = 0; c < componentsCount; c++) {\n      var component = tile.components[c];\n      var qcdOrQcc = (context.currentTile.QCC[c] !== undefined ?\n        context.currentTile.QCC[c] : context.currentTile.QCD);\n      component.quantizationParameters = qcdOrQcc;\n      var codOrCoc = (context.currentTile.COC[c] !== undefined  ?\n        context.currentTile.COC[c] : context.currentTile.COD);\n      component.codingStyleParameters = codOrCoc;\n    }\n    tile.codingStyleDefaultParameters = context.currentTile.COD;\n  }\n\n  // Section B.10.2 Tag trees\n  var TagTree = (function TagTreeClosure() {\n    function TagTree(width, height) {\n      var levelsLength = log2(Math.max(width, height)) + 1;\n      this.levels = [];\n      for (var i = 0; i < levelsLength; i++) {\n        var level = {\n          width: width,\n          height: height,\n          items: []\n        };\n        this.levels.push(level);\n        width = Math.ceil(width / 2);\n        height = Math.ceil(height / 2);\n      }\n    }\n    TagTree.prototype = {\n      reset: function TagTree_reset(i, j) {\n        var currentLevel = 0, value = 0, level;\n        while (currentLevel < this.levels.length) {\n          level = this.levels[currentLevel];\n          var index = i + j * level.width;\n          if (level.items[index] !== undefined) {\n            value = level.items[index];\n            break;\n          }\n          level.index = index;\n          i >>= 1;\n          j >>= 1;\n          currentLevel++;\n        }\n        currentLevel--;\n        level = this.levels[currentLevel];\n        level.items[level.index] = value;\n        this.currentLevel = currentLevel;\n        delete this.value;\n      },\n      incrementValue: function TagTree_incrementValue() {\n        var level = this.levels[this.currentLevel];\n        level.items[level.index]++;\n      },\n      nextLevel: function TagTree_nextLevel() {\n        var currentLevel = this.currentLevel;\n        var level = this.levels[currentLevel];\n        var value = level.items[level.index];\n        currentLevel--;\n        if (currentLevel < 0) {\n          this.value = value;\n          return false;\n        }\n\n        this.currentLevel = currentLevel;\n        level = this.levels[currentLevel];\n        level.items[level.index] = value;\n        return true;\n      }\n    };\n    return TagTree;\n  })();\n\n  var InclusionTree = (function InclusionTreeClosure() {\n    function InclusionTree(width, height,  defaultValue) {\n      var levelsLength = log2(Math.max(width, height)) + 1;\n      this.levels = [];\n      for (var i = 0; i < levelsLength; i++) {\n        var items = new Int16Array(width * height);\n        for (var j = 0, jj = items.length; j < jj; j++) {\n          items[j] = defaultValue;\n        }\n\n        var level = {\n          width: width,\n          height: height,\n          items: items\n        };\n        this.levels.push(level);\n\n        width = Math.ceil(width / 2);\n        height = Math.ceil(height / 2);\n      }\n    }\n    InclusionTree.prototype = {\n      reset: function InclusionTree_reset(i, j, stopValue) {\n        var currentLevel = 0;\n        while (currentLevel < this.levels.length) {\n          var level = this.levels[currentLevel];\n          var index = i + j * level.width;\n          level.index = index;\n          var value = level.items[index];\n\n          if (value === 0xFF) {\n            break;\n          }\n\n          if (value > stopValue) {\n            this.currentLevel = currentLevel;\n            // already know about this one, propagating the value to top levels\n            this.propagateValues();\n            return false;\n          }\n\n          i >>= 1;\n          j >>= 1;\n          currentLevel++;\n        }\n        this.currentLevel = currentLevel - 1;\n        return true;\n      },\n      incrementValue: function InclusionTree_incrementValue(stopValue) {\n        var level = this.levels[this.currentLevel];\n        level.items[level.index] = stopValue + 1;\n        this.propagateValues();\n      },\n      propagateValues: function InclusionTree_propagateValues() {\n        var levelIndex = this.currentLevel;\n        var level = this.levels[levelIndex];\n        var currentValue = level.items[level.index];\n        while (--levelIndex >= 0) {\n          level = this.levels[levelIndex];\n          level.items[level.index] = currentValue;\n        }\n      },\n      nextLevel: function InclusionTree_nextLevel() {\n        var currentLevel = this.currentLevel;\n        var level = this.levels[currentLevel];\n        var value = level.items[level.index];\n        level.items[level.index] = 0xFF;\n        currentLevel--;\n        if (currentLevel < 0) {\n          return false;\n        }\n\n        this.currentLevel = currentLevel;\n        level = this.levels[currentLevel];\n        level.items[level.index] = value;\n        return true;\n      }\n    };\n    return InclusionTree;\n  })();\n\n  // Section D. Coefficient bit modeling\n  var BitModel = (function BitModelClosure() {\n    var UNIFORM_CONTEXT = 17;\n    var RUNLENGTH_CONTEXT = 18;\n    // Table D-1\n    // The index is binary presentation: 0dddvvhh, ddd - sum of Di (0..4),\n    // vv - sum of Vi (0..2), and hh - sum of Hi (0..2)\n    var LLAndLHContextsLabel = new Uint8Array([\n      0, 5, 8, 0, 3, 7, 8, 0, 4, 7, 8, 0, 0, 0, 0, 0, 1, 6, 8, 0, 3, 7, 8, 0, 4,\n      7, 8, 0, 0, 0, 0, 0, 2, 6, 8, 0, 3, 7, 8, 0, 4, 7, 8, 0, 0, 0, 0, 0, 2, 6,\n      8, 0, 3, 7, 8, 0, 4, 7, 8, 0, 0, 0, 0, 0, 2, 6, 8, 0, 3, 7, 8, 0, 4, 7, 8\n    ]);\n    var HLContextLabel = new Uint8Array([\n      0, 3, 4, 0, 5, 7, 7, 0, 8, 8, 8, 0, 0, 0, 0, 0, 1, 3, 4, 0, 6, 7, 7, 0, 8,\n      8, 8, 0, 0, 0, 0, 0, 2, 3, 4, 0, 6, 7, 7, 0, 8, 8, 8, 0, 0, 0, 0, 0, 2, 3,\n      4, 0, 6, 7, 7, 0, 8, 8, 8, 0, 0, 0, 0, 0, 2, 3, 4, 0, 6, 7, 7, 0, 8, 8, 8\n    ]);\n    var HHContextLabel = new Uint8Array([\n      0, 1, 2, 0, 1, 2, 2, 0, 2, 2, 2, 0, 0, 0, 0, 0, 3, 4, 5, 0, 4, 5, 5, 0, 5,\n      5, 5, 0, 0, 0, 0, 0, 6, 7, 7, 0, 7, 7, 7, 0, 7, 7, 7, 0, 0, 0, 0, 0, 8, 8,\n      8, 0, 8, 8, 8, 0, 8, 8, 8, 0, 0, 0, 0, 0, 8, 8, 8, 0, 8, 8, 8, 0, 8, 8, 8\n    ]);\n\n    function BitModel(width, height, subband, zeroBitPlanes, mb) {\n      this.width = width;\n      this.height = height;\n\n      this.contextLabelTable = (subband === 'HH' ? HHContextLabel :\n        (subband === 'HL' ? HLContextLabel : LLAndLHContextsLabel));\n\n      var coefficientCount = width * height;\n\n      // coefficients outside the encoding region treated as insignificant\n      // add border state cells for significanceState\n      this.neighborsSignificance = new Uint8Array(coefficientCount);\n      this.coefficentsSign = new Uint8Array(coefficientCount);\n      this.coefficentsMagnitude = mb > 14 ? new Uint32Array(coefficientCount) :\n                                  mb > 6 ? new Uint16Array(coefficientCount) :\n                                  new Uint8Array(coefficientCount);\n      this.processingFlags = new Uint8Array(coefficientCount);\n\n      var bitsDecoded = new Uint8Array(coefficientCount);\n      if (zeroBitPlanes !== 0) {\n        for (var i = 0; i < coefficientCount; i++) {\n          bitsDecoded[i] = zeroBitPlanes;\n        }\n      }\n      this.bitsDecoded = bitsDecoded;\n\n      this.reset();\n    }\n\n    BitModel.prototype = {\n      setDecoder: function BitModel_setDecoder(decoder) {\n        this.decoder = decoder;\n      },\n      reset: function BitModel_reset() {\n        // We have 17 contexts that are accessed via context labels,\n        // plus the uniform and runlength context.\n        this.contexts = new Int8Array(19);\n\n        // Contexts are packed into 1 byte:\n        // highest 7 bits carry the index, lowest bit carries mps\n        this.contexts[0] = (4 << 1) | 0;\n        this.contexts[UNIFORM_CONTEXT] = (46 << 1) | 0;\n        this.contexts[RUNLENGTH_CONTEXT] = (3 << 1) | 0;\n      },\n      setNeighborsSignificance:\n        function BitModel_setNeighborsSignificance(row, column, index) {\n        var neighborsSignificance = this.neighborsSignificance;\n        var width = this.width, height = this.height;\n        var left = (column > 0);\n        var right = (column + 1 < width);\n        var i;\n\n        if (row > 0) {\n          i = index - width;\n          if (left) {\n            neighborsSignificance[i - 1] += 0x10;\n          }\n          if (right) {\n            neighborsSignificance[i + 1] += 0x10;\n          }\n          neighborsSignificance[i] += 0x04;\n        }\n\n        if (row + 1 < height) {\n          i = index + width;\n          if (left) {\n            neighborsSignificance[i - 1] += 0x10;\n          }\n          if (right) {\n            neighborsSignificance[i + 1] += 0x10;\n          }\n          neighborsSignificance[i] += 0x04;\n        }\n\n        if (left) {\n          neighborsSignificance[index - 1] += 0x01;\n        }\n        if (right) {\n          neighborsSignificance[index + 1] += 0x01;\n        }\n        neighborsSignificance[index] |= 0x80;\n      },\n      runSignificancePropogationPass:\n        function BitModel_runSignificancePropogationPass() {\n        var decoder = this.decoder;\n        var width = this.width, height = this.height;\n        var coefficentsMagnitude = this.coefficentsMagnitude;\n        var coefficentsSign = this.coefficentsSign;\n        var neighborsSignificance = this.neighborsSignificance;\n        var processingFlags = this.processingFlags;\n        var contexts = this.contexts;\n        var labels = this.contextLabelTable;\n        var bitsDecoded = this.bitsDecoded;\n        var processedInverseMask = ~1;\n        var processedMask = 1;\n        var firstMagnitudeBitMask = 2;\n\n        for (var i0 = 0; i0 < height; i0 += 4) {\n          for (var j = 0; j < width; j++) {\n            var index = i0 * width + j;\n            for (var i1 = 0; i1 < 4; i1++, index += width) {\n              var i = i0 + i1;\n              if (i >= height) {\n                break;\n              }\n              // clear processed flag first\n              processingFlags[index] &= processedInverseMask;\n\n              if (coefficentsMagnitude[index] ||\n                  !neighborsSignificance[index]) {\n                continue;\n              }\n\n              var contextLabel = labels[neighborsSignificance[index]];\n              var decision = decoder.readBit(contexts, contextLabel);\n              if (decision) {\n                var sign = this.decodeSignBit(i, j, index);\n                coefficentsSign[index] = sign;\n                coefficentsMagnitude[index] = 1;\n                this.setNeighborsSignificance(i, j, index);\n                processingFlags[index] |= firstMagnitudeBitMask;\n              }\n              bitsDecoded[index]++;\n              processingFlags[index] |= processedMask;\n            }\n          }\n        }\n      },\n      decodeSignBit: function BitModel_decodeSignBit(row, column, index) {\n        var width = this.width, height = this.height;\n        var coefficentsMagnitude = this.coefficentsMagnitude;\n        var coefficentsSign = this.coefficentsSign;\n        var contribution, sign0, sign1, significance1;\n        var contextLabel, decoded;\n\n        // calculate horizontal contribution\n        significance1 = (column > 0 && coefficentsMagnitude[index - 1] !== 0);\n        if (column + 1 < width && coefficentsMagnitude[index + 1] !== 0) {\n          sign1 = coefficentsSign[index + 1];\n          if (significance1) {\n            sign0 = coefficentsSign[index - 1];\n            contribution = 1 - sign1 - sign0;\n          } else {\n            contribution = 1 - sign1 - sign1;\n          }\n        } else if (significance1) {\n          sign0 = coefficentsSign[index - 1];\n          contribution = 1 - sign0 - sign0;\n        } else {\n          contribution = 0;\n        }\n        var horizontalContribution = 3 * contribution;\n\n        // calculate vertical contribution and combine with the horizontal\n        significance1 = (row > 0 && coefficentsMagnitude[index - width] !== 0);\n        if (row + 1 < height && coefficentsMagnitude[index + width] !== 0) {\n          sign1 = coefficentsSign[index + width];\n          if (significance1) {\n            sign0 = coefficentsSign[index - width];\n            contribution = 1 - sign1 - sign0 + horizontalContribution;\n          } else {\n            contribution = 1 - sign1 - sign1 + horizontalContribution;\n          }\n        } else if (significance1) {\n          sign0 = coefficentsSign[index - width];\n          contribution = 1 - sign0 - sign0 + horizontalContribution;\n        } else {\n          contribution = horizontalContribution;\n        }\n\n        if (contribution >= 0) {\n          contextLabel = 9 + contribution;\n          decoded = this.decoder.readBit(this.contexts, contextLabel);\n        } else {\n          contextLabel = 9 - contribution;\n          decoded = this.decoder.readBit(this.contexts, contextLabel) ^ 1;\n        }\n        return decoded;\n      },\n      runMagnitudeRefinementPass:\n        function BitModel_runMagnitudeRefinementPass() {\n        var decoder = this.decoder;\n        var width = this.width, height = this.height;\n        var coefficentsMagnitude = this.coefficentsMagnitude;\n        var neighborsSignificance = this.neighborsSignificance;\n        var contexts = this.contexts;\n        var bitsDecoded = this.bitsDecoded;\n        var processingFlags = this.processingFlags;\n        var processedMask = 1;\n        var firstMagnitudeBitMask = 2;\n        var length = width * height;\n        var width4 = width * 4;\n\n        for (var index0 = 0, indexNext; index0 < length; index0 = indexNext) {\n          indexNext = Math.min(length, index0 + width4);\n          for (var j = 0; j < width; j++) {\n            for (var index = index0 + j; index < indexNext; index += width) {\n\n              // significant but not those that have just become\n              if (!coefficentsMagnitude[index] ||\n                (processingFlags[index] & processedMask) !== 0) {\n                continue;\n              }\n\n              var contextLabel = 16;\n              if ((processingFlags[index] & firstMagnitudeBitMask) !== 0) {\n                processingFlags[index] ^= firstMagnitudeBitMask;\n                // first refinement\n               var significance = neighborsSignificance[index] & 127;\n               contextLabel = significance === 0 ? 15 : 14;\n              }\n\n              var bit = decoder.readBit(contexts, contextLabel);\n              coefficentsMagnitude[index] =\n                (coefficentsMagnitude[index] << 1) | bit;\n              bitsDecoded[index]++;\n              processingFlags[index] |= processedMask;\n            }\n          }\n        }\n      },\n      runCleanupPass: function BitModel_runCleanupPass() {\n        var decoder = this.decoder;\n        var width = this.width, height = this.height;\n        var neighborsSignificance = this.neighborsSignificance;\n        var coefficentsMagnitude = this.coefficentsMagnitude;\n        var coefficentsSign = this.coefficentsSign;\n        var contexts = this.contexts;\n        var labels = this.contextLabelTable;\n        var bitsDecoded = this.bitsDecoded;\n        var processingFlags = this.processingFlags;\n        var processedMask = 1;\n        var firstMagnitudeBitMask = 2;\n        var oneRowDown = width;\n        var twoRowsDown = width * 2;\n        var threeRowsDown = width * 3;\n        var iNext;\n        for (var i0 = 0; i0 < height; i0 = iNext) {\n          iNext = Math.min(i0 + 4, height);\n          var indexBase = i0 * width;\n          var checkAllEmpty = i0 + 3 < height;\n          for (var j = 0; j < width; j++) {\n            var index0 = indexBase + j;\n            // using the property: labels[neighborsSignificance[index]] === 0\n            // when neighborsSignificance[index] === 0\n            var allEmpty = (checkAllEmpty &&\n              processingFlags[index0] === 0 &&\n              processingFlags[index0 + oneRowDown] === 0 &&\n              processingFlags[index0 + twoRowsDown] === 0 &&\n              processingFlags[index0 + threeRowsDown] === 0 &&\n              neighborsSignificance[index0] === 0 &&\n              neighborsSignificance[index0 + oneRowDown] === 0 &&\n              neighborsSignificance[index0 + twoRowsDown] === 0 &&\n              neighborsSignificance[index0 + threeRowsDown] === 0);\n            var i1 = 0, index = index0;\n            var i = i0, sign;\n            if (allEmpty) {\n              var hasSignificantCoefficent =\n                decoder.readBit(contexts, RUNLENGTH_CONTEXT);\n              if (!hasSignificantCoefficent) {\n                bitsDecoded[index0]++;\n                bitsDecoded[index0 + oneRowDown]++;\n                bitsDecoded[index0 + twoRowsDown]++;\n                bitsDecoded[index0 + threeRowsDown]++;\n                continue; // next column\n              }\n              i1 = (decoder.readBit(contexts, UNIFORM_CONTEXT) << 1) |\n                    decoder.readBit(contexts, UNIFORM_CONTEXT);\n              if (i1 !== 0) {\n                i = i0 + i1;\n                index += i1 * width;\n              }\n\n              sign = this.decodeSignBit(i, j, index);\n              coefficentsSign[index] = sign;\n              coefficentsMagnitude[index] = 1;\n              this.setNeighborsSignificance(i, j, index);\n              processingFlags[index] |= firstMagnitudeBitMask;\n\n              index = index0;\n              for (var i2 = i0; i2 <= i; i2++, index += width) {\n                bitsDecoded[index]++;\n              }\n\n              i1++;\n            }\n            for (i = i0 + i1; i < iNext; i++, index += width) {\n              if (coefficentsMagnitude[index] ||\n                (processingFlags[index] & processedMask) !== 0) {\n                continue;\n              }\n\n              var contextLabel = labels[neighborsSignificance[index]];\n              var decision = decoder.readBit(contexts, contextLabel);\n              if (decision === 1) {\n                sign = this.decodeSignBit(i, j, index);\n                coefficentsSign[index] = sign;\n                coefficentsMagnitude[index] = 1;\n                this.setNeighborsSignificance(i, j, index);\n                processingFlags[index] |= firstMagnitudeBitMask;\n              }\n              bitsDecoded[index]++;\n            }\n          }\n        }\n      },\n      checkSegmentationSymbol: function BitModel_checkSegmentationSymbol() {\n        var decoder = this.decoder;\n        var contexts = this.contexts;\n        var symbol = (decoder.readBit(contexts, UNIFORM_CONTEXT) << 3) |\n                     (decoder.readBit(contexts, UNIFORM_CONTEXT) << 2) |\n                     (decoder.readBit(contexts, UNIFORM_CONTEXT) << 1) |\n                      decoder.readBit(contexts, UNIFORM_CONTEXT);\n        if (symbol !== 0xA) {\n          throw new Error('JPX Error: Invalid segmentation symbol');\n        }\n      }\n    };\n\n    return BitModel;\n  })();\n\n  // Section F, Discrete wavelet transformation\n  var Transform = (function TransformClosure() {\n    function Transform() {}\n\n    Transform.prototype.calculate =\n      function transformCalculate(subbands, u0, v0) {\n      var ll = subbands[0];\n      for (var i = 1, ii = subbands.length; i < ii; i++) {\n        ll = this.iterate(ll, subbands[i], u0, v0);\n      }\n      return ll;\n    };\n    Transform.prototype.extend = function extend(buffer, offset, size) {\n      // Section F.3.7 extending... using max extension of 4\n      var i1 = offset - 1, j1 = offset + 1;\n      var i2 = offset + size - 2, j2 = offset + size;\n      buffer[i1--] = buffer[j1++];\n      buffer[j2++] = buffer[i2--];\n      buffer[i1--] = buffer[j1++];\n      buffer[j2++] = buffer[i2--];\n      buffer[i1--] = buffer[j1++];\n      buffer[j2++] = buffer[i2--];\n      buffer[i1] = buffer[j1];\n      buffer[j2] = buffer[i2];\n    };\n    Transform.prototype.iterate = function Transform_iterate(ll, hl_lh_hh,\n                                                             u0, v0) {\n      var llWidth = ll.width, llHeight = ll.height, llItems = ll.items;\n      var width = hl_lh_hh.width;\n      var height = hl_lh_hh.height;\n      var items = hl_lh_hh.items;\n      var i, j, k, l, u, v;\n\n      // Interleave LL according to Section F.3.3\n      for (k = 0, i = 0; i < llHeight; i++) {\n        l = i * 2 * width;\n        for (j = 0; j < llWidth; j++, k++, l += 2) {\n          items[l] = llItems[k];\n        }\n      }\n      // The LL band is not needed anymore.\n      llItems = ll.items = null;\n\n      var bufferPadding = 4;\n      var rowBuffer = new Float32Array(width + 2 * bufferPadding);\n\n      // Section F.3.4 HOR_SR\n      if (width === 1) {\n        // if width = 1, when u0 even keep items as is, when odd divide by 2\n        if ((u0 & 1) !== 0) {\n          for (v = 0, k = 0; v < height; v++, k += width) {\n            items[k] *= 0.5;\n          }\n        }\n      } else {\n        for (v = 0, k = 0; v < height; v++, k += width) {\n          rowBuffer.set(items.subarray(k, k + width), bufferPadding);\n\n          this.extend(rowBuffer, bufferPadding, width);\n          this.filter(rowBuffer, bufferPadding, width);\n\n          items.set(\n            rowBuffer.subarray(bufferPadding, bufferPadding + width),\n            k);\n        }\n      }\n\n      // Accesses to the items array can take long, because it may not fit into\n      // CPU cache and has to be fetched from main memory. Since subsequent\n      // accesses to the items array are not local when reading columns, we\n      // have a cache miss every time. To reduce cache misses, get up to\n      // 'numBuffers' items at a time and store them into the individual\n      // buffers. The colBuffers should be small enough to fit into CPU cache.\n      var numBuffers = 16;\n      var colBuffers = [];\n      for (i = 0; i < numBuffers; i++) {\n        colBuffers.push(new Float32Array(height + 2 * bufferPadding));\n      }\n      var b, currentBuffer = 0;\n      ll = bufferPadding + height;\n\n      // Section F.3.5 VER_SR\n      if (height === 1) {\n          // if height = 1, when v0 even keep items as is, when odd divide by 2\n        if ((v0 & 1) !== 0) {\n          for (u = 0; u < width; u++) {\n            items[u] *= 0.5;\n          }\n        }\n      } else {\n        for (u = 0; u < width; u++) {\n          // if we ran out of buffers, copy several image columns at once\n          if (currentBuffer === 0) {\n            numBuffers = Math.min(width - u, numBuffers);\n            for (k = u, l = bufferPadding; l < ll; k += width, l++) {\n              for (b = 0; b < numBuffers; b++) {\n                colBuffers[b][l] = items[k + b];\n              }\n            }\n            currentBuffer = numBuffers;\n          }\n\n          currentBuffer--;\n          var buffer = colBuffers[currentBuffer];\n          this.extend(buffer, bufferPadding, height);\n          this.filter(buffer, bufferPadding, height);\n\n          // If this is last buffer in this group of buffers, flush all buffers.\n          if (currentBuffer === 0) {\n            k = u - numBuffers + 1;\n            for (l = bufferPadding; l < ll; k += width, l++) {\n              for (b = 0; b < numBuffers; b++) {\n                items[k + b] = colBuffers[b][l];\n              }\n            }\n          }\n        }\n      }\n\n      return {\n        width: width,\n        height: height,\n        items: items\n      };\n    };\n    return Transform;\n  })();\n\n  // Section 3.8.2 Irreversible 9-7 filter\n  var IrreversibleTransform = (function IrreversibleTransformClosure() {\n    function IrreversibleTransform() {\n      Transform.call(this);\n    }\n\n    IrreversibleTransform.prototype = Object.create(Transform.prototype);\n    IrreversibleTransform.prototype.filter =\n      function irreversibleTransformFilter(x, offset, length) {\n      var len = length >> 1;\n      offset = offset | 0;\n      var j, n, current, next;\n\n      var alpha = -1.586134342059924;\n      var beta = -0.052980118572961;\n      var gamma = 0.882911075530934;\n      var delta = 0.443506852043971;\n      var K = 1.230174104914001;\n      var K_ = 1 / K;\n\n      // step 1 is combined with step 3\n\n      // step 2\n      j = offset - 3;\n      for (n = len + 4; n--; j += 2) {\n        x[j] *= K_;\n      }\n\n      // step 1 & 3\n      j = offset - 2;\n      current = delta * x[j -1];\n      for (n = len + 3; n--; j += 2) {\n        next = delta * x[j + 1];\n        x[j] = K * x[j] - current - next;\n        if (n--) {\n          j += 2;\n          current = delta * x[j + 1];\n          x[j] = K * x[j] - current - next;\n        } else {\n          break;\n        }\n      }\n\n      // step 4\n      j = offset - 1;\n      current = gamma * x[j - 1];\n      for (n = len + 2; n--; j += 2) {\n        next = gamma * x[j + 1];\n        x[j] -= current + next;\n        if (n--) {\n          j += 2;\n          current = gamma * x[j + 1];\n          x[j] -= current + next;\n        } else {\n          break;\n        }\n      }\n\n      // step 5\n      j = offset;\n      current = beta * x[j - 1];\n      for (n = len + 1; n--; j += 2) {\n        next = beta * x[j + 1];\n        x[j] -= current + next;\n        if (n--) {\n          j += 2;\n          current = beta * x[j + 1];\n          x[j] -= current + next;\n        } else {\n          break;\n        }\n      }\n\n      // step 6\n      if (len !== 0) {\n        j = offset + 1;\n        current = alpha * x[j - 1];\n        for (n = len; n--; j += 2) {\n          next = alpha * x[j + 1];\n          x[j] -= current + next;\n          if (n--) {\n            j += 2;\n            current = alpha * x[j + 1];\n            x[j] -= current + next;\n          } else {\n            break;\n          }\n        }\n      }\n    };\n\n    return IrreversibleTransform;\n  })();\n\n  // Section 3.8.1 Reversible 5-3 filter\n  var ReversibleTransform = (function ReversibleTransformClosure() {\n    function ReversibleTransform() {\n      Transform.call(this);\n    }\n\n    ReversibleTransform.prototype = Object.create(Transform.prototype);\n    ReversibleTransform.prototype.filter =\n      function reversibleTransformFilter(x, offset, length) {\n      var len = length >> 1;\n      offset = offset | 0;\n      var j, n;\n\n      for (j = offset, n = len + 1; n--; j += 2) {\n        x[j] -= (x[j - 1] + x[j + 1] + 2) >> 2;\n      }\n\n      for (j = offset + 1, n = len; n--; j += 2) {\n        x[j] += (x[j - 1] + x[j + 1]) >> 1;\n      }\n    };\n\n    return ReversibleTransform;\n  })();\n\n  return JpxImage;\n})();\n","/**\n * JPEG 2000 decoder worker.\n */\n\nimport {JpxImage} from './jpx.js';\n\nself.addEventListener('message', function (event) {\n\n  // decode DICOM buffer\n  const decoder = new JpxImage();\n  decoder.parse(event.data.buffer);\n  // post decoded data\n  const res = decoder.tiles[0].items;\n  self.postMessage([res]);\n\n}, false);\n"],"names":["listeners","ArithmeticDecoder","QeTable","qe","nmps","nlps","switchFlag","data","start","end","this","bp","dataEnd","chigh","clow","byteIn","ct","a","prototype","readBit","contexts","pos","d","cx_index","cx_mps","qeTableIcx","qeIcx","PDFJS","errors","warnings","infos","warn","msg","verbosity","VERBOSITY_LEVELS","console","log","shadow","obj","prop","value","Object","defineProperty","enumerable","configurable","writable","OPS","dependency","setLineWidth","setLineCap","setLineJoin","setMiterLimit","setDash","setRenderingIntent","setFlatness","setGState","save","restore","transform","moveTo","lineTo","curveTo","curveTo2","curveTo3","closePath","rectangle","stroke","closeStroke","fill","eoFill","fillStroke","eoFillStroke","closeFillStroke","closeEOFillStroke","endPath","clip","eoClip","beginText","endText","setCharSpacing","setWordSpacing","setHScale","setLeading","setFont","setTextRenderingMode","setTextRise","moveText","setLeadingMoveText","setTextMatrix","nextLine","showText","showSpacedText","nextLineShowText","nextLineSetSpacingShowText","setCharWidth","setCharWidthAndBounds","setStrokeColorSpace","setFillColorSpace","setStrokeColor","setStrokeColorN","setFillColor","setFillColorN","setStrokeGray","setFillGray","setStrokeRGBColor","setFillRGBColor","setStrokeCMYKColor","setFillCMYKColor","shadingFill","beginInlineImage","beginImageData","endInlineImage","paintXObject","markPoint","markPointProps","beginMarkedContent","beginMarkedContentProps","endMarkedContent","beginCompat","endCompat","paintFormXObjectBegin","paintFormXObjectEnd","beginGroup","endGroup","beginAnnotations","endAnnotations","beginAnnotation","endAnnotation","paintJpegXObject","paintImageMaskXObject","paintImageMaskXObjectGroup","paintImageXObject","paintInlineImageXObject","paintInlineImageXObjectGroup","paintImageXObjectRepeat","paintImageMaskXObjectRepeat","paintSolidColorImageMask","constructPath","UNSUPPORTED_FEATURES","unknown","forms","javaScript","smask","shadingPattern","font","UnsupportedManager","listen","cb","push","notify","featureId","i","ii","length","isValidUrl","url","allowRelative","protocol","exec","toLowerCase","PasswordResponses","NEED_PASSWORD","INCORRECT_PASSWORD","PasswordException","code","name","message","Error","constructor","UnknownErrorException","details","InvalidPDFException","MissingPDFException","UnexpectedResponseException","status","log2","x","n","readUint16","offset","readUint32","NotImplementedException","MissingDataException","begin","XRefParseException","get","buffer8","Uint8Array","Uint16Array","buffer","canvas","document","createElement","width","height","getContext","createImageData","create","digits","Util","rgbBuf","makeCssRgb","r","g","b","join","m1","m2","applyTransform","p","m","applyInverseTransform","getAxialAlignedBoundingBox","p1","p2","slice","p3","p4","Math","min","max","inverseTransform","apply3dTransform","v","singularValueDecompose2dScale","transpose","c","first","second","sqrt","sx","sy","normalizeRect","rect","intersect","rect1","rect2","compare","orderedX","sort","orderedY","result","sign","num","appendToArray","arr1","arr2","Array","apply","prependToArray","unshift","extendObj","obj1","obj2","key","getInheritableProperty","dict","has","inherit","sub","base","loadScript","src","callback","script","loaded","setAttribute","onload","getElementsByTagName","appendChild","PageViewport","viewBox","scale","rotation","offsetX","offsetY","dontFlip","rotateA","rotateB","rotateC","rotateD","offsetCanvasX","offsetCanvasY","centerX","centerY","abs","fontScale","clone","args","convertToViewportPoint","y","convertToViewportRectangle","tl","br","convertToPdfPoint","createPromiseCapability","capability","promise","Promise","resolve","reject","createBlob","contentType","Blob","type","bb","MozBlobBuilder","append","getBlob","createObjectURL","disableCreateObjectURL","URL","blob","b1","b2","b3","JpxImage","SubbandsGainLog2","failOnCorruptedImage","calculateComponentDimensions","component","siz","x0","ceil","XOsiz","XRsiz","x1","Xsiz","y0","YOsiz","YRsiz","y1","Ysiz","calculateTileGrids","context","components","tile","SIZ","tiles","numXtiles","XTOsiz","XTsiz","numYtiles","YTOsiz","YTsiz","q","tx0","ty0","tx1","ty1","Csiz","j","jj","tileComponent","tcx0","tcy0","tcx1","tcy1","getBlocksDimensions","codOrCoc","codingStyleParameters","entropyCoderWithCustomPrecincts","PPx","precinctsSizes","PPy","xcb_","xcb","ycb_","ycb","buildPrecincts","resolution","dimensions","precinctWidth","precinctHeight","isZeroRes","resLevel","precinctWidthInSubband","precinctHeightInSubband","numprecinctswide","trx1","trx0","floor","numprecinctshigh","try1","try0","numprecincts","precinctParameters","buildCodeblocks","subband","codeblock","precinctNumber","codeblockWidth","codeblockHeight","cbx0","tbx0","cby0","tby0","cbx1","tbx1","cby1","tby1","codeblocks","precincts","cbx","cby","tbx0_","tby0_","tbx1_","tby1_","subbandType","Lblock","precinct","undefined","cbxMin","cbxMax","cbyMin","cbyMax","codeblockParameters","numcodeblockwide","numcodeblockhigh","createPacket","layerNumber","precinctCodeblocks","subbands","LayerResolutionComponentPositionIterator","tileIndex","currentTile","index","layersCount","codingStyleDefaultParameters","componentsCount","maxDecompositionLevelsCount","decompositionLevelsCount","l","k","nextPacket","resolutions","packet","ResolutionLayerComponentPositionIterator","ResolutionPositionComponentLayerIterator","maxNumPrecinctsInLevel","Int32Array","maxNumPrecincts","PositionComponentResolutionLayerIterator","getPrecinctSizesInImageScale","precinctsIterationSizes","px","py","maxNumHigh","maxNumWide","sizeInImageScale","getPrecinctIndexIfExist","ComponentPositionResolutionLayerIterator","pxIndex","pyIndex","precinctIterationSizes","posX","minWidth","posY","minHeight","startPrecinctRowIndex","Number","MAX_VALUE","sizePerComponent","sizePerResolution","minWidthCurrentComponent","minHeightCurrentComponent","maxNumWideCurrentComponent","maxNumHighCurrentComponent","widthCurrentResolution","heightCurrentResolution","buildPackets","blocksDimensions","bscale","resolutionSubbands","progressionOrder","packetsIterator","parseTilePackets","dataLength","position","bufferSize","skipNextBit","readBits","count","skipMarkerIfEqual","skipBytes","alignToByte","readCodingpasses","sopMarkerUsed","COD","ephMarkerUsed","queue","codeblockColumn","codeblockRow","codeblockIncluded","firstTimeInclusion","inclusionTree","zeroBitPlanesTree","InclusionTree","TagTree","reset","incrementValue","nextLevel","included","zeroBitPlanes","codingpasses","codingpassesLog2","codedDataLength","packetItem","shift","copyCoefficients","coefficients","levelWidth","levelHeight","delta","mb","reversible","segmentationSymbolUsed","right","charAt","bottom","blockWidth","blockHeight","bitModel","currentCodingpassType","BitModel","dataItem","totalLength","encodedData","Int16Array","chunk","subarray","set","decoder","setDecoder","runSignificancePropogationPass","runMagnitudeRefinementPass","runCleanupPass","checkSegmentationSymbol","nb","coefficentsSign","magnitude","coefficentsMagnitude","bitsDecoded","magnitudeCorrection","interleave","levelOffset","transformTile","quantizationParameters","spqcds","SPqcds","scalarExpounded","guardBits","precision","reversibleTransformation","ReversibleTransform","IrreversibleTransform","subbandCoefficients","Float32Array","mu","epsilon","gainLog2","pow","items","calculate","left","top","initializeTile","qcdOrQcc","QCC","QCD","COC","parse","headerSize","lbox","tbox","jumpDataLength","method","colorspace","parseCodestream","String","fromCharCode","parseImageProperties","stream","newByte","getByte","skip","getInt32","getUint16","bitsPerComponent","doNotRecover","sqcd","spqcdSize","mainHeader","isSigned","qcd","noQuantization","spqcd","cqcc","qcc","cod","scod","multipleComponentTransform","blockStyle","selectiveArithmeticCodingBypass","resetContextProbabilities","terminationOnEachCodingPass","verticalyStripe","predictableTermination","precinctsSize","unsupported","partIndex","partsCount","toString","e","resultImages","transformedTiles","maxK","y2","val","tile0","out","fourComponents","y0items","y1items","y2items","y3items","component0","alpha01","transformComponents","levelsLength","levels","level","currentLevel","defaultValue","stopValue","propagateValues","levelIndex","currentValue","UNIFORM_CONTEXT","LLAndLHContextsLabel","HLContextLabel","HHContextLabel","contextLabelTable","coefficientCount","neighborsSignificance","Uint32Array","processingFlags","Int8Array","setNeighborsSignificance","row","column","labels","i0","i1","contextLabel","decodeSignBit","contribution","sign0","sign1","significance1","decoded","horizontalContribution","indexNext","width4","index0","bit","iNext","oneRowDown","twoRowsDown","threeRowsDown","indexBase","checkAllEmpty","i2","Transform","u0","v0","ll","iterate","extend","size","j1","j2","hl_lh_hh","u","llWidth","llHeight","llItems","rowBuffer","filter","numBuffers","colBuffers","currentBuffer","call","current","next","len","alpha","beta","gamma","K","K_","self","addEventListener","event","res","postMessage"],"sourceRoot":""}