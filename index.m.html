<html>

<head>
<title>DICOM Web Viewer</title>
<meta http-equiv="content-type" content="text/html; charset=ISO-8859-1" />
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
<link rel="stylesheet" href="css/style.css" />
<style>
#centerDiv { margin: auto; text-align:center; }
</style>
<link rel="stylesheet" href="ext/jquery/mobile/1.3.0/jquery.mobile-1.3.0.min.css" />
<!-- Third party -->  
<script type="text/javascript" src="ext/jquery/jquery-1.9.1.min.js"></script>
<script type="text/javascript" src="ext/jquery/mobile/1.3.0/jquery.mobile-1.3.0.min.js"></script>
<script type="text/javascript" src="ext/flot/jquery.flot.min.js"></script>
<!-- Local -->
<script type="text/javascript" src="src/dwv.js"></script>
<script type="text/javascript" src="src/application.js"></script>
<script type="text/javascript" src="src/dicom/dicomParser.js"></script>
<script type="text/javascript" src="src/dicom/dictionary.js"></script>
<script type="text/javascript" src="src/html/gui.js"></script>
<script type="text/javascript" src="src/html/gui_mobile.js"></script>
<script type="text/javascript" src="src/html/html.js"></script>
<script type="text/javascript" src="src/html/style.js"></script>
<script type="text/javascript" src="src/html/layer.js"></script>
<script type="text/javascript" src="src/image/filter.js"></script>
<script type="text/javascript" src="src/image/image.js"></script>
<script type="text/javascript" src="src/image/luts.js"></script>
<script type="text/javascript" src="src/image/reader.js"></script>
<script type="text/javascript" src="src/math/shapes.js"></script>
<script type="text/javascript" src="src/math/bucketQueue.js"></script>
<script type="text/javascript" src="src/math/scissors.js"></script>
<script type="text/javascript" src="src/utils/string.js"></script>

<!-- Tools: beware order is important... -->
<script type="text/javascript" src="src/tools/toolbox.js"></script>
<script type="text/javascript" src="src/tools/windowLevel.js"></script>
<script type="text/javascript" src="src/tools/draw.js"></script>
<script type="text/javascript" src="src/tools/line.js"></script>
<script type="text/javascript" src="src/tools/rectangle.js"></script>
<script type="text/javascript" src="src/tools/roi.js"></script>
<script type="text/javascript" src="src/tools/circle.js"></script>
<script type="text/javascript" src="src/tools/livewire.js"></script>
<script type="text/javascript" src="src/tools/zoom.js"></script>
<script type="text/javascript" src="src/tools/filter.js"></script>
<script type="text/javascript" src="src/tools/undo.js"></script>

<script type="text/javascript">
function toggleInfo()
{
    if( app.getInfoLayer() )
    {
        app.getInfoLayer().display( !app.getInfoLayer().isVisible() );
        // histogram
        var div = document.getElementById("plot");
        if( div.style.display === "none" ) div.style.display = '';
        else div.style.display = "none";
    }
}

// main application
var app = new dwv.App(true);

// jquery
$(document).ready(function(){
	// initialise the application
	app.init();
    // possible load from URL
    var input = dwv.html.getUriParam("input"); 
    if( input ) app.loadURL(decodeURIComponent(input));
});

</script>
</head>

<body>

<div data-role="page" id="main">

<div id="pageHeader" data-role="header">
<h1>DICOM Web Viewer (<a href="https://github.com/ivmartel/dwv">dwv</a> v0.3b)</h1>
</div><!-- /header -->

<div id="pageMain" data-role="content">   

<div class="ui-grid-a">

<!-- Open file -->
<div class="ui-block-a">
<form>
<div data-role="fieldcontain">
  <label for="imagefiles">Path:</label>
  <input id="imagefiles" type="file" multiple data-clear-btn="true" data-mini="true"/>
</div>
<div data-role="fieldcontain">
  <label for="imageurl">URL:</label>
  <input id="imageurl" type="url" data-clear-btn="true" data-mini="true"/>
</div>
</form>
</div>

<div class="ui-block-b" style="text-align:right">
<a href="#" data-role="button" data-mini="true" data-inline="true" 
 data-icon="back" data-iconpos="notext" onclick="app.getUndoStack().undo()">Undo</a>
<a href="#" data-role="button" data-mini="true" data-inline="true" 
 data-icon="forward" data-iconpos="notext" onclick="app.getUndoStack().redo()">Redo</a>
<a href="#" data-role="button" data-mini="true" data-inline="true" 
 data-icon="info" data-iconpos="notext" onclick="toggleInfo()">Info</a>
<a href="#tags_page" data-role="button" data-mini="true" data-inline="true"
 data-icon="grid" data-iconpos="notext">Tags</a>
</div>

</div><!-- /grid-a -->

<!-- Layer Container -->
<div id="centerDiv">
<div id="layerContainer" title="Image">
<canvas id="imageLayer">Only for HTML5 compatible browsers...</canvas>
<canvas id="drawLayer">Only for HTML5 compatible browsers...</canvas>
<canvas id="infoLayer">Only for HTML5 compatible browsers...</canvas>
<canvas id="tempLayer">Only for HTML5 compatible browsers...</canvas>
<div id="plot"></div>
</div>
</div>

<!-- History -->
<div id="history" title="History" style="display:none;"></div>

</div><!-- /content -->

<div data-role="footer" id="footer">        
<div data-role="navbar" id="toolbox">
<ul id="toolList"><li></li><li></li><li></li></ul>
</div><!-- /navbar: main -->
</div><!-- /footer -->

</div><!-- /page -->


<div data-role="page" id="tags_page">

<div data-role="header">
<a href="#main" data-icon="back" 
data-transition="slide" data-direction="reverse">Back</a>
<h1>DICOM Tags</h1>
</div><!-- /header -->

<div data-role="content">   
<!-- Tags -->
<div id="tags" title="Tags"></div>
</div><!-- /content -->

</div><!-- /page -->

</body>
</html>
