class t{#t;#n;#s;#i(t){if(t<0)return t;let n=t;for(;this.#n[n]!==n;)n=this.#n[n];let s=t;for(;this.#n[s]!==s;){const t=this.#n[s];this.#n[s]=n,s=t}return n}#e(t,n){this.#n[this.#i(t)]=this.#i(n)}#l(t,n,s,i){void 0!==this.#t&&this.#t===i||(this.#t=i,this.#n=new Int32Array(i),this.#s=new Int32Array(i));for(let i=0;i<s[0];i++)for(let e=0;e<s[1];e++)for(let l=0;l<s[2];l++){const s=n[0]*i+n[1]*e+n[2]*l;this.#n[s]=s,this.#s[s]=-1;const o=t[s];if(o>0){const h=s-n[0],a=s-n[1],u=s-n[2];let r=0;i>0&&(r=t[h]);let f=0;e>0&&(f=t[a]);let d=0;l>0&&(d=t[u]);let b=0;i>0&&(b=this.#s[h]);let c=0;e>0&&(c=this.#s[a]);let g=0;l>0&&(g=this.#s[u]),r!==o&&f!==o&&d!==o?this.#s[s]=s:r===o&&f!==o&&d!==o?this.#s[s]=this.#i(b):r!==o&&f===o&&d!==o?this.#s[s]=this.#i(c):r!==o&&f!==o&&d===o?this.#s[s]=this.#i(g):r!==o&&f===o&&d===o?(this.#e(c,g),this.#s[s]=this.#i(c)):r===o&&f!==o&&d===o?(this.#e(b,g),this.#s[s]=this.#i(b)):r===o&&f===o&&d!==o?(this.#e(b,c),this.#s[s]=this.#i(b)):r===o&&f===o&&d===o&&(this.#e(b,c),this.#e(b,g),this.#s[s]=this.#i(b))}}}#o(t,n){const s=new Array(n.length);let i=t,e=0;for(let t=n.length-1;t>0;--t)e=n[t],s[t]=Math.floor(i/e),i-=s[t]*e;return s[0]=i,s}#h(t,n){const s={};for(let i=0;i<this.#s.length;i++){const e=this.#i(this.#s[i]);if(e>=0){const l=this.#o(i,n),o=s[e];void 0===o?s[e]={id:t[i],sum:l,count:1}:(o.sum[0]+=l[0],o.sum[1]+=l[1],o.sum[2]+=l[2],o.count++)}}return Object.values(s).map((t=>{const n=Array(t.sum.length).fill(0);for(let s=0;s<t.sum.length;s++)n[s]=t.sum[s]/t.count;return{id:t.id,centroidIndex:n,count:t.count}}))}run(t){const n=t.imageBuffer,s=t.unitVectors,i=t.sizes,e=t.totalSize;return this.#l(n,s,i,e),this.#h(n,s)}}self.addEventListener("message",(function(n){const s=new t;self.postMessage({labels:s.run(n.data)})}),!1);
//# sourceMappingURL=labeling.worker.min.js.map