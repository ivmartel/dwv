var e=function(){var e=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),n=4017,r=799,a=3406,o=2276,t=1567,i=3784,s=5793,c=2896,f=-2056,u=2024,l=255;function h(){}function v(e,n){for(var r,a,o=0,t=[],i=16;i>0&&!e[i-1];)i--;t.push({children:[],index:0});var s,c=t[0];for(r=0;r<i;r++){for(a=0;a<e[r];a++){for((c=t.pop()).children[c.index]=n[o];c.index>0;)c=t.pop();for(c.index++,t.push(c);t.length<=r;)t.push(s={children:[],index:0}),c.children[c.index]=s.children,c=s;o++}r+1<i&&(t.push(s={children:[],index:0}),c.children[c.index]=s.children,c=s)}return t[0].children}function m(e,n,r){return 64*((e.blocksPerLine+1)*n+r)}function b(n,r,a,o,t,i,s,c,f){var u=a.mcusPerLine,l=a.progressive,h=r,v=0,b=0;function d(){if(b>0)return b--,v>>b&1;if(255===(v=n[r++])){var e=n[r++];if(e)throw"unexpected marker: "+(v<<8|e).toString(16)}return b=7,v>>>7}function p(e){for(var n=e;;){if("number"==typeof(n=n[d()]))return n;if("object"!=typeof n)throw"invalid huffman sequence"}}function k(e){for(var n=0;e>0;)n=n<<1|d(),e--;return n}function g(e){if(1===e)return 1===d()?1:-1;var n=k(e);return n>=1<<e-1?n:n+(-1<<e)+1}var C,w=0,D=0;function P(e,n,r,a,o){var t=r%u;n(e,m(e,(r/u|0)*e.v+a,t*e.h+o))}function T(e,n,r){n(e,m(e,r/e.blocksPerLine|0,r%e.blocksPerLine))}var y,L,x,A,_,z,I=o.length;z=l?0===i?0===c?function(e,n){var r=p(e.huffmanTableDC),a=0===r?0:g(r)<<f;e.blockData[n]=e.pred+=a}:function(e,n){e.blockData[n]|=d()<<f}:0===c?function(n,r){if(w>0)w--;else for(var a=i,o=s;a<=o;){var t=p(n.huffmanTableAC),c=15&t,u=t>>4;if(0!==c){var l=e[a+=u];n.blockData[r+l]=g(c)*(1<<f),a++}else{if(u<15){w=k(u)+(1<<u)-1;break}a+=16}}}:function(n,r){for(var a,o,t=i,c=s,u=0;t<=c;){var l=e[t];switch(D){case 0:if(u=(o=p(n.huffmanTableAC))>>4,0==(a=15&o))u<15?(w=k(u)+(1<<u),D=4):(u=16,D=1);else{if(1!==a)throw"invalid ACn encoding";C=g(a),D=u?2:3}continue;case 1:case 2:n.blockData[r+l]?n.blockData[r+l]+=d()<<f:0==--u&&(D=2===D?3:0);break;case 3:n.blockData[r+l]?n.blockData[r+l]+=d()<<f:(n.blockData[r+l]=C<<f,D=0);break;case 4:n.blockData[r+l]&&(n.blockData[r+l]+=d()<<f)}t++}4===D&&0==--w&&(D=0)}:function(n,r){var a=p(n.huffmanTableDC),o=0===a?0:g(a);n.blockData[r]=n.pred+=o;for(var t=1;t<64;){var i=p(n.huffmanTableAC),s=15&i,c=i>>4;if(0!==s){var f=e[t+=c];n.blockData[r+f]=g(s),t++}else{if(c<15)break;t+=16}}};var U,q,Y,M,R=0;for(q=1===I?o[0].blocksPerLine*o[0].blocksPerColumn:u*a.mcusPerColumn,t||(t=q);R<q;){for(L=0;L<I;L++)o[L].pred=0;if(w=0,1===I)for(y=o[0],_=0;_<t;_++)T(y,z,R),R++;else for(_=0;_<t;_++){for(L=0;L<I;L++)for(Y=(y=o[L]).h,M=y.v,x=0;x<M;x++)for(A=0;A<Y;A++)P(y,z,R,x,A);R++}if(b=0,(U=n[r]<<8|n[r+1])<=65280)throw"marker was not found";if(!(U>=65488&&U<=65495))break;r+=2}return r-h}function d(e,h,v){for(var m,b,d,p,k,g,C,w,D,P,T,y,L,x,A,_,z,I=e.quantizationTable,U=e.blockData,q=0;q<64;q+=8)D=U[h+q],P=U[h+q+1],T=U[h+q+2],y=U[h+q+3],L=U[h+q+4],x=U[h+q+5],A=U[h+q+6],_=U[h+q+7],D*=I[q],P|T|y|L|x|A|_?(P*=I[q+1],T*=I[q+2],y*=I[q+3],L*=I[q+4],x*=I[q+5],A*=I[q+6],_*=I[q+7],b=(m=(m=s*D+128>>8)+(b=s*L+128>>8)+1>>1)-b,z=(d=T)*i+(p=A)*t+128>>8,d=d*t-p*i+128>>8,C=(k=(k=c*(P-_)+128>>8)+(C=x<<4)+1>>1)-C,g=(w=(w=c*(P+_)+128>>8)+(g=y<<4)+1>>1)-g,p=(m=m+(p=z)+1>>1)-p,d=(b=b+d+1>>1)-d,z=k*o+w*a+2048>>12,k=k*a-w*o+2048>>12,w=z,z=g*r+C*n+2048>>12,g=g*n-C*r+2048>>12,C=z,v[q]=m+w,v[q+7]=m-w,v[q+1]=b+C,v[q+6]=b-C,v[q+2]=d+g,v[q+5]=d-g,v[q+3]=p+k,v[q+4]=p-k):(z=s*D+512>>10,v[q]=z,v[q+1]=z,v[q+2]=z,v[q+3]=z,v[q+4]=z,v[q+5]=z,v[q+6]=z,v[q+7]=z);for(var Y=0;Y<8;++Y)D=v[Y],(P=v[Y+8])|(T=v[Y+16])|(y=v[Y+24])|(L=v[Y+32])|(x=v[Y+40])|(A=v[Y+48])|(_=v[Y+56])?(b=(m=(m=s*D+2048>>12)+(b=s*L+2048>>12)+1>>1)-b,z=(d=T)*i+(p=A)*t+2048>>12,d=d*t-p*i+2048>>12,p=z,C=(k=(k=c*(P-_)+2048>>12)+(C=x)+1>>1)-C,g=(w=(w=c*(P+_)+2048>>12)+(g=y)+1>>1)-g,z=k*o+w*a+2048>>12,k=k*a-w*o+2048>>12,w=z,z=g*r+C*n+2048>>12,g=g*n-C*r+2048>>12,D=(D=(m=m+p+1>>1)+w)<=f?0:D>=u?l:D-f>>4,P=(P=(b=b+d+1>>1)+(C=z))<=f?0:P>=u?l:P-f>>4,T=(T=(d=b-d)+g)<=f?0:T>=u?l:T-f>>4,y=(y=(p=m-p)+k)<=f?0:y>=u?l:y-f>>4,L=(L=p-k)<=f?0:L>=u?l:L-f>>4,x=(x=d-g)<=f?0:x>=u?l:x-f>>4,A=(A=b-C)<=f?0:A>=u?l:A-f>>4,_=(_=m-w)<=f?0:_>=u?l:_-f>>4,U[h+Y]=D,U[h+Y+8]=P,U[h+Y+16]=T,U[h+Y+24]=y,U[h+Y+32]=L,U[h+Y+40]=x,U[h+Y+48]=A,U[h+Y+56]=_):(z=(z=s*D+8192>>14)<=f?0:z>=u?l:z-f>>4,U[h+Y]=z,U[h+Y+8]=z,U[h+Y+16]=z,U[h+Y+24]=z,U[h+Y+32]=z,U[h+Y+40]=z,U[h+Y+48]=z,U[h+Y+56]=z)}function p(e,n){for(var r=n.blocksPerLine,a=n.blocksPerColumn,o=new Int32Array(64),t=0;t<a;t++)for(var i=0;i<r;i++)d(n,m(n,t,i),o);return n.blockData}function k(e){return e<=0?0:e>=255?255:e}return h.prototype={parse:function(n){function r(){var e=n[c]<<8|n[c+1];return c+=2,e}function a(e){for(var n=Math.ceil(e.samplesPerLine/8/e.maxH),r=Math.ceil(e.scanLines/8/e.maxV),a=0;a<e.components.length;a++){S=e.components[a];var o=Math.ceil(Math.ceil(e.samplesPerLine/8)*S.h/e.maxH),t=Math.ceil(Math.ceil(e.scanLines/8)*S.v/e.maxV),i=n*S.h,s=r*S.v*64*(i+1);S.blockData=new Int16Array(s),S.blocksPerLine=o,S.blocksPerColumn=t}e.mcusPerLine=n,e.mcusPerColumn=r}var o,t,i,s,c=0,h=null,m=null,d=[],k=[],g=[],C=r();if(65496!==C)throw"SOI not found";for(C=r();65497!==C;){var w,D,P;switch(C){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var T=(void 0,void 0,i=r(),s=n.subarray(c,c+i-2),c+=s.length,s);65504===C&&74===T[0]&&70===T[1]&&73===T[2]&&70===T[3]&&0===T[4]&&(h={version:{major:T[5],minor:T[6]},densityUnits:T[7],xDensity:T[8]<<8|T[9],yDensity:T[10]<<8|T[11],thumbWidth:T[12],thumbHeight:T[13],thumbData:T.subarray(14,14+3*T[12]*T[13])}),65518===C&&65===T[0]&&100===T[1]&&111===T[2]&&98===T[3]&&101===T[4]&&(m={version:T[5]<<8|T[6],flags0:T[7]<<8|T[8],flags1:T[9]<<8|T[10],transformCode:T[11]});break;case 65499:for(var y=r()+c-2;c<y;){var L=n[c++],x=new Uint16Array(64);if(L>>4){if(L>>4!=1)throw"DQT: invalid table spec";for(D=0;D<64;D++)x[e[D]]=r()}else for(D=0;D<64;D++)x[e[D]]=n[c++];d[15&L]=x}break;case 65472:case 65473:case 65474:if(o)throw"Only single frame JPEGs supported";r(),(o={}).extended=65473===C,o.progressive=65474===C,o.precision=n[c++];var A=255/((1<<o.precision)-1);f/=A,u/=A,l/=A,o.scanLines=r(),o.samplesPerLine=r(),o.components=[],o.componentIds={};var _,z=n[c++],I=0,U=0;for(w=0;w<z;w++){_=n[c];var q=n[c+1]>>4,Y=15&n[c+1];I<q&&(I=q),U<Y&&(U=Y);var M=n[c+2];P=o.components.push({h:q,v:Y,quantizationTable:d[M],quantizationTableId:M}),o.componentIds[_]=P-1,c+=3}o.maxH=I,o.maxV=U,a(o);break;case 65476:var R=r();for(w=2;w<R;){var H=n[c++],V=new Uint8Array(16),j=0;for(D=0;D<16;D++,c++)j+=V[D]=n[c];var E=new Uint8Array(j);for(D=0;D<j;D++,c++)E[D]=n[c];w+=17+j,(H>>4?k:g)[15&H]=v(V,E)}break;case 65501:r(),t=r();break;case 65498:r();var S,B=n[c++],G=[];for(w=0;w<B;w++){var J=o.componentIds[n[c++]];S=o.components[J];var N=n[c++];S.huffmanTableDC=g[N>>4],S.huffmanTableAC=k[15&N],G.push(S)}var O=n[c++],X=n[c++],Q=n[c++],W=b(n,c,o,G,t,O,X,Q>>4,15&Q);c+=W;break;case 65535:255!==n[c]&&c--;break;default:if(255===n[c-3]&&n[c-2]>=192&&n[c-2]<=254){c-=3;break}throw"unknown JPEG marker "+C.toString(16)}C=r()}for(this.width=o.samplesPerLine,this.height=o.scanLines,this.jfif=h,this.adobe=m,this.components=[],w=0;w<o.components.length;w++)(S=o.components[w]).quantizationTable||null==S.quantizationTableId||(S.quantizationTable=d[S.quantizationTableId]),this.components.push({output:p(0,S),scaleX:S.h/o.maxH,scaleY:S.v/o.maxV,blocksPerLine:S.blocksPerLine,blocksPerColumn:S.blocksPerColumn});this.numComponents=this.components.length},_getLinearizedBlockData:function(e,n){var r,a,o,t,i,s,c,f,u,l,h,v=this.width/e,m=this.height/n,b=0,d=this.components.length,p=e*n*d,k=new Uint16Array(p),g=new Uint32Array(e),C=4294967288;for(c=0;c<d;c++){for(a=(r=this.components[c]).scaleX*v,o=r.scaleY*m,b=c,h=r.output,t=r.blocksPerLine+1<<3,i=0;i<e;i++)f=0|i*a,g[i]=(f&C)<<3|7&f;for(s=0;s<n;s++)for(l=t*((f=0|s*o)&C)|(7&f)<<3,i=0;i<e;i++)k[b]=h[l+g[i]],b+=d}var w=this.decodeTransform;if(w)for(c=0;c<p;)for(f=0,u=0;f<d;f++,c++,u+=2)k[c]=(k[c]*w[u]>>8)+w[u+1];return k},_isColorConversionNeeded:function(){return!(!this.adobe||!this.adobe.transformCode)||3===this.numComponents},_convertYccToRgb:function(e){for(var n,r,a,o=0,t=e.length;o<t;o+=3)n=e[o],r=e[o+1],a=e[o+2],e[o]=k(n-179.456+1.402*a),e[o+1]=k(n+135.459-.344*r-.714*a),e[o+2]=k(n-226.816+1.772*r);return e},_convertYcckToRgb:function(e){for(var n,r,a,o,t=0,i=0,s=e.length;i<s;i+=4){n=e[i];var c=(r=e[i+1])*(-660635669420364e-19*r+.000437130475926232*(a=e[i+2])-54080610064599e-18*n+.00048449797120281*(o=e[i+3])-.154362151871126)-122.67195406894+a*(-.000957964378445773*a+.000817076911346625*n-.00477271405408747*o+1.53380253221734)+n*(.000961250184130688*n-.00266257332283933*o+.48357088451265)+o*(-.000336197177618394*o+.484791561490776),f=107.268039397724+r*(219927104525741e-19*r-.000640992018297945*a+.000659397001245577*n+.000426105652938837*o-.176491792462875)+a*(-.000778269941513683*a+.00130872261408275*n+.000770482631801132*o-.151051492775562)+n*(.00126935368114843*n-.00265090189010898*o+.25802910206845)+o*(-.000318913117588328*o-.213742400323665),u=r*(-.000570115196973677*r-263409051004589e-19*a+.0020741088115012*n-.00288260236853442*o+.814272968359295)-20.810012546947+a*(-153496057440975e-19*a-.000132689043961446*n+.000560833691242812*o-.195152027534049)+n*(.00174418132927582*n-.00255243321439347*o+.116935020465145)+o*(-.000343531996510555*o+.24165260232407);e[t++]=k(c),e[t++]=k(f),e[t++]=k(u)}return e},_convertYcckToCmyk:function(e){for(var n,r,a,o=0,t=e.length;o<t;o+=4)n=e[o],r=e[o+1],a=e[o+2],e[o]=k(434.456-n-1.402*a),e[o+1]=k(119.541-n+.344*r+.714*a),e[o+2]=k(481.816-n-1.772*r);return e},_convertCmykToRgb:function(e){for(var n,r,a,o,t=0,i=-16581375,s=1/255/255,c=0,f=e.length;c<f;c+=4){var u=(n=e[c])*(-4.387332384609988*n+54.48615194189176*(r=e[c+1])+18.82290502165302*(a=e[c+2])+212.25662451639585*(o=e[c+3])-72734.4411664936)+r*(1.7149763477362134*r-5.6096736904047315*a-17.873870861415444*o-1401.7366389350734)+a*(-2.5217340131683033*a-21.248923337353073*o+4465.541406466231)-o*(21.86122147463605*o+48317.86113160301),l=n*(8.841041422036149*n+60.118027045597366*r+6.871425592049007*a+31.159100130055922*o-20220.756542821975)+r*(-15.310361306967817*r+17.575251261109482*a+131.35250912493976*o-48691.05921601825)+a*(4.444339102852739*a+9.8632861493405*o-6341.191035517494)-o*(20.737325471181034*o+47890.15695978492),h=n*(.8842522430003296*n+8.078677503112928*r+30.89978309703729*a-.23883238689178934*o-3616.812083916688)+r*(10.49593273432072*r+63.02378494754052*a+50.606957656360734*o-28620.90484698408)+a*(.03296041114873217*a+115.60384449646641*o-49363.43385999684)-o*(22.33816807309886*o+45932.16563550634);e[t++]=u>=0?255:u<=i?0:255+u*s|0,e[t++]=l>=0?255:l<=i?0:255+l*s|0,e[t++]=h>=0?255:h<=i?0:255+h*s|0}return e},getData:function(e,n,r){if(this.numComponents>4)throw"Unsupported color mode";var a=this._getLinearizedBlockData(e,n);if(1===this.numComponents&&r){for(var o=a.length,t=new Uint16Array(3*o),i=0,s=0;s<o;s++){var c=a[s];t[i++]=c,t[i++]=c,t[i++]=c}return t}if(3===this.numComponents)return this._convertYccToRgb(a);if(4===this.numComponents){if(this._isColorConversionNeeded())return r?this._convertYcckToRgb(a):this._convertYcckToCmyk(a);if(r)return this._convertCmykToRgb(a)}return a}},h}();self.addEventListener("message",(function(n){const r=new e;r.parse(n.data.buffer);const a=r.getData(r.width,r.height);self.postMessage([a])}),!1);
//# sourceMappingURL=jpegbaseline.worker.min.js.map